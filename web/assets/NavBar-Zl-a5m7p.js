import{a as e,j as s}from"./vendor-animation-CcgChT4Y.js";import{f as r,g as a,b as l,u as t,a as n,B as o,m as i,A as c,e as d,c as m}from"./index-QkJ4t2go.js";import{L as h,D as x,a as u,b as f,c as p,d as g}from"./dropdown-menu-DjLdUzkQ.js";import{S as j,U as b,s as k,t as w,u as v,v as y,X as N}from"./vendor-icons-BYe_-sqm.js";function C(){if("undefined"!=typeof window)try{return JSON.parse(window.localStorage.getItem("cart")||"[]").reduce((e,s)=>e+(s.quantity||1),0)}catch{return 0}return 0}const S=()=>{const[S,L]=e.useState(!0),[z,I]=e.useState(!1),[A,D]=e.useState(C()),E=r(),O=a(),{isAdmin:P,user:T}=l(),{theme:F,setTheme:U,effectiveTheme:Y}=t(),q=()=>{const e=localStorage.getItem("token");e&&c.postData({endpoint:"/user/logout",body:{request:d({token:e})},successCallback:()=>{localStorage.removeItem("token"),m.success("Logged Out Successfully"),O("/login")},errorCallback:()=>{localStorage.removeItem("token"),m.error("Logout failed. Please try again")}})},B=()=>{O("/profile")};e.useEffect(()=>{const e=()=>D(C());window.addEventListener("storage",e);const s=setInterval(e,500);return()=>{window.removeEventListener("storage",e),clearInterval(s)}},[]),e.useEffect(()=>{const e=()=>{window.scrollY>100?I(!0):I(!1)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]);const H=Boolean(localStorage.getItem("token")||T),R=[{href:"/",label:"Home",type:"link"},{label:"Shop",type:"action",onClick:e=>{"/"!==E.pathname?(e.preventDefault(),sessionStorage.setItem("scrollToShop","1"),O("/",{replace:!1})):i.scroller.scrollTo("shop",{duration:300,delay:300,smooth:"easeInOutQuart"})}},{href:"/contact",label:"Store Locator",type:"link"},{href:"/order-tracking",label:H?"Your Orders":"Order Tracking",type:"link"},...H?[{href:"/addresses",label:"Your Addresses",type:"link"}]:[]],J=[{href:"/about",label:"About Us",type:"link"},{href:"/contact",label:"Contact Us",type:"link"},{href:"/shipping-policy",label:"Shipping Policy",type:"link"},{href:"/return-policy",label:"Returns & Refund Policy",type:"link"},...H?[{onClick:B,label:"Profile",type:"action"},...P?[{href:"/admin",label:"Admin Dashboard",type:"link"}]:[],{onClick:q,label:"Logout",type:"action"}]:[{href:"/login",label:"Login",type:"link"}]];return s.jsxs(s.Fragment,{children:[s.jsxs("nav",{className:n("sticky top-0 left-0 right-0 z-40 flex h-14 sm:h-16 items-center px-3 sm:px-4 border-b backdrop-blur-sm transition-all duration-300",z?"bg-background/95 border-border shadow-sm":"bg-background/95 border-border","text-foreground"),children:[s.jsx("div",{className:"flex items-center flex-shrink-0",children:s.jsxs("a",{href:"/",className:"flex items-center space-x-1 sm:space-x-2",children:[s.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10",children:s.jsx(h,{})}),s.jsx("span",{className:"font-serif text-sm sm:text-lg font-semibold block nav-parisienne",children:"Amma's Heartmade Magic"})]})}),s.jsx("div",{className:"hidden xl:flex items-center space-x-1 ml-8",children:R.map(e=>"link"===e.type?s.jsx("a",{href:e.href,className:"px-3 py-2 text-sm font-medium rounded-md transition-colors text-muted-foreground hover:text-foreground hover:bg-accent focus-ring",children:e.label},e.label):s.jsx("span",{className:"px-3 py-2 text-sm font-medium rounded-md transition-colors text-muted-foreground hover:text-foreground hover:bg-accent cursor-pointer",onClick:e.onClick,children:e.label},e.label))}),s.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2 ml-auto",children:[s.jsx(o,{variant:"ghost",size:"icon",className:"relative h-9 w-9 sm:h-10 sm:w-10",asChild:!0,children:s.jsxs("a",{href:"/checkout",className:"relative",children:[s.jsx(j,{className:"h-4 w-4 sm:h-5 sm:w-5"}),A>0&&s.jsx("span",{className:"absolute -top-0 -right-0 bg-primary text-primary-foreground text-[10px] sm:text-xs rounded-full h-4 w-4 sm:h-5 sm:w-5 flex items-center justify-center font-medium",children:A>99?"99+":A})]})}),H?s.jsxs(x,{children:[s.jsx(u,{asChild:!0,children:s.jsx(o,{variant:"ghost",size:"icon",className:"h-9 w-9 sm:h-10 sm:w-10 rounded-full hidden md:flex",children:s.jsx(b,{className:"h-4 w-4 sm:h-5 sm:w-5"})})}),s.jsxs(f,{align:"end",className:"w-56",children:[s.jsxs(p,{onClick:B,children:[s.jsx(b,{className:"mr-2 h-4 w-4"}),"Profile"]}),s.jsx(p,{onClick:()=>O("/order-tracking"),children:"Orders"}),s.jsx(p,{onClick:()=>O("/addresses"),children:"Addresses"}),P&&s.jsxs(s.Fragment,{children:[s.jsx(g,{}),s.jsx(p,{onClick:()=>O("/admin"),children:"Admin Dashboard"}),s.jsx(p,{onClick:()=>O("/inventory"),children:"Inventory"})]}),s.jsx(g,{}),s.jsx(p,{onClick:q,className:"text-primary",children:"Logout"})]})]}):s.jsxs(o,{variant:"ghost",size:"sm",onClick:()=>O("/login"),className:"h-9 sm:h-10 px-3 hidden md:flex",children:[s.jsx(b,{className:"h-4 w-4 sm:mr-2"}),s.jsx("span",{className:"hidden sm:hidden",children:"Login"})]}),s.jsxs(x,{children:[s.jsx(u,{asChild:!0,children:s.jsxs(o,{variant:"ghost",size:"icon",className:"h-9 w-9 sm:h-10 sm:w-10",children:["light"===F&&s.jsx(k,{className:"h-4 w-4"}),"dark"===F&&s.jsx(w,{className:"h-4 w-4"}),"system"===F&&s.jsx(v,{className:"h-4 w-4"})]})}),s.jsxs(f,{align:"end",children:[s.jsxs(p,{onClick:()=>U("light"),children:[s.jsx(k,{className:"mr-2 h-4 w-4"}),"Light"]}),s.jsxs(p,{onClick:()=>U("dark"),children:[s.jsx(w,{className:"mr-2 h-4 w-4"}),"Dark"]}),s.jsxs(p,{onClick:()=>U("system"),children:[s.jsx(v,{className:"mr-2 h-4 w-4"}),"System"]})]})]}),s.jsx(o,{variant:"ghost",size:"icon",className:"xl:hidden h-9 w-9 sm:h-10 sm:w-10",onClick:()=>{L(e=>!e)},children:S?s.jsx(y,{className:"h-5 w-5"}):s.jsx(N,{className:"h-5 w-5"})})]})]}),!S&&s.jsx("div",{className:n("fixed top-12 left-0 right-0 z-30 xl:hidden","bg-background border-b border-border","shadow-lg transition-all duration-200"),children:s.jsxs("div",{className:"px-4 py-6 space-y-1",children:[[...R,...J].map(e=>s.jsx("div",{children:"link"===e.type?s.jsx("a",{href:e.href,className:"block px-3 py-2 text-base font-medium text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors",onClick:()=>L(!0),children:e.label}):s.jsx("span",{className:"block px-3 py-2 text-base font-medium text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors cursor-pointer",onClick:s=>{e.onClick?.(s),L(!0)},children:e.label})},e.label)),s.jsx("div",{className:"pt-4 border-t border-border",children:s.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[s.jsxs(o,{variant:"light"===F?"default":"outline",size:"sm",onClick:()=>U("light"),children:[s.jsx(k,{className:"h-4 w-4 mr-2"}),"Light"]}),s.jsxs(o,{variant:"dark"===F?"default":"outline",size:"sm",onClick:()=>U("dark"),children:[s.jsx(w,{className:"h-4 w-4 mr-2"}),"Dark"]}),s.jsxs(o,{variant:"system"===F?"default":"outline",size:"sm",onClick:()=>U("system"),children:[s.jsx(v,{className:"h-4 w-4 mr-2"}),"System"]})]})})]})})]})};export{S as N};
