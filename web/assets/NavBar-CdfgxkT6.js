import{r as e,a8 as s,m as r,j as a,S as l,U as t,a9 as n,aa as o,ab as i,ac as c,X as d}from"./vendor-react-Tc4xLtOv.js";import{b as m,u as h,a as x,B as u,m as p,A as f,e as g,c as j}from"./index-CCl3TzR2.js";import{L as b,D as k,a as w,b as y,c as v,d as N}from"./dropdown-menu-Dweh6OYL.js";function C(){if("undefined"!=typeof window)try{return JSON.parse(window.localStorage.getItem("cart")||"[]").reduce((e,s)=>e+(s.quantity||1),0)}catch{return 0}return 0}const S=()=>{const[S,L]=e.useState(!0),[z,I]=e.useState(!1),[A,D]=e.useState(C()),E=s(),O=r(),{isAdmin:P,user:T}=m(),{theme:F,setTheme:U,effectiveTheme:Y}=h(),q=()=>{const e=localStorage.getItem("token");e&&f.postData({endpoint:"/user/logout",body:{request:g({token:e})},successCallback:()=>{localStorage.removeItem("token"),j.success("Logged Out Successfully"),O("/login")},errorCallback:()=>{localStorage.removeItem("token"),j.error("Logout failed. Please try again")}})},B=()=>{O("/profile")};e.useEffect(()=>{const e=()=>D(C());window.addEventListener("storage",e);const s=setInterval(e,500);return()=>{window.removeEventListener("storage",e),clearInterval(s)}},[]),e.useEffect(()=>{const e=()=>{window.scrollY>100?I(!0):I(!1)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]);const H=Boolean(localStorage.getItem("token")||T),R=[{href:"/",label:"Home",type:"link"},{label:"Shop",type:"action",onClick:e=>{"/"!==E.pathname?(e.preventDefault(),sessionStorage.setItem("scrollToShop","1"),O("/",{replace:!1})):p.scroller.scrollTo("shop",{duration:300,delay:300,smooth:"easeInOutQuart"})}},{href:"/contact",label:"Store Locator",type:"link"},{href:"/order-tracking",label:H?"Your Orders":"Order Tracking",type:"link"},...H?[{href:"/addresses",label:"Your Addresses",type:"link"}]:[]],J=[{href:"/about",label:"About Us",type:"link"},{href:"/contact",label:"Contact Us",type:"link"},{href:"/shipping-policy",label:"Shipping Policy",type:"link"},{href:"/return-policy",label:"Returns & Refund Policy",type:"link"},...H?[{onClick:B,label:"Profile",type:"action"},...P?[{href:"/admin",label:"Admin Dashboard",type:"link"}]:[],{onClick:q,label:"Logout",type:"action"}]:[{href:"/login",label:"Login",type:"link"}]];return a.jsxs(a.Fragment,{children:[a.jsxs("nav",{className:x("sticky top-0 left-0 right-0 z-40 flex h-14 sm:h-16 items-center px-3 sm:px-4 border-b backdrop-blur-sm transition-all duration-300",z?"bg-background/95 border-border shadow-sm":"bg-background/95 border-border","text-foreground"),children:[a.jsx("div",{className:"flex items-center flex-shrink-0",children:a.jsxs("a",{href:"/",className:"flex items-center space-x-1 sm:space-x-2",children:[a.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10",children:a.jsx(b,{})}),a.jsx("span",{className:"font-serif text-sm sm:text-lg font-semibold block nav-parisienne",children:"Amma's Heartmade Magic"})]})}),a.jsx("div",{className:"hidden xl:flex items-center space-x-1 ml-8",children:R.map(e=>"link"===e.type?a.jsx("a",{href:e.href,className:"px-3 py-2 text-sm font-medium rounded-md transition-colors text-muted-foreground hover:text-foreground hover:bg-accent focus-ring",children:e.label},e.label):a.jsx("span",{className:"px-3 py-2 text-sm font-medium rounded-md transition-colors text-muted-foreground hover:text-foreground hover:bg-accent cursor-pointer",onClick:e.onClick,children:e.label},e.label))}),a.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2 ml-auto",children:[a.jsx(u,{variant:"ghost",size:"icon",className:"relative h-9 w-9 sm:h-10 sm:w-10",asChild:!0,children:a.jsxs("a",{href:"/checkout",className:"relative",children:[a.jsx(l,{className:"h-4 w-4 sm:h-5 sm:w-5"}),A>0&&a.jsx("span",{className:"absolute -top-0 -right-0 bg-primary text-primary-foreground text-[10px] sm:text-xs rounded-full h-4 w-4 sm:h-5 sm:w-5 flex items-center justify-center font-medium",children:A>99?"99+":A})]})}),H?a.jsxs(k,{children:[a.jsx(w,{asChild:!0,children:a.jsx(u,{variant:"ghost",size:"icon",className:"h-9 w-9 sm:h-10 sm:w-10 rounded-full hidden md:flex",children:a.jsx(t,{className:"h-4 w-4 sm:h-5 sm:w-5"})})}),a.jsxs(y,{align:"end",className:"w-56",children:[a.jsxs(v,{onClick:B,children:[a.jsx(t,{className:"mr-2 h-4 w-4"}),"Profile"]}),a.jsx(v,{onClick:()=>O("/order-tracking"),children:"Orders"}),a.jsx(v,{onClick:()=>O("/addresses"),children:"Addresses"}),P&&a.jsxs(a.Fragment,{children:[a.jsx(N,{}),a.jsx(v,{onClick:()=>O("/admin"),children:"Admin Dashboard"}),a.jsx(v,{onClick:()=>O("/inventory"),children:"Inventory"})]}),a.jsx(N,{}),a.jsx(v,{onClick:q,className:"text-primary",children:"Logout"})]})]}):a.jsxs(u,{variant:"ghost",size:"sm",onClick:()=>O("/login"),className:"h-9 sm:h-10 px-3 hidden md:flex",children:[a.jsx(t,{className:"h-4 w-4 sm:mr-2"}),a.jsx("span",{className:"hidden sm:hidden",children:"Login"})]}),a.jsxs(k,{children:[a.jsx(w,{asChild:!0,children:a.jsxs(u,{variant:"ghost",size:"icon",className:"h-9 w-9 sm:h-10 sm:w-10",children:["light"===F&&a.jsx(n,{className:"h-4 w-4"}),"dark"===F&&a.jsx(o,{className:"h-4 w-4"}),"system"===F&&a.jsx(i,{className:"h-4 w-4"})]})}),a.jsxs(y,{align:"end",children:[a.jsxs(v,{onClick:()=>U("light"),children:[a.jsx(n,{className:"mr-2 h-4 w-4"}),"Light"]}),a.jsxs(v,{onClick:()=>U("dark"),children:[a.jsx(o,{className:"mr-2 h-4 w-4"}),"Dark"]}),a.jsxs(v,{onClick:()=>U("system"),children:[a.jsx(i,{className:"mr-2 h-4 w-4"}),"System"]})]})]}),a.jsx(u,{variant:"ghost",size:"icon",className:"xl:hidden h-9 w-9 sm:h-10 sm:w-10",onClick:()=>{L(e=>!e)},children:S?a.jsx(c,{className:"h-5 w-5"}):a.jsx(d,{className:"h-5 w-5"})})]})]}),!S&&a.jsx("div",{className:x("fixed top-12 left-0 right-0 z-30 xl:hidden","bg-background border-b border-border","shadow-lg transition-all duration-200"),children:a.jsxs("div",{className:"px-4 py-6 space-y-1",children:[[...R,...J].map(e=>a.jsx("div",{children:"link"===e.type?a.jsx("a",{href:e.href,className:"block px-3 py-2 text-base font-medium text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors",onClick:()=>L(!0),children:e.label}):a.jsx("span",{className:"block px-3 py-2 text-base font-medium text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors cursor-pointer",onClick:s=>{e.onClick?.(s),L(!0)},children:e.label})},e.label)),a.jsx("div",{className:"pt-4 border-t border-border",children:a.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[a.jsxs(u,{variant:"light"===F?"default":"outline",size:"sm",onClick:()=>U("light"),children:[a.jsx(n,{className:"h-4 w-4 mr-2"}),"Light"]}),a.jsxs(u,{variant:"dark"===F?"default":"outline",size:"sm",onClick:()=>U("dark"),children:[a.jsx(o,{className:"h-4 w-4 mr-2"}),"Dark"]}),a.jsxs(u,{variant:"system"===F?"default":"outline",size:"sm",onClick:()=>U("system"),children:[a.jsx(i,{className:"h-4 w-4 mr-2"}),"System"]})]})})]})})]})};export{S as N};
