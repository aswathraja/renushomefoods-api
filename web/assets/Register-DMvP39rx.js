import{r as e,j as s,aH as t,aI as a,aA as r,X as l,L as n}from"./vendor-react-Tc4xLtOv.js";import{L as m,C as d}from"./dropdown-menu-Dweh6OYL.js";import{T as i}from"./TopNav-BXcsdcnw.js";import{e as o,A as c,c as x,B as u}from"./index-CCl3TzR2.js";import{I as h}from"./input-F4kRSedd.js";import{L as p}from"./label-DxpSIJ1C.js";import{T as j}from"./textarea-LiP7jPED.js";import"./vendor-charts-DKw1ZHYY.js";import"./vendor-ui-utils-B4kPJlQS.js";import"./vendor-radix-O0RUyoIw.js";import"./NavBar-CdfgxkT6.js";import"./TopBar-DKySbC2h.js";import"./vendor-pdf-export-C4gp01y5.js";import"./vendor-animation-BGrdDg6I.js";const f=[{label:"At least 8 characters",test:e=>e.length>=8},{label:"One uppercase letter",test:e=>/[A-Z]/.test(e)},{label:"One lowercase letter",test:e=>/[a-z]/.test(e)},{label:"One digit",test:e=>/\d/.test(e)},{label:"One special character",test:e=>/[@$!%*?&()[\]{}#^~<>+=_|\\/.,:;"'-]/.test(e)}],g=()=>{const[g,N]=e.useState({name:"",username:"",email:"",phone:"",password:"",address:"",city:"",state:"",country:"",pincode:""}),[b,v]=e.useState({}),[y,w]=e.useState(!1),[C,X]=e.useState(!1),[F,S]=e.useState(!1),[A,P]=e.useState(f.map(()=>!1)),[E,I]=e.useState(!1),[T,D]=e.useState(!1),[O,k]=e.useState(!1);e.useEffect(()=>{const e=setTimeout(()=>{B(g)},300);return()=>clearTimeout(e)},[g.username,g.email,g.phone]);const q=e=>{const{name:s,value:t}=e.target;if("phone"===s){let e=t.replace(/[^+\d\s]/g,"");if(e.startsWith("+")){if(!e.match(/^(\+\d{0,2})(\s?\d{0,10})$/))return}else e=e.replace(/\D/g,"").slice(0,10);return N(t=>({...t,[s]:e})),void $(s,e)}if("pincode"===s){const e=t.replace(/\D/g,"").slice(0,6);return N(t=>({...t,[s]:e})),void $(s,e)}if(N(e=>({...e,[s]:t})),$(s,t),"password"===s){!T&&t&&D(!0);const e=f.map(e=>e.test(t));P(e)}},B=async e=>{if(e.username||e.email||e.phone)try{X(!0);const s={request:o({username:e.username,email:e.email,phone:e.phone})};c.postData({endpoint:"/user/validate-details",body:s,successCallback:e=>{},errorCallback:e=>{v(s=>({...s,username:e.username||s.username,email:e.email||s.email,phone:e.phone||s.phone}))}}),X(!1)}catch(s){X(!1),s?.response?.data?.error&&x.error(s.response.data.error)}},$=(e,s)=>{let t="";if(s.trim()){if("email"===e&&(/^[\w-.]+@([\w-]+\.)+[\w-]{2,4}$/.test(s)||(t="Invalid email format")),"phone"===e){/^(\+?\d{2}\s?\d{10}|\+?\d{12}|\d{10})$/.test(s)||(t="Phone Number should be in +XX XXXXXXXXXX or XXXXXXXXXX format")}if("password"===e){f.every(e=>e.test(s))||(t="Password does not meet all requirements")}"pincode"===e&&(/^\d{6}$/.test(s)||(t="Pincode must be exactly 6 digits"))}else t="This field is required";v(s=>({...s,[e]:t}))};e.useEffect(()=>{const e=Object.values(b).some(e=>""!==e),s=Object.values(g).every(e=>""!==e.trim()),t=A.every(e=>!0===e);I(!e&&s&&t)},[b,g,A]);const z=()=>A.filter(Boolean).length;return s.jsxs("div",{className:"min-h-screen flex flex-col",children:[s.jsx(i,{}),s.jsx("div",{className:"flex-1 flex items-center justify-center px-4 py-6 sm:py-8",children:s.jsxs("div",{className:"w-full max-w-2xl",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"w-42 h-42 sm:w-42 sm:h-42 mx-auto mb-4 bg-primary/10 rounded-full flex items-center justify-center",children:s.jsx(m,{size:"xxl"})}),s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-foreground mb-2",children:"Create Your Account"}),s.jsx("p",{className:"text-sm sm:text-base text-muted-foreground",children:"Join us today and start your healthy journey"})]}),s.jsxs("div",{className:"bg-card rounded-xl shadow-sm border border-border p-4 sm:p-6 lg:p-8",children:[s.jsxs("form",{onSubmit:async e=>{e.preventDefault(),E&&(w(!0),c.postData({endpoint:"/user/register",body:{request:o(g)},successCallback:e=>{w(!1),"ok"===e.status?(x.success(s.jsxs("span",{children:["Registration successful! Please continue to ",s.jsx("a",{href:"/login",className:"text-primary",style:{textDecoration:"underline"},children:"login"})," "]}),{duration:5e3}),setTimeout(()=>window.location.href="/login",2500)):x.error(e?.error||"Registration failed")},errorCallback:()=>{w(!1),x.error("Registration failed")}}))},children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("h3",{className:"text-lg font-semibold text-foreground mb-4 flex items-center gap-2",children:[s.jsx("span",{className:"w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center text-primary text-sm font-bold",children:"1"}),"Personal Information"]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(p,{htmlFor:"name",className:"text-sm font-medium text-foreground",children:"Full Name *"}),s.jsx(h,{type:"text",id:"name",name:"name",value:g.name,onChange:q,placeholder:"Enter your full name",className:"h-11 sm:h-12 text-sm sm:text-base "+(b.name?"border-destructive":"")}),b.name&&s.jsx("p",{className:"text-destructive text-xs sm:text-sm",children:b.name})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(p,{htmlFor:"username",className:"text-sm font-medium text-foreground",children:"Username *"}),s.jsx(h,{type:"text",id:"username",name:"username",value:g.username,onChange:q,placeholder:"Choose a username",className:"h-11 sm:h-12 text-sm sm:text-base "+(b.username?"border-destructive":"")}),b.username&&s.jsx("p",{className:"text-destructive text-xs sm:text-sm",children:b.username})]})]})]}),s.jsxs("div",{className:"mb-8",children:[s.jsxs("h3",{className:"text-lg font-semibold text-foreground mb-4 flex items-center gap-2",children:[s.jsx("span",{className:"w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center text-primary text-sm font-bold",children:"2"}),"Contact Information"]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(p,{htmlFor:"email",className:"text-sm font-medium text-foreground",children:"Email Address *"}),s.jsx(h,{type:"email",id:"email",name:"email",value:g.email,onChange:q,placeholder:"Enter your email",className:"h-11 sm:h-12 text-sm sm:text-base "+(b.email?"border-destructive":"")}),b.email&&s.jsx("p",{className:"text-destructive text-xs sm:text-sm",children:b.email})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(p,{htmlFor:"phone",className:"text-sm font-medium text-foreground",children:"Phone Number *"}),s.jsx(h,{type:"text",inputMode:"tel",id:"phone",name:"phone",value:g.phone,onChange:q,placeholder:"10-digit phone number",className:"h-11 sm:h-12 text-sm sm:text-base "+(b.phone?"border-destructive":"")}),b.phone&&s.jsx("p",{className:"text-destructive text-xs sm:text-sm",children:b.phone})]})]})]}),s.jsxs("div",{className:"mb-8",children:[s.jsxs("h3",{className:"text-lg font-semibold text-foreground mb-4 flex items-center gap-2",children:[s.jsx("span",{className:"w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center text-primary text-sm font-bold",children:"3"}),"Security"]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(p,{htmlFor:"password",className:"text-sm font-medium text-foreground",children:"Password *"}),s.jsxs("div",{className:"relative",children:[s.jsx(h,{type:F?"text":"password",id:"password",name:"password",value:g.password,onChange:q,onFocus:()=>k(!0),onBlur:()=>k(!1),placeholder:"Create a strong password",className:"h-11 sm:h-12 text-sm sm:text-base pr-10 "+(b.password?"border-destructive":"")}),s.jsx(u,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 hover:bg-transparent",onClick:()=>S(e=>!e),tabIndex:-1,children:F?s.jsx(t,{className:"h-4 w-4"}):s.jsx(a,{className:"h-4 w-4"})})]}),b.password&&s.jsx("p",{className:"text-destructive text-xs sm:text-sm",children:b.password}),(O||T)&&s.jsxs("div",{className:"mt-3 space-y-3",children:[T&&s.jsxs("div",{children:[s.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:s.jsx("div",{className:"h-2 rounded-full transition-all duration-300 "+(z()<=2?"bg-destructive":z()<=4?"bg-yellow-500":"bg-green-500"),style:{width:z()/f.length*100+"%"}})}),s.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Password strength: ",z(),"/",f.length]})]}),O&&s.jsxs("div",{className:"bg-muted/30 rounded-lg p-3",children:[s.jsx("p",{className:"text-xs font-medium text-foreground mb-2",children:"Password requirements:"}),s.jsx("ul",{className:"space-y-1",children:f.map((e,t)=>s.jsxs("li",{className:"text-xs flex items-center gap-2 "+(A[t]?"text-green-600":"text-muted-foreground"),children:[A[t]?s.jsx(r,{className:"h-3 w-3"}):s.jsx(l,{className:"h-3 w-3"}),e.label]},e.label))})]})]})]})]}),s.jsxs("div",{className:"mb-8",children:[s.jsxs("h3",{className:"text-lg font-semibold text-foreground mb-4 flex items-center gap-2",children:[s.jsx("span",{className:"w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center text-primary text-sm font-bold",children:"4"}),"Address Information"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(p,{htmlFor:"address",className:"text-sm font-medium text-foreground",children:"Address *"}),s.jsx(j,{id:"address",name:"address",value:g.address,onChange:q,placeholder:"Enter your complete address",rows:3,className:"text-sm sm:text-base resize-none "+(b.address?"border-destructive":"")}),b.address&&s.jsx("p",{className:"text-destructive text-xs sm:text-sm",children:b.address})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(p,{htmlFor:"city",className:"text-sm font-medium text-foreground",children:"City *"}),s.jsx(h,{type:"text",id:"city",name:"city",value:g.city,onChange:q,placeholder:"Enter city",className:"h-11 sm:h-12 text-sm sm:text-base "+(b.city?"border-destructive":"")}),b.city&&s.jsx("p",{className:"text-destructive text-xs sm:text-sm",children:b.city})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(p,{htmlFor:"state",className:"text-sm font-medium text-foreground",children:"State *"}),s.jsx(h,{type:"text",id:"state",name:"state",value:g.state,onChange:q,placeholder:"Enter state",className:"h-11 sm:h-12 text-sm sm:text-base "+(b.state?"border-destructive":"")}),b.state&&s.jsx("p",{className:"text-destructive text-xs sm:text-sm",children:b.state})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(p,{htmlFor:"country",className:"text-sm font-medium text-foreground",children:"Country *"}),s.jsx(h,{type:"text",id:"country",name:"country",value:g.country,onChange:q,placeholder:"Enter country",className:"h-11 sm:h-12 text-sm sm:text-base "+(b.country?"border-destructive":"")}),b.country&&s.jsx("p",{className:"text-destructive text-xs sm:text-sm",children:b.country})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(p,{htmlFor:"pincode",className:"text-sm font-medium text-foreground",children:"Pincode *"}),s.jsx(h,{type:"text",inputMode:"numeric",pattern:"\\d{6}",id:"pincode",name:"pincode",value:g.pincode,onChange:q,placeholder:"6-digit pincode",className:"h-11 sm:h-12 text-sm sm:text-base "+(b.pincode?"border-destructive":"")}),b.pincode&&s.jsx("p",{className:"text-destructive text-xs sm:text-sm",children:b.pincode})]})]})]})]}),s.jsx(u,{type:"submit",className:"w-full h-11 sm:h-12 text-sm sm:text-base font-medium",disabled:y||C||!E,children:y?s.jsxs(s.Fragment,{children:[s.jsx(n,{className:"w-4 h-4 mr-2 animate-spin"}),"Creating Account..."]}):C?"Validating Details...":"Create Account"})]}),s.jsx("div",{className:"mt-6 pt-6 border-t border-border",children:s.jsxs("p",{className:"text-center text-sm text-muted-foreground",children:["Already have an account?"," ",s.jsx("a",{href:"/login",className:"text-primary hover:underline font-medium",children:"Sign in"})]})})]})]})}),s.jsx("footer",{className:"mt-auto",children:s.jsx(d,{})})]})};export{g as default};
