import{r as n,R as N,j as e,B as d}from"./index-DbPu8K_2.js";import{D as y,a as E,b as D,c as z,d as R}from"./dialog-CLav4IZ4.js";import{X as L,g as O}from"./dropdown-menu-ndXhbIqo.js";import{C as T}from"./chevron-left-BlR7maOI.js";const P=({title:g,imageSrcs:o,imageSrc:u,children:m,open:x,onOpenChange:j})=>{const[k,v]=n.useState(!1),[r,c]=n.useState(0),l=x!==void 0?x:k,i=j||v,t=N.useMemo(()=>o&&o.length>0?o:u?[u]:[],[o,u]);n.useEffect(()=>{l&&c(0)},[l]),n.useEffect(()=>{if(!l)return;const s=a=>{a.key==="ArrowLeft"?b():a.key==="ArrowRight"?f():a.key==="Escape"&&i(!1)};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[l,t.length]);const b=n.useCallback(()=>{c(s=>s===0?t.length-1:s-1)},[t.length]),f=n.useCallback(()=>{c(s=>s===t.length-1?0:s+1)},[t.length]),w=n.useCallback(s=>{c(s)},[]),p=()=>{i(!1)},h=t.length>1,C=s=>{const a=s.target;a.src="/static/logo.webp"};return t.length===0?null:e.jsxs(e.Fragment,{children:[m&&e.jsx("div",{onClick:()=>i(!0),className:"cursor-pointer",children:m}),e.jsx(y,{open:l,onOpenChange:i,children:e.jsxs(E,{className:"sm:max-w-2xl max-h-[90vh] p-0 overflow-hidden",children:[e.jsx("button",{onClick:p,className:"absolute right-4 top-4 z-10 rounded-full bg-background/80 p-1 hover:bg-background/100 transition-colors",children:e.jsx(L,{className:"h-4 w-4"})}),e.jsx(D,{className:"px-6 pt-6 pb-2",children:e.jsx(z,{className:"pr-8",children:g})}),e.jsxs("div",{className:"relative w-full h-[60vh] max-h-[60vh] bg-muted/30",children:[e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("img",{src:t[r],alt:`${g} - ${r+1} of ${t.length}`,className:"max-w-full max-h-full object-contain",onError:C})}),h&&e.jsxs(e.Fragment,{children:[e.jsx(d,{variant:"outline",size:"sm",className:"absolute left-2 top-1/2 -translate-y-1/2 w-10 h-10 p-0 rounded-full bg-background/80 backdrop-blur-sm hover:bg-background/100 z-10",onClick:b,children:e.jsx(T,{className:"w-5 h-5"})}),e.jsx(d,{variant:"outline",size:"sm",className:"absolute right-2 top-1/2 -translate-y-1/2 w-10 h-10 p-0 rounded-full bg-background/80 backdrop-blur-sm hover:bg-background/100 z-10",onClick:f,children:e.jsx(O,{className:"w-5 h-5"})})]}),h&&e.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 flex space-x-2 z-10",children:t.map((s,a)=>e.jsx("button",{className:`w-2.5 h-2.5 rounded-full transition-all ${a===r?"bg-primary scale-110":"bg-background/60 hover:bg-background/80"}`,onClick:()=>w(a)},a))})]}),h&&e.jsxs("div",{className:"text-center text-sm text-muted-foreground pb-2",children:[r+1," / ",t.length]}),e.jsx(R,{className:"px-6 pb-6",children:e.jsx(d,{variant:"outline",onClick:p,children:"Close"})})]})})]})};export{P};
