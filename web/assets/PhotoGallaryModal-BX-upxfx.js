import{i as E,r as s,j as e,R as q,B as D}from"./index-DgNSKDh3.js";import{D as O,a as B,b as K,c as U,d as W}from"./dialog-Ce9KKzix.js";import{X,h as G}from"./dropdown-menu-dMPhb90y.js";import{C as J}from"./chevron-left-CXaYsBLf.js";const Q=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],Y=E("maximize",Q);const Z=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],ee=E("pause",Z);const te=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],S=E("play",te);const ne=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],se=E("volume-2",ne);const re=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],ae=E("volume-x",re),oe=({src:L,poster:p,className:j=""})=>{const n=s.useRef(null),b=s.useRef(null),[c,v]=s.useState(!1),[g,d]=s.useState(0),[u,h]=s.useState(0),[m,o]=s.useState(1),[x,w]=s.useState(!1),[N,C]=s.useState(!1),[z,k]=s.useState(!0),[y,M]=s.useState(!0),r=s.useRef(),l=t=>{const a=Math.floor(t/60),i=Math.floor(t%60);return`${a}:${i.toString().padStart(2,"0")}`},f=s.useCallback(()=>{n.current&&(c?n.current.pause():n.current.play(),v(!c))},[c]),V=t=>{const a=parseFloat(t.target.value);o(a),n.current&&(n.current.volume=a,w(a===0))},$=()=>{n.current&&(n.current.muted=!x,w(!x))},H=t=>{const a=parseFloat(t.target.value);d(a),n.current&&(n.current.currentTime=a)},P=()=>{b.current&&(N?document.exitFullscreen?.():b.current.requestFullscreen?.(),C(!N))};s.useEffect(()=>{const t=n.current;if(!t)return;const a=()=>d(t.currentTime),i=()=>h(t.duration),R=()=>v(!0),A=()=>v(!1),F=()=>M(!0),_=()=>M(!1),I=()=>v(!1);return t.addEventListener("timeupdate",a),t.addEventListener("durationchange",i),t.addEventListener("play",R),t.addEventListener("pause",A),t.addEventListener("waiting",F),t.addEventListener("canplay",_),t.addEventListener("ended",I),()=>{t.removeEventListener("timeupdate",a),t.removeEventListener("durationchange",i),t.removeEventListener("play",R),t.removeEventListener("pause",A),t.removeEventListener("waiting",F),t.removeEventListener("canplay",_),t.removeEventListener("ended",I)}},[]),s.useEffect(()=>{const t=()=>{C(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",t),()=>{document.removeEventListener("fullscreenchange",t)}},[]);const T=s.useCallback(()=>{k(!0),r.current&&clearTimeout(r.current),c&&(r.current=setTimeout(()=>{k(!1)},3e3))},[c]);return s.useEffect(()=>(T(),()=>{r.current&&clearTimeout(r.current)}),[c,T]),s.useEffect(()=>{const t=a=>{if(!(a.target instanceof HTMLInputElement))switch(a.key){case" ":case"k":a.preventDefault(),f();break;case"m":$();break;case"f":P();break;case"ArrowLeft":a.preventDefault(),n.current&&(n.current.currentTime=Math.max(0,n.current.currentTime-10));break;case"ArrowRight":a.preventDefault(),n.current&&(n.current.currentTime=Math.min(u,n.current.currentTime+10));break;case"ArrowUp":if(a.preventDefault(),n.current){const i=Math.min(1,m+.1);o(i),n.current.volume=i,w(i===0)}break;case"ArrowDown":if(a.preventDefault(),n.current){const i=Math.max(0,m-.1);o(i),n.current.volume=i,w(i===0)}break}};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[f,u,m]),e.jsxs("div",{ref:b,className:`relative group bg-black rounded-lg overflow-hidden ${j}`,onMouseMove:T,onMouseLeave:()=>c&&k(!1),children:[e.jsx("video",{ref:n,src:L,poster:p,className:"w-full h-full object-contain relative z-0",onClick:f,playsInline:!0}),y&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50 z-20",children:e.jsx("div",{className:"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin"})}),!c&&!y&&e.jsx("button",{onClick:f,className:"absolute inset-0 flex items-center justify-center bg-black/30 hover:bg-black/40 transition-colors z-10",children:e.jsx("div",{className:"w-16 h-16 rounded-full bg-primary/90 flex items-center justify-center hover:bg-primary transition-colors z-20",children:e.jsx(S,{className:"w-8 h-8 text-primary-foreground fill-primary-foreground ml-1"})})}),e.jsxs("div",{className:`absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/90 to-transparent px-4 py-3 transition-opacity duration-300 z-30 ${z?"opacity-100":"opacity-0"}`,children:[e.jsx("div",{className:"relative mb-3",children:e.jsx("input",{type:"range",min:0,max:u||100,value:g,onChange:H,className:"w-full h-1 z-[100] bg-white/30 rounded-full appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-primary [&::-webkit-slider-thumb]:cursor-pointer [&::-webkit-slider-thumb]:transition-transform [&::-webkit-slider-thumb]:hover:scale-125",style:{background:`linear-gradient(to right, hsl(var(--primary)) ${g/u*100}%, rgba(255,255,255,0.3) ${g/u*100}%)`}})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:f,className:"text-white hover:text-primary transition-colors",children:c?e.jsx(ee,{className:"w-6 h-6"}):e.jsx(S,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:$,className:"text-white hover:text-primary transition-colors",children:x||m===0?e.jsx(ae,{className:"w-5 h-5"}):e.jsx(se,{className:"w-5 h-5"})}),e.jsx("input",{type:"range",min:0,max:1,step:.1,value:x?0:m,onChange:V,className:"w-20 h-1 bg-white/30 rounded-full appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-primary [&::-webkit-slider-thumb]:cursor-pointer"})]}),e.jsxs("span",{className:"text-white text-sm",children:[l(g)," / ",l(u)]})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("button",{onClick:P,className:"text-white hover:text-primary transition-colors",children:e.jsx(Y,{className:"w-5 h-5"})})})]})]})]})},de=({title:L,imageSrcs:p,imageSrc:j,children:n,open:b,onOpenChange:c})=>{const[v,g]=s.useState(!1),[d,u]=s.useState(0),h=b!==void 0?b:v,m=c||g,o=q.useMemo(()=>p&&p.length>0?p:j?[j]:[],[p,j]),x=r=>[".mp4",".mov",".avi",".webm",".mkv",".m4v"].some(f=>r.toLowerCase().endsWith(f)),w=o[d]&&x(o[d])?"video":"image";s.useEffect(()=>{h&&u(0)},[h]),s.useEffect(()=>{if(!h)return;const r=l=>{l.key==="ArrowLeft"?N():l.key==="ArrowRight"?C():l.key==="Escape"&&m(!1)};return window.addEventListener("keydown",r),()=>window.removeEventListener("keydown",r)},[h,o.length]);const N=s.useCallback(()=>{u(r=>r===0?o.length-1:r-1)},[o.length]),C=s.useCallback(()=>{u(r=>r===o.length-1?0:r+1)},[o.length]),z=s.useCallback(r=>{u(r)},[]),k=()=>{m(!1)},y=o.length>1,M=r=>{const l=r.target;l.src="/static/logo.webp"};return o.length===0?null:e.jsxs(e.Fragment,{children:[n&&e.jsx("div",{onClick:()=>m(!0),className:"cursor-pointer",children:n}),e.jsx(O,{open:h,onOpenChange:m,children:e.jsxs(B,{className:"sm:max-w-2xl max-h-[90vh] p-0 overflow-hidden z-[100]",children:[e.jsx("button",{onClick:k,className:"absolute right-4 top-4 z-50 rounded-full bg-background/80 p-1 hover:bg-background/100 transition-colors",children:e.jsx(X,{className:"h-4 w-4"})}),e.jsx(K,{className:"px-6 pt-6 pb-2 z-10 relative",children:e.jsx(U,{className:"pr-8",children:L})}),e.jsxs("div",{className:"relative w-full h-[60vh] max-h-[60vh] bg-muted/30",children:[e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:w==="video"?e.jsx(oe,{src:o[d],className:"w-full h-full z-10 relative"}):e.jsx("img",{src:o[d],alt:`${L} - ${d+1} of ${o.length}`,className:"max-w-full max-h-full object-contain z-10 relative",onError:M})}),y&&e.jsxs(e.Fragment,{children:[e.jsx(D,{variant:"outline",size:"sm",className:"absolute left-2 top-1/2 -translate-y-1/2 w-10 h-10 p-0 rounded-full bg-background/80 backdrop-blur-sm hover:bg-background/100 z-20",onClick:N,children:e.jsx(J,{className:"w-5 h-5"})}),e.jsx(D,{variant:"outline",size:"sm",className:"absolute right-2 top-1/2 -translate-y-1/2 w-10 h-10 p-0 rounded-full bg-background/80 backdrop-blur-sm hover:bg-background/100 z-20",onClick:C,children:e.jsx(G,{className:"w-5 h-5"})})]}),y&&e.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 flex space-x-2 z-20",children:o.map((r,l)=>e.jsx("button",{className:`w-2.5 h-2.5 rounded-full transition-all ${l===d?"bg-primary scale-110":"bg-background/60 hover:bg-background/80"}`,onClick:()=>z(l)},l))})]}),y&&e.jsxs("div",{className:"text-center text-sm text-muted-foreground pb-2 z-10 relative",children:[d+1," / ",o.length]}),e.jsx(W,{className:"px-6 pb-6 z-10 relative",children:e.jsx(D,{variant:"outline",onClick:k,children:"Close"})})]})})]})};export{de as P,S as a};
