import{r as l,j as e,q as p,d as as}from"./vendor-react-Bk0qDDMD.js";import{A as ls}from"./AdminNavBar-CfrK-OPK.js";import{C as rs}from"./dropdown-menu-Dae-Y6FG.js";import{u as is,a as ns,B as o,b as ke,A as z,e as G,c as U}from"./index-Bzbs1pXN.js";import{B as ce}from"./badge-BCB6vZm7.js";import{C as Pe}from"./calendar-BHXoJ3A4.js";import{C as de,c as me,a as os,b as cs}from"./card-CEH0XzyS.js";import{C as W}from"./checkbox-DDBAuxbx.js";import{D as ds,a as ms,b as hs,c as xs,d as us}from"./dialog-CLX5gY7u.js";import{I as k}from"./input-Cpcu6Bjn.js";import{L as r}from"./label-COuHthBN.js";import{P,a as F,b as D}from"./popover-BbjHyeoe.js";import{S as Fe}from"./switch-DKrHyWEZ.js";import{T as ps}from"./textarea-Ds-7KeaI.js";import{P as De}from"./PhotoGallaryModal-DPLTyZGG.js";import{T as fs,a as js,b as he,c as x,d as gs,e as d}from"./table-D3hkCJyW.js";import{P as vs,F as Ns,i as Me,C as Te,U as ws,j as $e,X as ys,d as bs,T as Cs,k as J,l as Ae}from"./vendor-icons-FTV6Dp_q.js";import"./vendor-base-ui-BXIcfa4M.js";import"./TopBar-CaoAhFRU.js";import"./vendor-motion-DKNEqpS6.js";import"./vendor-radix-B6Rg7jVq.js";import"./vendor-pdf-CtkwMsdI.js";import"./vendor-charts-DTq7uDuz.js";const Ys=()=>{const{effectiveTheme:Ss}=is(),{user:xe}=ns(),[Ee,ue]=l.useState([]),[Le,X]=l.useState(!1),[Ie,M]=l.useState(!1),[w,pe]=l.useState(!1),[fe,je]=l.useState(null),[Be,y]=l.useState(!1),[K,T]=l.useState(null),[ge,Ve]=l.useState(!1),[$,Oe]=l.useState(""),[A,qe]=l.useState(""),[u,E]=l.useState("All"),[L,He]=l.useState(!0),[i,ze]=l.useState({}),[n,I]=l.useState([]),[Q,Y]=l.useState(""),[B,Z]=l.useState(""),[f,V]=l.useState(0),[_,ee]=l.useState(!1),[O,se]=l.useState(""),[ve,te]=l.useState(""),[j,ae]=l.useState(void 0),[Ge,le]=l.useState(!1),[Ne,b]=l.useState(null),[g,v]=l.useState(null),[Rs,Ue]=l.useState([]),[m,N]=l.useState([]),[C,we]=l.useState([]),[ye,re]=l.useState(!1),[h,S]=l.useState({}),q=l.useRef(null),ie=()=>{X(!0);const s=localStorage.getItem("token");if(!s)return;const t={products:n.map(a=>a.id),highlight:L};$.trim()&&(t.name=$.trim()),A.trim()&&(t.location=A.trim()),u!=="All"&&(t.rating=u),i.from&&(t.fromDate=p(i.from,"yyyy-MM-dd")),i.to&&(t.toDate=p(i.to,"yyyy-MM-dd")),z.postData({endpoint:"/order/get-reviews",body:{request:G(t)},Authorization:`Bearer ${s}`,successCallback:a=>{ue(a.reviews||[]),X(!1)},errorCallback:a=>{ue([]),X(!1)}})},We=()=>{C.length>0||(re(!0),z.postData({endpoint:"/inventory/get-products",body:{request:G({})},successCallback:s=>{we(s||[]),re(!1)},errorCallback:()=>{we([]),re(!1)}}))};l.useEffect(()=>{ie(),We()},[$,A,u,L,i,n]);const be=Ee,ne=()=>{Y(""),Z(""),V(0),ee(!1),se(""),te(""),ae(void 0),le(!1),b(null),v(null),Ue([]),N([]),S({}),pe(!1),je(null)},Je=s=>{if(s.target.files&&s.target.files.length>0){const t=s.target.files[0],a=["image/jpeg","image/png","image/webp","image/gif"],c=["video/mp4","video/quicktime","video/x-msvideo","video/webm","video/x-matroska","video/x-m4v"];if(![...a,...c].includes(t.type)){S(R=>({...R,file:"Please upload a valid image (JPEG, PNG, WebP, GIF) or video (MP4, MOV, AVI, WebM)"}));return}const Re=c.includes(t.type),ts=Re?50*1024*1024:5*1024*1024;if(t.size>ts){S(R=>({...R,file:`File size must be less than ${Re?"50MB":"5MB"}`}));return}b(t),S(R=>({...R,file:""}));const oe=new FileReader;oe.onloadend=()=>{v(oe.result)},oe.readAsDataURL(t)}else b(null),v(null)},Xe=()=>{b(null),v(null),q.current&&(q.current.value="")},Ke=s=>{V(f===s?s-.5:s)},Ce=(s,t)=>{N(t?[...m,s]:m.filter(a=>a.id!==s.id))},Qe=()=>{N([])},Ye=()=>{const s={};return Q.trim()||(s.name="Name is required."),B.trim()?/^[0-9+\-\s]{7,15}$/.test(B.trim())||(s.phone="Please enter a valid phone number"):s.phone="Phone number is required.",f===0&&(s.rating="Please select a rating."),O.trim()?O.trim().length<10&&(s.review="Review must be at least 10 characters long."):s.review="Review is required.",S(s),Object.keys(s).length===0},Ze=()=>{if(!Ye())return;const s=localStorage.getItem("token");if(!s)return;const t={id:w?fe?.id:void 0,name:Q.trim(),phone:B.trim(),review:O.trim(),rating:f,highlight:_,location:ve.trim()||null,reviewDate:j?p(j,"yyyy-MM-dd"):null,userId:w?fe?.userId??xe?.id:xe?.id,products:m.map(c=>c.id)},a=new FormData;a.append("request",G(t)),Ne&&a.append("photo",Ne),z.postFormData({endpoint:"/order/save-review",body:a,Authorization:`Bearer ${s}`,successCallback:c=>{U.success(w?"Review updated successfully":"Review saved successfully"),ie(),ne(),M(!1)},errorCallback:c=>{U.error(c?.error||c?.message||"Failed to save review")}})},_e=s=>{Y(s.name),Z(s.phone),V(s.rating),ee(s.highlight||!1),se(s.review),te(s.location||""),ae(s.reviewDate?new Date(s.reviewDate):void 0),b(null),s.photo?v(`/static${s.photo}`):v(null),s.products&&s.products.length>0?N(s.products.map(t=>({id:t.id,name:t.name}))):N([]),pe(!0),je(s),M(!0)},es=()=>{if(!K)return;const s=localStorage.getItem("token");if(!s)return;const t={id:K.id};z.postData({endpoint:"/order/delete-review",body:{request:G(t)},Authorization:`Bearer ${s}`,successCallback:()=>{U.success("Review deleted successfully"),ie(),y(!1),T(null)},errorCallback:a=>{U.error(a?.error||a?.message||"Failed to delete review"),y(!1),T(null)}})},ss=()=>{y(!1),T(null)},Se=(s,t=!1)=>e.jsx("div",{className:"flex items-center gap-0.5",children:[1,2,3,4,5].map(a=>t?e.jsx("button",{type:"button",onClick:()=>Ke(a),className:"focus:outline-none transition-transform hover:scale-110",children:a<=Math.floor(s)?e.jsx(J,{className:"h-5 w-5 fill-yellow-400 text-yellow-400"}):s>=a-.5&&s<a?e.jsx(Ae,{className:"h-5 w-5 fill-yellow-400 text-yellow-400"}):e.jsx(J,{className:"h-5 w-5 fill-muted text-muted"})},a):e.jsx(as.Fragment,{children:a<=Math.floor(s)?e.jsx(J,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}):s>=a-.5&&s<a?e.jsx(Ae,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}):e.jsx(J,{className:"h-4 w-4 fill-muted text-muted"})},a))}),H=s=>[".mp4",".mov",".avi",".webm",".mkv",".m4v"].some(a=>s.toLowerCase().endsWith(a));return e.jsxs("div",{children:[e.jsx(ls,{}),e.jsxs("div",{className:"container mx-auto mt-6 p-6 min-h-screen",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Reviews"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(o,{variant:"outline",onClick:()=>{ne(),M(!0)},className:"border-green-600 text-green-600 hover:text-primary",children:[e.jsx(vs,{className:"w-4 h-4 mr-2"}),"Add"]}),e.jsxs(o,{variant:"outline",onClick:()=>Ve(!ge),className:"border-green-600 text-green-600 hover:text-primary",children:[e.jsx(Ns,{className:"w-4 h-4 mr-2"}),"Filters"]})]})]}),ge&&e.jsx(de,{className:"mb-6",children:e.jsxs(me,{className:"pt-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Name"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx(Me,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(k,{value:$,onChange:s=>Oe(s.target.value),placeholder:"Search by name",className:"pl-8"})]})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Location"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx(Me,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(k,{value:A,onChange:s=>qe(s.target.value),placeholder:"Search by location",className:"pl-8"})]})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Rating"}),e.jsxs(P,{children:[e.jsx(F,{asChild:!0,children:e.jsx(o,{variant:"outline",className:`w-full justify-start text-left font-normal mt-1 ${u==="All"&&"text-muted-foreground"}`,children:u==="All"?"All Ratings":`${u} Star`})}),e.jsx(D,{className:"w-auto p-0",align:"start",children:e.jsxs("div",{className:"p-3 space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 cursor-pointer",onClick:()=>E("All"),children:[e.jsx(W,{checked:u==="All",onCheckedChange:()=>E("All")}),e.jsx(r,{className:"cursor-pointer",children:"All Ratings"})]}),[1,2,3,4,5].map(s=>e.jsxs("div",{className:"flex items-center space-x-2 cursor-pointer",onClick:()=>E(s),children:[e.jsx(W,{checked:u===s,onCheckedChange:()=>E(s)}),e.jsxs(r,{className:"cursor-pointer flex items-center gap-1",children:[s," Star",s!==1&&"s"]})]},s))]})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-1 lg:grid-cols-3 gap-4 pt-2",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Featured"}),e.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[e.jsx(Fe,{id:"filter-featured",checked:L,onCheckedChange:s=>He(s)}),e.jsx(r,{htmlFor:"filter-featured",className:"text-sm cursor-pointer",children:L?"Featured only":"Show all"})]})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Date Range"}),e.jsxs(P,{children:[e.jsx(F,{asChild:!0,children:e.jsxs(o,{variant:"outline",className:`w-full justify-start text-left font-normal mt-1 ${!i.from&&!i.to&&"text-muted-foreground"}`,children:[e.jsx(Te,{className:"mr-2 h-4 w-4"}),i.from?i.to?e.jsxs(e.Fragment,{children:[p(i.from,"dd/MM/yyyy")," -"," ",p(i.to,"dd/MM/yyyy")]}):p(i.from,"dd/MM/yyyy"):"Select date range"]})}),e.jsx(D,{className:"w-auto p-0",align:"start",children:e.jsx(Pe,{autoFocus:!0,mode:"range",defaultMonth:i.from,selected:{from:i.from,to:i.to},onSelect:s=>ze(s||{}),numberOfMonths:2})})]})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Products"}),e.jsxs(P,{children:[e.jsx(F,{asChild:!0,children:e.jsx(o,{variant:"outline",role:"combobox","aria-expanded":!1,className:`w-full justify-start text-left font-normal mt-1 ${n.length===0&&"text-muted-foreground"}`,children:n.length>0?`${n.length} product(s) selected`:"Select products"})}),e.jsxs(D,{className:"w-full p-0",align:"start",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 border-b",children:[e.jsx("span",{className:"text-sm font-medium",children:"Filter by Products"}),n.length>0&&e.jsx("button",{type:"button",onClick:()=>I([]),className:"text-xs text-primary hover:underline",children:"Clear all"})]}),ye?e.jsx("div",{className:"p-4 text-center text-sm text-muted-foreground",children:"Loading products..."}):C.length===0?e.jsx("div",{className:"p-4 text-center text-sm text-muted-foreground",children:"No products available"}):e.jsx("div",{className:"max-h-[200px] overflow-y-auto p-3 space-y-2",children:C.map(s=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(W,{id:`filter-product-${s.id}`,checked:n.some(t=>t.id===s.id),onCheckedChange:t=>{const a=n.some(c=>c.id===s.id);t&&!a?I([...n,s]):!t&&a&&I(n.filter(c=>c.id!==s.id))}}),e.jsx(r,{htmlFor:`filter-product-${s.id}`,className:"text-sm font-normal leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer",children:s.name})]},s.id))})]})]}),n.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:n.map(s=>e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-primary/10 text-primary text-xs rounded-full",children:[s.name,e.jsx("button",{type:"button",onClick:()=>I(n.filter(t=>t.id!==s.id)),className:"hover:text-primary/70",children:"×"})]},s.id))})]})]})]})}),Ie&&e.jsxs(de,{className:"mb-6",children:[e.jsx(os,{children:e.jsx(cs,{children:w?"Edit Review":"Create Review"})}),e.jsxs(me,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsxs(r,{children:["Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(k,{value:Q,onChange:s=>Y(s.target.value),placeholder:"Enter name"}),h.name&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:h.name})]}),e.jsxs("div",{children:[e.jsxs(r,{children:["Phone ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(k,{value:B,onChange:s=>Z(s.target.value),placeholder:"Enter phone number"}),h.phone&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:h.phone})]}),e.jsxs("div",{children:[e.jsxs(r,{children:["Location ",e.jsx("span",{className:"text-muted-foreground",children:"(Optional)"})]}),e.jsx(k,{value:ve,onChange:s=>te(s.target.value),placeholder:"Enter location (e.g., Chennai, India)"})]}),e.jsxs("div",{children:[e.jsxs(r,{children:["Review Date ",e.jsx("span",{className:"text-muted-foreground",children:"(Optional)"})]}),e.jsxs(P,{open:Ge,onOpenChange:le,children:[e.jsx(F,{asChild:!0,children:e.jsxs(o,{variant:"outline",className:ke("w-full justify-start text-left font-normal mt-1",!j&&"text-muted-foreground"),children:[e.jsx(Te,{className:"mr-2 h-4 w-4"}),j?p(j,"dd/MM/yyyy"):"Select date"]})}),e.jsx(D,{className:"w-auto p-0",align:"start",children:e.jsx(Pe,{mode:"single",selected:j,onSelect:s=>{ae(s),le(!1)},autoFocus:!0})})]})]}),e.jsxs("div",{className:"flex",children:[e.jsxs("div",{children:[e.jsxs(r,{children:["Rating ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("div",{className:"py-2 pr-2",children:Se(f,!0)}),f>0&&e.jsxs("span",{className:"text-sm text-muted-foreground",children:[f," star",f!==1?"s":""]}),h.rating&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:h.rating})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Highlight Review"}),e.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[e.jsx(Fe,{id:"highlight-review",checked:_,onCheckedChange:s=>ee(s)}),e.jsx(r,{htmlFor:"highlight-review",className:"text-sm cursor-pointer",children:_?"Highlighted":"Not highlighted"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Highlighted reviews will be featured prominently"})]})]}),e.jsxs("div",{children:[e.jsxs(r,{children:["Photo/Video ",e.jsx("span",{className:"text-muted-foreground",children:"(Optional)"})]}),g?e.jsxs("div",{className:"relative",children:[e.jsx(De,{title:H(g)?"Review Video":"Review Photo",imageSrcs:[g],children:H(g)?e.jsxs("div",{className:"relative w-full h-32 rounded overflow-hidden cursor-pointer hover:opacity-80 transition-opacity group",children:[e.jsx("img",{src:g,alt:"Video Preview",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/40 group-hover:bg-black/50 transition-colors",children:e.jsx($e,{className:"h-8 w-8 text-white fill-white"})})]}):e.jsx("img",{src:g,alt:"Preview",className:"w-full h-32 object-cover rounded-lg cursor-pointer hover:opacity-80 transition-opacity"})}),e.jsx("button",{type:"button",onClick:Xe,className:"absolute top-1 right-1 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors",children:e.jsx(ys,{className:"h-3 w-3"})})]}):e.jsxs("div",{className:"border-2 border-dashed border-muted-foreground/30 rounded-lg p-4 text-center cursor-pointer hover:border-primary/50 transition-colors",onClick:()=>q.current?.click(),children:[e.jsx(ws,{className:"h-8 w-8 mx-auto mb-2 text-muted-foreground"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Click to upload a photo or video"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Images: JPEG, PNG, WebP, GIF (max 5MB) • Videos: MP4, MOV, WebM (max 50MB)"}),e.jsx("input",{ref:q,type:"file",accept:"image/jpeg,image/png,image/webp,image/gif,video/mp4,video/quicktime,video/webm,video/x-matroska,video/x-m4v",onChange:Je,className:"hidden"})]}),h.file&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:h.file})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs(r,{children:["Products ",e.jsx("span",{className:"text-muted-foreground",children:"(Optional)"})]}),e.jsxs(P,{children:[e.jsx(F,{asChild:!0,children:e.jsx(o,{type:"button",variant:"outline",className:ke("w-full justify-between text-left font-normal",m.length===0&&"text-muted-foreground"),children:m.length>0?`${m.length} product(s) selected`:"Select products"})}),e.jsxs(D,{className:"w-full p-0",align:"start",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 border-b",children:[e.jsx("span",{className:"text-sm font-medium",children:"Select Products"}),m.length>0&&e.jsx("button",{type:"button",onClick:Qe,className:"text-xs text-primary hover:underline",children:"Clear all"})]}),ye?e.jsx("div",{className:"p-4 text-center text-sm text-muted-foreground",children:"Loading products..."}):C.length===0?e.jsx("div",{className:"p-4 text-center text-sm text-muted-foreground",children:"No products available"}):e.jsx("div",{className:"max-h-[200px] overflow-y-auto p-3 space-y-2",children:C.map(s=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(W,{id:`product-${s.id}`,checked:m.some(t=>t.id===s.id),onCheckedChange:t=>{Ce(s,t)}}),e.jsx(r,{htmlFor:`product-${s.id}`,className:"text-sm font-normal leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer",children:s.name})]},s.id))})]})]}),m.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:m.map(s=>e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-primary/10 text-primary text-xs rounded-full",children:[s.name,e.jsx("button",{type:"button",onClick:()=>Ce(s,!1),className:"hover:text-primary/70",children:"×"})]},s.id))})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs(r,{children:["Review ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(ps,{rows:4,value:O,onChange:s=>se(s.target.value),placeholder:"Share your experience..."}),h.review&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:h.review})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[e.jsx(o,{variant:"outline",onClick:()=>{ne(),M(!1)},children:"Cancel"}),e.jsx(o,{onClick:Ze,children:w?"Update Review":"Save Review"})]})]})]}),e.jsx(de,{children:e.jsx(me,{className:"p-0",children:Le?e.jsx("div",{className:"p-6 text-center",children:"Loading..."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(fs,{className:"table-fixed w-full min-w-[1400px]",children:[e.jsx(js,{children:e.jsxs(he,{children:[e.jsx(x,{className:"w-[120px]",children:"Name"}),e.jsx(x,{className:"w-[120px]",children:"Phone"}),e.jsx(x,{className:"w-[200px]",children:"Location"}),e.jsx(x,{className:"w-[150px]",children:"Review Date"}),e.jsx(x,{className:"w-[140px]",children:"Rating"}),e.jsx(x,{className:"w-[130px]",children:"Highlight"}),e.jsx(x,{className:"w-[300px]",children:"Review"}),e.jsx(x,{className:"w-[80px]",children:"Photo"}),e.jsx(x,{className:"w-[300px]",children:"Products"}),e.jsx(x,{className:"w-[100px] sticky right-0 bg-background z-10",children:"Actions"})]})}),e.jsxs(gs,{children:[be.map((s,t)=>e.jsxs(he,{className:t%2===0?"bg-muted/20":"",children:[e.jsx(d,{className:"w-[120px] font-medium truncate",children:s.name}),e.jsx(d,{className:"w-[120px] truncate",children:s.phone}),e.jsx(d,{className:"w-[200px] truncate",children:s.location||"-"}),e.jsx(d,{className:"w-[150px]",children:s.reviewDate?p(new Date(s.reviewDate),"dd/MM/yyyy"):"-"}),e.jsx(d,{className:"w-[140px]",children:e.jsxs("div",{className:"flex items-center gap-1",children:[Se(s.rating),e.jsxs("span",{className:"ml-1 text-sm text-muted-foreground",children:["(",s.rating,")"]})]})}),e.jsx(d,{className:"w-[130px]",children:s.highlight?e.jsx(ce,{variant:"default",className:"bg-yellow-500 hover:bg-yellow-600",children:"★ Featured"}):e.jsx("span",{className:"text-muted-foreground text-sm",children:"-"})}),e.jsx(d,{className:"w-[300px]",children:e.jsx("div",{className:"truncate",title:s.review,children:s.review.length>80?s.review.substring(0,80)+"...":s.review})}),e.jsx(d,{className:"w-[80px]",children:s.photo?e.jsx(De,{title:H(s.photo)?"Review Video":"Review Photo",imageSrcs:[`/static${s.photo}`],children:H(s.photo)?e.jsxs("div",{className:"relative w-16 h-12 rounded overflow-hidden cursor-pointer hover:opacity-80 transition-opacity group",children:[e.jsx("img",{src:`/static${s.photo}`,alt:"Review",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/40 group-hover:bg-black/50 transition-colors",children:e.jsx($e,{className:"h-5 w-5 text-white fill-white"})})]}):e.jsx("img",{src:`/static${s.photo}`,alt:"Review",className:"w-16 h-12 object-cover rounded cursor-pointer hover:opacity-80 transition-opacity"})}):e.jsx("span",{className:"text-muted-foreground text-sm",children:"No photo"})}),e.jsx(d,{className:"w-[180px]",children:e.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.products?.slice(0,2).map(a=>e.jsx(ce,{variant:"secondary",className:"text-xs",children:a.name},a.id)),s.products?.length>2&&e.jsxs(ce,{variant:"outline",className:"text-xs",children:["+",s.products.length-2]}),(!s.products||s.products.length===0)&&e.jsx("span",{className:"text-muted-foreground text-sm",children:"-"})]})}),e.jsx(d,{className:"w-[100px] sticky right-0 bg-background z-10",children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx(o,{size:"sm",variant:"outline",title:"Edit Review",onClick:()=>_e(s),children:e.jsx(bs,{className:"w-4 h-4"})}),e.jsx(o,{size:"sm",variant:"outline",title:"Delete Review",onClick:()=>{T(s),y(!0)},children:e.jsx(Cs,{className:"w-4 h-4"})})]})})]},s.id)),be.length===0&&e.jsx(he,{children:e.jsx(d,{colSpan:11,className:"text-center",children:"No Reviews found."})})]})]})})})})]}),e.jsx(ds,{open:Be,onOpenChange:y,children:e.jsxs(ms,{children:[e.jsx(hs,{children:e.jsx(xs,{children:"Delete Review"})}),e.jsx("div",{className:"py-4",children:e.jsxs("p",{children:['Are you sure you want to delete this review by "',K?.name,'"? This action cannot be undone.']})}),e.jsxs(us,{children:[e.jsx(o,{variant:"outline",onClick:ss,children:"Cancel"}),e.jsx(o,{variant:"destructive",onClick:es,children:"Confirm Delete"})]})]})}),e.jsx(rs,{})]})};export{Ys as default};
