import{r as n,j as e,q as he,g as ke,u as ss,b as ts,A as E,e as O,c as b,B as U}from"./index-BoxPh3JM.js";import{Q as rs}from"./index-D7f3ycww.js";import{m as Pe,n as as,u as os,i as Ie,R as ns,P as re,I as is,j as pe,l as ls,k as cs,o as ds,C as ms}from"./dropdown-menu-BLfYlWZi.js";import{T as us}from"./TopNav-CntDMABt.js";import ps from"./Addresses-CwHCDCwQ.js";import{D as xs,a as hs,b as fs,c as gs,d as ys}from"./dialog-BPO4MNaU.js";import{I as $}from"./input-Dho7y00w.js";import{L as C}from"./label-uPPhbx3V.js";import{u as bs}from"./index-BAkI59ym.js";import{T as js}from"./textarea-DKVie1lc.js";import{C as vs}from"./circle-check-big-DhtwCuq8.js";import"./NavBar-DEHhcvRU.js";import"./TopBar-CX_8npq5.js";import"./badge-BH-uSzS_.js";import"./card-DTmY7R92.js";import"./input-group-DWk1A2NS.js";import"./eye-B15_NIAa.js";import"./switch-84nDv2Cu.js";import"./plus-Btgo1p-c.js";import"./square-pen-DzgK4WZe.js";import"./trash-2-BSaUFU3P.js";var fe="Radio",[Ns,Re]=Ie(fe),[Cs,Ss]=Ns(fe),De=n.forwardRef((f,j)=>{const{__scopeRadio:c,name:m,checked:u=!1,required:v,disabled:g,value:P="on",onCheck:I,form:R,...i}=f,[x,q]=n.useState(null),S=he(j,F=>q(F)),y=n.useRef(!1),_=x?R||!!x.closest("form"):!0;return e.jsxs(Cs,{scope:c,checked:u,disabled:g,children:[e.jsx(re.button,{type:"button",role:"radio","aria-checked":u,"data-state":qe(u),"data-disabled":g?"":void 0,disabled:g,value:P,...i,ref:S,onClick:pe(f.onClick,F=>{u||I?.(),_&&(y.current=F.isPropagationStopped(),y.current||F.stopPropagation())})}),_&&e.jsx(Oe,{control:x,bubbles:!y.current,name:m,value:P,checked:u,required:v,disabled:g,form:R,style:{transform:"translateX(-100%)"}})]})});De.displayName=fe;var Ae="RadioIndicator",Ee=n.forwardRef((f,j)=>{const{__scopeRadio:c,forceMount:m,...u}=f,v=Ss(Ae,c);return e.jsx(ls,{present:m||v.checked,children:e.jsx(re.span,{"data-state":qe(v.checked),"data-disabled":v.disabled?"":void 0,...u,ref:j})})});Ee.displayName=Ae;var ws="RadioBubbleInput",Oe=n.forwardRef(({__scopeRadio:f,control:j,checked:c,bubbles:m=!0,...u},v)=>{const g=n.useRef(null),P=he(g,v),I=bs(c),R=cs(j);return n.useEffect(()=>{const i=g.current;if(!i)return;const x=window.HTMLInputElement.prototype,S=Object.getOwnPropertyDescriptor(x,"checked").set;if(I!==c&&S){const y=new Event("click",{bubbles:m});S.call(i,c),i.dispatchEvent(y)}},[I,c,m]),e.jsx(re.input,{type:"radio","aria-hidden":!0,defaultChecked:c,...u,tabIndex:-1,ref:P,style:{...u.style,...R,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Oe.displayName=ws;function qe(f){return f?"checked":"unchecked"}var ks=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],ae="RadioGroup",[Ps]=Ie(ae,[Pe,Re]),Fe=Pe(),Te=Re(),[Is,Rs]=Ps(ae),Le=n.forwardRef((f,j)=>{const{__scopeRadioGroup:c,name:m,defaultValue:u,value:v,required:g=!1,disabled:P=!1,orientation:I,dir:R,loop:i=!0,onValueChange:x,...q}=f,S=Fe(c),y=as(R),[_,F]=os({prop:v,defaultProp:u??null,onChange:x,caller:ae});return e.jsx(Is,{scope:c,name:m,required:g,disabled:P,value:_,onValueChange:F,children:e.jsx(ns,{asChild:!0,...S,orientation:I,dir:y,loop:i,children:e.jsx(re.div,{role:"radiogroup","aria-required":g,"aria-orientation":I,"data-disabled":P?"":void 0,dir:y,...q,ref:j})})})});Le.displayName=ae;var Be="RadioGroupItem",$e=n.forwardRef((f,j)=>{const{__scopeRadioGroup:c,disabled:m,...u}=f,v=Rs(Be,c),g=v.disabled||m,P=Fe(c),I=Te(c),R=n.useRef(null),i=he(j,R),x=v.value===u.value,q=n.useRef(!1);return n.useEffect(()=>{const S=_=>{ks.includes(_.key)&&(q.current=!0)},y=()=>q.current=!1;return document.addEventListener("keydown",S),document.addEventListener("keyup",y),()=>{document.removeEventListener("keydown",S),document.removeEventListener("keyup",y)}},[]),e.jsx(is,{asChild:!0,...P,focusable:!g,active:x,children:e.jsx(De,{disabled:g,required:v.required,checked:x,...I,...u,name:v.name,ref:i,onCheck:()=>v.onValueChange(u.value),onKeyDown:pe(S=>{S.key==="Enter"&&S.preventDefault()}),onFocus:pe(u.onFocus,()=>{q.current&&R.current?.click()})})})});$e.displayName=Be;var Ds="RadioGroupIndicator",_e=n.forwardRef((f,j)=>{const{__scopeRadioGroup:c,...m}=f,u=Te(c);return e.jsx(Ee,{...u,...m,ref:j})});_e.displayName=Ds;var Me=Le,Ge=$e,As=_e;const xe=n.forwardRef(({className:f,...j},c)=>e.jsx(Me,{className:ke("grid gap-2",f),...j,ref:c}));xe.displayName=Me.displayName;const z=n.forwardRef(({className:f,...j},c)=>e.jsx(Ge,{ref:c,className:ke("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",f),...j,children:e.jsx(As,{className:"flex items-center justify-center",children:e.jsx(ds,{className:"h-2.5 w-2.5 fill-current text-current"})})}));z.displayName=Ge.displayName;const Zs=()=>{const{effectiveTheme:f}=ss(),j=ts(),[c,m]=n.useState(!1),[u,v]=n.useState(0),[g,P]=n.useState(0),[I,R]=n.useState(0),[i,x]=n.useState([]),[q,S]=n.useState(null),[y,_]=n.useState("Home Delivery"),[F,Ue]=n.useState("UPI"),[H,He]=n.useState(null),[oe,J]=n.useState(!1),[ge,ye]=n.useState(null),[Q,be]=n.useState(300),[je,Xe]=n.useState(null),[ve,Ve]=n.useState(null),[r,ne]=n.useState({name:"",address:"",city:"",state:"",pincode:"",mobile:"",email:"",country:"",notes:"",userAddressId:null}),[K,ie]=n.useState(null),[D,Ne]=n.useState({}),[T,le]=n.useState(!1),[We,ce]=n.useState(!1),[de,Y]=n.useState([]),[me,Ce]=n.useState(""),[h,X]=n.useState(null),[Z,ee]=n.useState([]),[Se,se]=n.useState(0),[te,M]=n.useState(0),V=s=>{const a=localStorage.getItem("token");if(!a)return;const o={id:K??void 0,mobile:r.mobile,email:r.email,name:r.name,products:s,createdBy:r.name,updatedBy:r.name,token:a};E.postData({endpoint:"/order/save-cart",body:{request:O(o)},successCallback:t=>{t.id&&ie(t.id)},errorCallback:t=>{console.error("Error saving cart:",t)}})};n.useEffect(()=>{r.mobile&&r.mobile.length>=10&&E.postData({endpoint:"/order/pending-order",body:{request:O({token:localStorage.getItem("token")})},successCallback:s=>{if(s?.products&&Array.isArray(s.products)&&s.products.length>0){const a=[...s.products];i.forEach(o=>{const t=a.findIndex(l=>l.productId===o.productId&&l.priceList?.id===o.priceList?.id);t===-1?a.push(o):a[t].quantity=o.quantity}),x(a),localStorage.setItem("cart",JSON.stringify(a))}ie(s.cartId||null)},errorCallback:s=>{console.error("Error fetching pending order:",s)}})},[r.mobile]),n.useEffect(()=>{oe&&Q===0&&(J(!1),r.mobile&&r.mobile.length>=10&&E.postData({endpoint:"/order/pending-order",body:{request:O({mobile:r.mobile})},successCallback:s=>{s?.products&&Array.isArray(s.products)&&s.products.length>0&&x(s.products),ie(s.cartId||null),b.error("The Payment Session Expired. Please click Place Order again to pay.",{duration:5e3})},errorCallback:s=>{console.error("Error fetching pending order:",s)}}))},[Q,oe,i]);const ze=()=>{J(!1),H!==null&&S({id:H}),x([]),Je(),localStorage.removeItem("cart")},Je=()=>{if(!ve.id||!je.id)return;const s=localStorage.getItem("token"),a={id:K??void 0,...ve,status:"Ordered",token:s||void 0,mobile:r.mobile,email:r.email,name:r.name,products:i,createdBy:r.name,updatedBy:r.name};E.postData({endpoint:"/order/save-cart",body:{request:O(a)},successCallback:o=>{o.id==null&&b.error("Cart update failed!");const t={id:H??void 0,...je,mobile:r.mobile,email:r.email,name:r.name,products:i,createdBy:r.name,updatedBy:r.name,status:"Payment Processed",token:s||void 0,couponId:h?h.id:void 0};E.postData({endpoint:"/order/place-order",body:{request:O(t)},successCallback:l=>{l.id==null&&b.error("Order update failed!")},errorCallback:()=>{b.error("Order update failed!")}})},errorCallback:()=>{b.error("Cart creation failed!")}})},we=()=>{const s=localStorage.getItem("token");s?E.postData({endpoint:"/user/default-address",body:{request:O({token:s})},successCallback:a=>{a&&(ne(o=>({...o,name:a.name||o.name,address:a.addressLine1||o.address,city:a.city||o.city,state:a.state||o.state,pincode:a.pincode||o.pincode,mobile:a.phone||o.mobile,email:a.email||o.email,userAddressId:a.id,country:a.country})),le(!0))},errorCallback:a=>{console.error("Error fetching default address:",a),le(!1)}}):le(!1)},Qe=()=>{const s=localStorage.getItem("token");if(i.length>0){const a=i.map(t=>t.productId).filter(t=>t!==void 0),o=s?[]:["New Users"];E.postData({endpoint:"/order/get-coupons",body:{request:O({products:a,token:s||void 0,users:o})},successCallback:t=>{t.coupons&&Array.isArray(t.coupons)?Y(t.coupons):Y([])},errorCallback:t=>{console.error("Error fetching coupons:",t),Y([])}})}else Y([])};n.useEffect(()=>{we()},[]),n.useEffect(()=>{Qe()},[i]),n.useEffect(()=>{try{const s=localStorage.getItem("cart");s&&x(JSON.parse(s))}catch{x([])}},[]),n.useEffect(()=>{const s=i.reduce((l,d)=>d.priceList&&typeof d.priceList.unitprice=="number"?l+d.priceList.unitprice*d.quantity:l,0);v(s);let a=[],o=0;const t=localStorage.getItem("token");if(h){if(i.length>0){const l=i.map(N=>N.productId).filter(N=>N!==void 0),d=t?[]:["New Users"];E.postData({endpoint:"/order/get-coupons",body:{request:O({couponCode:h.code,products:l,token:t||void 0,users:d})},successCallback:N=>{if(N.coupons&&Array.isArray(N.coupons)){const w=h.products.map(p=>p.id);i.forEach((p,G)=>{let B=0;p.productId&&w.includes(p.productId)&&h.discounts.forEach(k=>{if(k.name==="Shipping"&&k.flatrate===!0)M(g===99?99-k.discount:0);else if(k.name==="Shipping"&&k.flatrate===!1)if(g>=99){const ue=k.discount/100*99;M(ue)}else M(99);else if(k.name==="Product Discount"&&k.flatrate===!0)B+=(p.priceList.unitprice-k.discount)*p.quantity;else if(k.name==="Product Discount"&&k.flatrate===!1){const ue=p.priceList?.unitprice?p.priceList.unitprice*p.quantity:0;B+=ue*(k.discount/100)}}),a[G]=B,o+=B,ee(a),se(o);const W=h&&h.discounts.some(k=>k.name==="Shipping")?99-te:s>=999?0:i.length>0&&y==="Home Delivery"?99:0;P(W),R(s-o+W)})}},errorCallback:N=>{X(null),ee(a),se(o);const p=h&&h.discounts.some(G=>G.name==="Shipping")?99-te:s>=999?0:i.length>0&&y==="Home Delivery"?99:0;P(p),R(s-o+p)}})}}else{a=i.map(()=>0),ee(a),se(o);const d=h&&h.discounts.some(N=>N.name==="Shipping")?99-te:s>=999?0:i.length>0&&y==="Home Delivery"?99:0;P(d),R(s-o+d)}},[i,y,F,h,te]);const Ke=()=>{const s={};return r.name?/^[A-Za-z ]+$/.test(r.name)||(s.name="Name must contain only alphabets."):s.name="Name is required.",r.address||(s.address="Address is required."),r.city||(s.city="City is required."),r.state||(s.state="State is required."),r.pincode?/^[0-9]{6}$/.test(r.pincode)||(s.pincode="Pincode must be 6 digits."):s.pincode="Pincode is required.",r.mobile?r.mobile.match(/^\\+[0-9]{1,2} ?[0-9]{10}$/)||r.mobile.match(/^[0-9]{10}$/)||(s.mobile="Mobile must be 10 digits or in format +CC XXXXXXXXXX."):s.mobile="Mobile is required.",s},L=s=>{const{name:a,value:o}=s.target;let t=o;a==="pincode"&&(t=t.replace(/[^0-9]/g,"").slice(0,6)),a==="mobile"&&(t.startsWith("+")?(t=t.replace(/[^+0-9 ]/g,""),t="+"+t.slice(1).replace(/\+/g,""),t=t.replace(/^\+(\d{1,2})( ?)(\d{0,10}).*$/,(l,d,N,w)=>`+${d}${N}${w}`)):t=t.replace(/[^0-9]/g,"").slice(0,10)),ne({...r,[a]:t}),Ne({...D,[a]:""})},Ye=async()=>{if(be(300),c)return;m(!0);const s=Ke();if(i.length===0){b.error("Your cart is empty. Please add items before placing an order."),m(!1);return}if(Ne(s),Object.keys(s).length===0){const a=localStorage.getItem("token"),o=!!a,t=(l,d)=>{const N={id:H??void 0,name:r.name,address:r.address,city:r.city,state:r.state,pincode:r.pincode,mobile:r.mobile,email:r.email,country:r.country,notes:r.notes,shippingMethod:y,paymentMethod:F,cartId:l,userAddressId:r.userAddressId,status:"Ordered",token:d||void 0,couponId:h?h.id:void 0};E.postData({endpoint:"/order/place-order",body:{request:O(N)},successCallback:w=>{if(!w.id){b.error("Order creation failed!"),m(!1);return}if(F==="UPI"){He(w.id),J(!0),Ve({id:l}),Xe(w),m(!1),ge&&(clearInterval(ge),ye(null));const p=setInterval(()=>{be(G=>G>0?G-1:0)},1e3);ye(p)}else b.success("Order placed successfully! Order ID: "+w.id),ne({name:"",address:"",city:"",state:"",pincode:"",mobile:"",email:"",country:"",notes:"",userAddressId:null}),x([]),localStorage.removeItem("cart"),S({id:w.id}),m(!1)},errorCallback:w=>{console.error("Error placing order",w),b.error("Order creation failed!"),m(!1)}})};if(o)if(K)t(K,a);else{const l={id:void 0,mobile:r.mobile,email:r.email,name:r.name,products:i,createdBy:r.name,updatedBy:r.name,token:a};E.postData({endpoint:"/order/save-cart",body:{request:O(l)},successCallback:d=>{if(!d.id){b.error("Cart creation failed!"),m(!1);return}t(d.id,a)},errorCallback:d=>{console.error("Error saving cart",d),b.error("Cart creation failed!"),m(!1)}})}else{const l={id:void 0,mobile:r.mobile,email:r.email,name:r.name,products:i,createdBy:r.name,updatedBy:r.name,token:void 0};E.postData({endpoint:"/order/save-cart",body:{request:O(l)},successCallback:d=>{if(!d.id){b.error("Cart creation failed!"),m(!1);return}t(d.id,a)},errorCallback:d=>{console.error("Error saving cart",d),b.error("Cart creation failed!"),m(!1)}})}}else b.error("Please check the form for any mistakes.",{duration:3e3}),m(!1)},Ze=()=>{if(!me.trim())return;const s=localStorage.getItem("token");if(i.length>0){const a=i.map(t=>t.productId).filter(t=>t!==void 0),o=s?[]:["New Users"];E.postData({endpoint:"/order/get-coupons",body:{request:O({couponCode:me,products:a,token:s||void 0,users:o})},successCallback:t=>{if(t.coupons&&Array.isArray(t.coupons)&&t.coupons.length>0){const l=t.coupons[0];X(l),Ce(""),b.success(`Coupon ${l.code} applied!`);let d=[],N=0;const w=l.products.map(p=>p.id);i.forEach((p,G)=>{let B=0;p.productId&&w.includes(p.productId)&&l.discounts.forEach(A=>{if(A.name==="Shipping"&&A.flatrate===!0)M(g===99?99:0);else if(A.name==="Shipping"&&A.flatrate===!1)if(g===99){const W=A.discount/100*99;M(W)}else M(0);else if(A.name==="Product Discount"&&A.flatrate===!0)B+=Math.round((p.priceList.unitprice-A.discount)*p.quantity);else if(A.name==="Product Discount"&&A.flatrate===!1){const W=p.priceList?.unitprice?p.priceList.unitprice*p.quantity:0;B+=Math.round(W*(A.discount/100))}}),d[G]=B,N+=B}),ee(d),se(N)}else X(null),b.error("Invalid Coupon Code")},errorCallback:t=>{X(null),b.error("Error applying coupon")}})}},es=()=>{j("/")};return e.jsxs(e.Fragment,{children:[e.jsx(us,{}),q?e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"container flex flex-col items-center justify-center justify-center-safe py-12 justify-self-center min-h-screen",children:[e.jsx("div",{className:"text-center mb-6",children:e.jsx(vs,{className:"h-32 w-32 text-green-500 mx-auto"})}),e.jsx("h2",{className:"mt-6 text-2xl font-semibold text-green-600",children:"Order Placed Successfully"}),e.jsx("h4",{className:"mt-2 text-lg",children:"We will contact you within 24hrs for the payment confirmation, and the order will be processed within 3 working days."}),e.jsx("h4",{className:"mt-2",children:"You can get updates on WhatsApp on the status of the order."}),e.jsx("h4",{className:"mt-2",children:"This is a homemade food buisness start up so please bear with us for any small delays. But we guarantee the best quality."}),e.jsxs("h4",{className:"mt-4 text-lg font-medium",children:["Order ID: ",q.id]}),e.jsx(U,{variant:"outline",className:"py-3 px-4 mt-6 text-white hover:text-black bg-primary border-gray-400 hover:bg-green-50",onClick:es,children:"Continue Shopping"})]})}):e.jsxs(e.Fragment,{children:[oe?e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-background border border-border rounded-xl p-4 sm:p-6 lg:p-8 max-w-sm sm:max-w-md lg:max-w-lg w-full mx-auto shadow-2xl",children:[e.jsxs("div",{className:"text-center mb-4 sm:mb-6",children:[e.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 mx-auto mb-3 bg-primary/10 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-xl sm:text-2xl",children:"⏰"})}),e.jsx("h1",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-foreground",children:"Time remaining"}),e.jsxs("div",{className:"text-2xl sm:text-3xl lg:text-4xl font-mono font-bold text-primary mt-2",children:[Math.floor(Q/60),":",(Q%60).toString().padStart(2,"0")]})]}),e.jsxs("div",{className:"text-center mb-4 sm:mb-6",children:[e.jsx("p",{className:"text-sm sm:text-base text-muted-foreground mb-3",children:"Complete your payment using the QR code below"}),e.jsx("div",{className:"bg-muted/50 rounded-lg p-3 mb-4",children:e.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground",children:["Please share a screenshot of the payment on WhatsApp to"," ",e.jsx("a",{className:"text-primary hover:underline font-medium",href:"https://wa.me/+919363720792",target:"_blank",rel:"noopener noreferrer",children:"+91 93637-20792"})," ","for us to start processing the order"]})})]}),e.jsx("div",{className:"flex justify-center mb-4 sm:mb-6",children:e.jsx("div",{className:"bg-background p-3 rounded-xl border border-border",children:e.jsx(rs,{value:`upi://pay?pa=renugarenuga36-1@okhdfcbank&pn=Renus Home Foods&tn=Renus Home Foods Order ID ${H}&am=${I}`,size:180,qrStyle:"dots",eyeRadius:10,logoPaddingStyle:"circle",logoImage:"/img/logo.webp"})})}),e.jsxs("div",{className:"bg-muted/30 rounded-lg p-3 mb-4 text-center",children:[e.jsxs("div",{className:"text-sm sm:text-base font-semibold text-foreground",children:["Order ID: #",H]}),e.jsxs("div",{className:"text-lg sm:text-xl font-bold text-primary",children:["Total: ₹",I.toFixed(2)]})]}),e.jsx(U,{className:"w-full h-12 sm:h-14 text-sm sm:text-base font-semibold",onClick:ze,children:"Confirm Payment"}),e.jsx("div",{className:"text-center mt-3",children:e.jsx("button",{onClick:()=>J(!1),className:"text-sm text-muted-foreground hover:text-foreground transition-colors",children:"Close and try again later"})})]})}):e.jsx(e.Fragment,{}),e.jsx("div",{className:"container mx-auto px-4 pt-6 pb-5",children:e.jsxs("div",{className:"py-4",children:[e.jsxs("div",{className:"mb-6 lg:mb-8",children:[e.jsx("h1",{className:"text-2xl lg:text-3xl font-bold",children:"Billing details"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Complete your order information"})]}),e.jsx("form",{action:"#",onSubmit:s=>s.preventDefault(),children:e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-5 gap-6 lg:gap-8",children:[e.jsxs("div",{className:"xl:col-span-3 space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(C,{htmlFor:"name",className:"text-sm font-medium",children:["Name",e.jsx("sup",{children:"*"})]}),e.jsx($,{type:"text",id:"name",name:"name",value:r.name,onChange:L,disabled:T,className:"w-full h-11 text-sm",placeholder:"Enter your full name"}),D.name&&e.jsx("div",{className:"text-sm text-red-600 mt-1",children:D.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(C,{htmlFor:"mobile",className:"text-sm font-medium",children:["Mobile",e.jsx("sup",{children:"*"})]}),e.jsx($,{type:"tel",id:"mobile",name:"mobile",value:r.mobile,onChange:L,inputMode:"tel",pattern:"(\\+[0-9]{1,2} ?)?[0-9]{10}",disabled:T,className:"w-full h-11 text-sm",placeholder:"10 digit mobile number"}),D.mobile&&e.jsx("div",{className:"text-sm text-red-600 mt-1",children:D.mobile})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(C,{htmlFor:"address",className:"text-sm font-medium",children:["Address ",e.jsx("sup",{children:"*"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx($,{type:"text",id:"address",name:"address",value:r.address,onChange:L,placeholder:"House Number, Street Name, Area",disabled:T,className:"flex-1 h-11 text-sm"}),T&&e.jsx(U,{variant:"outline",onClick:()=>ce(!0),className:`sm:w-auto w-full h-11 text-green-600 border-green-600 ${f==="dark"?"hover:bg-primary":"hover:bg-green-50"}`,children:"Change"})]}),D.address&&e.jsx("div",{className:"text-sm text-red-600 mt-1",children:D.address})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(C,{htmlFor:"city",className:"text-sm font-medium",children:["Town/City",e.jsx("sup",{children:"*"})]}),e.jsx($,{type:"text",id:"city",name:"city",value:r.city,onChange:L,disabled:T,className:"w-full h-11 text-sm",placeholder:"Enter City"}),D.city&&e.jsx("div",{className:"text-sm text-red-600 mt-1",children:D.city})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(C,{htmlFor:"state",className:"text-sm font-medium",children:["State",e.jsx("sup",{children:"*"})]}),e.jsx($,{type:"text",id:"state",name:"state",value:r.state,onChange:L,disabled:T,className:"w-full h-11 text-sm",placeholder:"Enter State"}),D.state&&e.jsx("div",{className:"text-sm text-red-600 mt-1",children:D.state})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(C,{htmlFor:"pincode",className:"text-sm font-medium",children:["Pincode",e.jsx("sup",{children:"*"})]}),e.jsx($,{type:"text",id:"pincode",name:"pincode",value:r.pincode,onChange:L,inputMode:"numeric",pattern:"[0-9]*",disabled:T,className:"w-full h-11 text-sm",placeholder:"6 digit Pincode"}),D.pincode&&e.jsx("div",{className:"text-sm text-red-600 mt-1",children:D.pincode})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"country",className:"text-sm font-medium",children:"Country"}),e.jsx($,{type:"text",id:"country",name:"country",value:r.country,onChange:L,disabled:T,className:"w-full"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"email",className:"text-sm font-medium",children:"Email Address"}),e.jsx($,{type:"email",id:"email",name:"email",value:r.email,onChange:L,disabled:T,className:"w-full"})]})]}),e.jsxs("div",{className:"space-y-2 pt-6",children:[e.jsx(C,{htmlFor:"notes",className:"text-sm font-medium",children:"Delivery Notes (Optional)"}),e.jsx(js,{id:"notes",name:"notes",placeholder:"Delivery Notes (Optional)",value:r.notes,onChange:L,rows:5,className:"resize-none"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs(C,{className:"text-sm font-medium",children:["Shipping Method",e.jsx("sup",{children:"*"})]}),e.jsxs(xe,{value:y,onValueChange:s=>_(s),className:"space-y-1 pt-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(z,{value:"Home Delivery",id:"Shipping-Home"}),e.jsx(C,{htmlFor:"Shipping-Home",className:"text-sm font-normal cursor-pointer",children:"Home Delivery"}),y==="Home Delivery"&&u<999&&u>0&&e.jsxs("div",{className:"text-sm text-red-600 ml-4",children:["Add Products worth ₹",999-u," or more to get free shipping"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(z,{value:"Free Store Pickup",id:"Shipping-Store"}),e.jsx(C,{htmlFor:"Shipping-Store",className:"text-sm font-normal cursor-pointer",children:"Free Store Pickup"})]})]})]}),e.jsxs("div",{className:"space-y-4 pt-6 border-b pb-2",children:[e.jsx("h4",{className:"text-lg font-semibold",children:"Payment Option"}),e.jsxs(xe,{value:F,onValueChange:Ue,className:"space-y-1",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(z,{value:"Direct Bank Transfer",id:"Payment-Bank"}),e.jsx(C,{htmlFor:"Payment-Bank",className:"text-sm font-normal cursor-pointer",children:"Direct Bank Transfer"})]}),e.jsx("div",{className:"text-sm text-gray-600 ml-6",children:"Order will be processed once the amount is checked cleared in our accounts. Please include the order ID shown after placing the order in your payment remarks"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(z,{value:"UPI",id:"Payment-UPI"}),e.jsx(C,{htmlFor:"Payment-UPI",className:"text-sm font-normal cursor-pointer",children:"UPI/Google Pay/Paytm/PhonePe QR"})]}),e.jsx("div",{className:"text-sm text-gray-600 ml-6",children:"Pay Using the QR Shown after placing the order and confirm the order after payment"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(z,{value:"Cash on Delivery",id:"Payment-COD"}),e.jsx(C,{htmlFor:"Payment-COD",className:"text-sm font-normal cursor-pointer",children:"Cash on Delivery (COD)"})]}),e.jsx("div",{className:"text-sm text-gray-600 ml-6",children:"Order will be processed after personal confirmation of the order through phone."})]})]})]})]}),e.jsxs("div",{className:"xl:col-span-2",children:[e.jsxs("div",{className:"bg-card rounded-lg border border-border overflow-hidden",children:[e.jsxs("div",{className:"p-4 lg:p-6 border-b border-border",children:[e.jsx("h2",{className:"text-lg lg:text-xl font-semibold",children:"Order Summary"}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[i.length," items in your cart"]})]}),e.jsx("div",{className:"lg:hidden",children:e.jsx("div",{className:"divide-y divide-border max-h-96 overflow-y-auto",style:{scrollbarWidth:"thin",paddingRight:"24px"},children:i.length===0?e.jsx("div",{className:"p-6 text-center text-muted-foreground",children:"Your cart is empty."}):i.map((s,a)=>e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-16 h-16 bg-muted rounded-lg overflow-hidden flex-shrink-0",children:e.jsx("img",{src:s.image?`/static/inventory/${s.image}`:"/img/logo.webp",alt:s.name||"Product",className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-medium text-sm truncate",children:s.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.priceList?.weight}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsxs("span",{className:"text-sm font-medium",children:["₹",s.priceList?.unitprice]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",className:"w-6 h-6 rounded-full border border-border flex items-center justify-center text-xs hover:bg-accent",onClick:()=>{if(s.quantity>1){const o=i.map((t,l)=>l===a?{...t,quantity:t.quantity-1}:t);x(o),localStorage.setItem("cart",JSON.stringify(o)),V(o)}else{const o=i.filter((t,l)=>l!==a);x(o),localStorage.setItem("cart",JSON.stringify(o)),V(o)}},children:"-"}),e.jsx("span",{className:"text-sm font-medium min-w-[2rem] text-center",children:s.quantity}),e.jsx("button",{type:"button",className:"w-6 h-6 rounded-full border border-border flex items-center justify-center text-xs hover:bg-accent",onClick:()=>{const o=i.map((t,l)=>l===a?{...t,quantity:t.quantity+1}:t);x(o),localStorage.setItem("cart",JSON.stringify(o)),V(o)},children:"+"})]})]}),e.jsxs("div",{className:"text-right mt-1",children:[e.jsxs("span",{className:"text-sm font-semibold",children:["₹",s.priceList?.unitprice?s.priceList.unitprice*s.quantity:0]}),Z[a]>0&&e.jsxs("div",{className:"text-xs text-green-600",children:["(-₹",Z[a].toFixed(2),")"]})]})]})]})},a))})}),e.jsx("div",{className:"hidden lg:block max-h-96 overflow-y-auto",style:{scrollbarWidth:"thin",paddingRight:"24px"},children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"sticky top-0 bg-card z-10",children:e.jsxs("tr",{className:"border-b border-border",children:[e.jsx("th",{className:"text-left p-3 text-sm font-medium",children:"Product"}),e.jsx("th",{className:"text-left p-3 text-sm font-medium",children:"Weight"}),e.jsx("th",{className:"text-left p-3 text-sm font-medium",children:"Price"}),e.jsx("th",{className:"text-center p-3 text-sm font-medium",children:"Qty"}),e.jsx("th",{className:"text-right p-3 text-sm font-medium",children:"Total"})]})}),e.jsx("tbody",{children:i.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"text-center p-6 text-muted-foreground",children:"Your cart is empty."})}):i.map((s,a)=>e.jsxs("tr",{className:"border-b border-border hover:bg-accent/50",children:[e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-10 h-10 bg-muted rounded overflow-hidden",children:e.jsx("img",{src:s.image?`/static/inventory/${s.image}`:"/img/logo.webp",alt:s.name||"Product",className:"w-full h-full object-cover"})}),e.jsx("span",{className:"text-sm font-medium truncate",children:s.name})]})}),e.jsx("td",{className:"p-3 text-sm text-muted-foreground",children:s.priceList?.weight}),e.jsxs("td",{className:"p-3 text-sm",children:["₹",s.priceList?.unitprice]}),e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx("button",{type:"button",className:"w-6 h-6 rounded border border-border flex items-center justify-center text-xs hover:bg-accent",onClick:()=>{if(s.quantity>1){const o=i.map((t,l)=>l===a?{...t,quantity:t.quantity-1}:t);x(o),localStorage.setItem("cart",JSON.stringify(o)),V(o)}else{const o=i.filter((t,l)=>l!==a);x(o),localStorage.setItem("cart",JSON.stringify(o)),V(o)}},children:"-"}),e.jsx("span",{className:"text-sm font-medium min-w-[2rem] text-center",children:s.quantity}),e.jsx("button",{type:"button",className:"w-6 h-6 rounded border border-border flex items-center justify-center text-xs hover:bg-accent",onClick:()=>{const o=i.map((t,l)=>l===a?{...t,quantity:t.quantity+1}:t);x(o),localStorage.setItem("cart",JSON.stringify(o)),V(o)},children:"+"})]})}),e.jsx("td",{className:"p-3 text-sm text-right",children:e.jsxs("div",{children:["₹",s.priceList?.unitprice?s.priceList.unitprice*s.quantity:0,Z[a]>0&&e.jsxs("div",{className:"text-xs text-green-600",children:["(-₹",Z[a].toFixed(2),")"]})]})})]},a))})]})})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:"bg-muted/30 rounded-lg p-3 lg:p-4",children:e.jsx("table",{className:`w-full ${f==="dark"?"table-dark":""}`,children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{colSpan:4,className:"text-end align-middle",children:e.jsx("strong",{children:"Subtotal"})}),e.jsxs("td",{colSpan:2,className:"text-end align-middle",children:["₹",u.toFixed(2)]})]}),h&&Se>0&&e.jsxs("tr",{children:[e.jsx("td",{colSpan:4,className:"text-end align-middle",children:e.jsxs("strong",{children:["Discount (",h.code,")"]})}),e.jsxs("td",{colSpan:2,className:"text-end align-middle",children:["-₹",Se.toFixed(2)]})]}),e.jsxs("tr",{children:[e.jsx("td",{colSpan:4,className:"text-end align-middle",children:e.jsx("strong",{children:"Shipping"})}),e.jsxs("td",{colSpan:2,className:"text-end align-middle",children:["₹",g.toFixed(2)]})]}),e.jsxs("tr",{children:[e.jsx("td",{colSpan:4,className:"text-end align-middle",children:e.jsx("strong",{children:"Total"})}),e.jsx("td",{colSpan:2,className:"text-end align-middle",children:e.jsxs("strong",{children:["₹",I.toFixed(2)]})})]})]})})}),e.jsxs("div",{className:"space-y-4 pt-4",children:[e.jsx(C,{className:"text-sm font-medium",children:"Coupons"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx($,{type:"text",placeholder:"Enter coupon code",value:me,onChange:s=>Ce(s.target.value),className:"flex-1"}),e.jsx(U,{type:"button",variant:"outline",onClick:Ze,className:"px-6",children:"Apply"})]}),de.length>0&&e.jsx("div",{className:"max-h-48 overflow-y-auto border rounded-lg",style:{scrollbarWidth:"thin",paddingRight:"16px"},children:de.map((s,a)=>{const o=s.discounts.map(t=>t.flatrate===!1&&t.discount>0?`${t.discount}% off ${t.name}`:t.flatrate===!0?`${t.name.replace("Discount","Price")} ₹${t.discount} Flat`:"").filter(t=>t).join(" & ");return e.jsxs("div",{className:`p-3 ${a===de.length-1?"":"border-b"}`,children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:s.code}),e.jsx(U,{type:"button",size:"sm",variant:h&&h.id===s.id?"default":"outline",onClick:()=>{!h||h.id!==s.id?(X(s),b.success(`Coupon ${s.code} applied!`)):(X(null),b("Coupon removed."))},children:h&&h.id===s.id?"Remove":"Apply"})]}),o&&e.jsx("div",{className:"text-sm text-gray-600 mt-1",children:o})]},s.id)})})]})]}),e.jsx("div",{className:"pt-4",children:e.jsx(U,{type:"button",className:"w-full py-3 px-4 text-uppercase border-2 border-green-600 text-white hover:text-green-600 hover:bg-green-50",onClick:Ye,disabled:c,children:c?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"mr-2",children:"Placing Order..."}),e.jsx("div",{className:"inline-block w-4 h-4 border-2 border-green-600 border-t-transparent rounded-full animate-spin"})]}):"Place Order"})})]})]})]})})]})})]}),e.jsx(xs,{open:We,onOpenChange:ce,children:e.jsxs(hs,{className:"max-w-4xl max-h-screen mt-4 mb-4 overflow-hidden",children:[e.jsx(fs,{children:e.jsx(gs,{children:"Select Default Address"})}),e.jsx("div",{className:"overflow-y-auto max-h-screen",children:e.jsx(ps,{modalMode:!0})}),e.jsx(ys,{children:e.jsx(U,{variant:"outline",onClick:()=>{ce(!1),we()},children:"Close"})})]})}),e.jsx(ms,{})]})};export{Zs as default};
