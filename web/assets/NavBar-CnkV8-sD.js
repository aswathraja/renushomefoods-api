import{r as l,t as Y,v as H,j as e,x as J}from"./vendor-react-Bk0qDDMD.js";import{a as Q,u as V,b as C,B as r,A as X,e as G,c as S}from"./index-Bzbs1pXN.js";import{L as K,D as L,a as I,b as A,c as t,d as D}from"./dropdown-menu-Dae-Y6FG.js";import{a2 as W,m as f,n as g,o as j,p as b,q as Z,X as _}from"./vendor-icons-FTV6Dp_q.js";import{A as z,m as d}from"./vendor-motion-DKNEqpS6.js";function T(){if(typeof window<"u")try{return JSON.parse(window.localStorage.getItem("cart")||"[]").reduce((i,h)=>i+(h.quantity||1),0)}catch{return 0}return 0}const E=[.42,0,.58,1],ne=()=>{const[m,i]=l.useState(!0),[h,k]=l.useState(!1),[$,x]=l.useState(!1),[u,M]=l.useState(T()),P=Y(),a=H(),{isAdmin:y,user:O}=Q(),{theme:n,setTheme:o,effectiveTheme:B}=V(),F=()=>{i(s=>!s)},v=()=>{const s=localStorage.getItem("token");s&&X.postData({endpoint:"/user/logout",body:{request:G({token:s})},successCallback:()=>{localStorage.removeItem("token"),S.success("Logged Out Successfully"),a("/login")},errorCallback:()=>{localStorage.removeItem("token"),S.error("Logout failed. Please try again")}})},w=()=>{a("/profile")},U=s=>{P.pathname!=="/"?(s.preventDefault(),sessionStorage.setItem("scrollToShop","1"),a("/",{replace:!1})):J.scroller.scrollTo("shop",{duration:300,delay:300,smooth:"easeInOutQuart"})};l.useEffect(()=>{const s=()=>M(T());window.addEventListener("storage",s);const p=setInterval(s,500);return()=>{window.removeEventListener("storage",s),clearInterval(p)}},[]),l.useEffect(()=>{const s=()=>{window.scrollY>100?(k(!0),x(!0),setTimeout(()=>x(!1),1e3)):(k(!1),x(!1))};return window.addEventListener("scroll",s),()=>window.removeEventListener("scroll",s)},[]);const c=!!(localStorage.getItem("token")||O),N=[{href:"/",label:"Home",type:"link"},{label:"Shop",type:"action",onClick:U},{href:"/contact",label:"Store Locator",type:"link"},{href:"/order-tracking",label:c?"Your Orders":"Order Tracking",type:"link"},...c?[{href:"/addresses",label:"Your Addresses",type:"link"}]:[]],q=[{href:"/about",label:"About Us",type:"link"},{href:"/contact",label:"Contact Us",type:"link"},{href:"/shipping-policy",label:"Shipping Policy",type:"link"},{href:"/return-policy",label:"Returns & Refund Policy",type:"link"},...c?[{onClick:w,label:"Profile",type:"action"},...y?[{href:"/admin",label:"Admin Dashboard",type:"link"}]:[],{onClick:v,label:"Logout",type:"action"}]:[{href:"/login",label:"Login",type:"link"}]];return e.jsxs(e.Fragment,{children:[e.jsxs("nav",{className:C("sticky top-0 left-0 right-0 z-40 flex h-14 sm:h-16 items-center px-3 sm:px-4 border-b backdrop-blur-sm transition-all duration-300",h?"bg-background/95 border-border shadow-sm":"bg-background/95 border-border","text-foreground"),children:[e.jsx("div",{className:"flex items-center flex-shrink-0",children:e.jsxs("a",{href:"/",className:"flex items-center space-x-1 sm:space-x-2",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10",children:e.jsx(K,{})}),e.jsx("span",{className:"font-serif text-sm sm:text-lg font-semibold block nav-parisienne",children:"Amma's Heartmade Magic"})]})}),e.jsx("div",{className:"hidden xl:flex items-center space-x-1 ml-8",children:N.map(s=>s.type==="link"?e.jsx("a",{href:s.href,className:"px-3 py-2 text-sm font-medium rounded-md transition-colors text-muted-foreground hover:text-foreground hover:bg-accent focus-ring",children:s.label},s.label):e.jsx("span",{className:"px-3 py-2 text-sm font-medium rounded-md transition-colors text-muted-foreground hover:text-foreground hover:bg-accent cursor-pointer",onClick:s.onClick,children:s.label},s.label))}),e.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2 ml-auto",children:[e.jsx(r,{variant:"ghost",size:"icon",className:"relative h-9 w-9 sm:h-10 sm:w-10",asChild:!0,children:e.jsxs("a",{href:"/checkout",children:[e.jsx(W,{className:"h-4 w-4 sm:h-5 sm:w-5"}),u>0&&e.jsx("span",{className:"absolute -top-0.5 -right-0.5 sm:-top-1 sm:-right-1 bg-primary text-primary-foreground text-xs rounded-full h-4 w-4 sm:h-5 sm:w-5 flex items-center justify-center font-medium",children:u>99?"99+":u})]})}),c?e.jsxs(L,{children:[e.jsx(I,{asChild:!0,children:e.jsx(r,{variant:"ghost",size:"icon",className:"h-9 w-9 sm:h-10 sm:w-10 rounded-full hidden md:flex",children:e.jsx(f,{className:"h-4 w-4 sm:h-5 sm:w-5"})})}),e.jsxs(A,{align:"end",className:"w-56",children:[e.jsxs(t,{onClick:w,children:[e.jsx(f,{className:"mr-2 h-4 w-4"}),"Profile"]}),e.jsx(t,{onClick:()=>a("/order-tracking"),children:"Orders"}),e.jsx(t,{onClick:()=>a("/addresses"),children:"Addresses"}),y&&e.jsxs(e.Fragment,{children:[e.jsx(D,{}),e.jsx(t,{onClick:()=>a("/admin"),children:"Admin Dashboard"}),e.jsx(t,{onClick:()=>a("/inventory"),children:"Inventory"})]}),e.jsx(D,{}),e.jsx(t,{onClick:v,className:"text-primary",children:"Logout"})]})]}):e.jsxs(r,{variant:"ghost",size:"sm",onClick:()=>a("/login"),className:"h-9 sm:h-10 px-3 hidden md:flex",children:[e.jsx(f,{className:"h-4 w-4 sm:mr-2"}),e.jsx("span",{className:"hidden sm:hidden",children:"Login"})]}),e.jsxs(L,{children:[e.jsx(I,{asChild:!0,children:e.jsxs(r,{variant:"ghost",size:"icon",className:"h-9 w-9 sm:h-10 sm:w-10",children:[n==="light"&&e.jsx(g,{className:"h-4 w-4"}),n==="dark"&&e.jsx(j,{className:"h-4 w-4"}),n==="system"&&e.jsx(b,{className:"h-4 w-4"})]})}),e.jsxs(A,{align:"end",children:[e.jsxs(t,{onClick:()=>o("light"),children:[e.jsx(g,{className:"mr-2 h-4 w-4"}),"Light"]}),e.jsxs(t,{onClick:()=>o("dark"),children:[e.jsx(j,{className:"mr-2 h-4 w-4"}),"Dark"]}),e.jsxs(t,{onClick:()=>o("system"),children:[e.jsx(b,{className:"mr-2 h-4 w-4"}),"System"]})]})]}),e.jsx(r,{variant:"ghost",size:"icon",className:"xl:hidden h-9 w-9 sm:h-10 sm:w-10",onClick:F,children:e.jsx(z,{mode:"wait",children:m?e.jsx(d.div,{initial:{opacity:0,rotate:-90},animate:{opacity:1,rotate:0},exit:{opacity:0,rotate:90},transition:{duration:.3},children:e.jsx(Z,{className:"h-5 w-5"})},"menu"):e.jsx(d.div,{initial:{opacity:0,rotate:90},animate:{opacity:1,rotate:0},exit:{opacity:0,rotate:-90},transition:{duration:.3},children:e.jsx(_,{className:"h-5 w-5"})},"close")})})]})]}),e.jsx(z,{children:!m&&e.jsx(d.div,{initial:{opacity:0,x:"100%"},animate:{opacity:1,x:0},exit:{opacity:0,x:"100%"},transition:{duration:.2,ease:E},className:C("fixed top-12 left-0 right-0 z-30 xl:hidden","bg-background border-b border-border","shadow-lg"),children:e.jsxs("div",{className:"px-4 py-6 space-y-1",children:[[...N,...q].map((s,p)=>e.jsx(d.div,{initial:{x:"100%"},animate:{x:0},transition:{duration:.2,ease:E,delay:p*.05},children:s.type==="link"?e.jsx("a",{href:s.href,className:"block px-3 py-2 text-base font-medium text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors",children:s.label}):e.jsx("span",{className:"block px-3 py-2 text-base font-medium text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors cursor-pointer",onClick:R=>{s.onClick?.(R),i(!0)},children:s.label})},s.label)),e.jsx("div",{className:"pt-4 border-t border-border",children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsxs(r,{variant:n==="light"?"default":"outline",size:"sm",onClick:()=>o("light"),children:[e.jsx(g,{className:"h-4 w-4 mr-2"}),"Light"]}),e.jsxs(r,{variant:n==="dark"?"default":"outline",size:"sm",onClick:()=>o("dark"),children:[e.jsx(j,{className:"h-4 w-4 mr-2"}),"Dark"]}),e.jsxs(r,{variant:n==="system"?"default":"outline",size:"sm",onClick:()=>o("system"),children:[e.jsx(b,{className:"h-4 w-4 mr-2"}),"System"]})]})})]})})})]})};export{ne as N};
