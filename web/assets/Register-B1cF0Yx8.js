import{r as i,e as $,A as E,c as p,j as e,B as S,L as k}from"./index-DgNSKDh3.js";import{L as V,g as R,X as q,C as z}from"./dropdown-menu-dMPhb90y.js";import{T as B}from"./TopNav-DR-TOsOe.js";import{I as m}from"./input-DLnldhNo.js";import{L as d}from"./label-BRNvDUUl.js";import{T as M}from"./textarea-DxOT2_pj.js";import{E as J,a as U}from"./eye-B4E8oyTP.js";import"./NavBar-CIByx0f9.js";import"./TopBar-D2vQOP2o.js";const x=[{label:"At least 8 characters",test:r=>r.length>=8},{label:"One uppercase letter",test:r=>/[A-Z]/.test(r)},{label:"One lowercase letter",test:r=>/[a-z]/.test(r)},{label:"One digit",test:r=>/\d/.test(r)},{label:"One special character",test:r=>/[@$!%*?&()[\]{}#^~<>+=_|\\/.,:;"'-]/.test(r)}],se=()=>{const[r,f]=i.useState({name:"",username:"",email:"",phone:"",password:"",address:"",city:"",state:"",country:"",pincode:""}),[s,b]=i.useState({}),[v,g]=i.useState(!1),[w,j]=i.useState(!1),[C,D]=i.useState(!1),[u,A]=i.useState(x.map(()=>!1)),[X,I]=i.useState(!1),[y,L]=i.useState(!1),[F,P]=i.useState(!1);i.useEffect(()=>{const l=setTimeout(()=>{O(r)},300);return()=>clearTimeout(l)},[r.username,r.email,r.phone]);const o=l=>{const{name:t,value:n}=l.target;if(t==="phone"){let a=n.replace(/[^+\d\s]/g,"");if(!a.startsWith("+"))a=a.replace(/\D/g,"").slice(0,10);else if(!a.match(/^(\+\d{0,2})(\s?\d{0,10})$/))return;f(c=>({...c,[t]:a})),N(t,a);return}if(t==="pincode"){const a=n.replace(/\D/g,"").slice(0,6);f(c=>({...c,[t]:a})),N(t,a);return}if(f(a=>({...a,[t]:n})),N(t,n),t==="password"){!y&&n&&L(!0);const a=x.map(c=>c.test(n));A(a)}},O=async l=>{if(!(!l.username&&!l.email&&!l.phone))try{j(!0);const t={request:$({username:l.username,email:l.email,phone:l.phone})};E.postData({endpoint:"/user/validate-details",body:t,successCallback:n=>{},errorCallback:n=>{b(a=>({...a,username:n.username||a.username,email:n.email||a.email,phone:n.phone||a.phone}))}}),j(!1)}catch(t){j(!1),t?.response?.data?.error&&p.error(t.response.data.error)}},N=(l,t)=>{let n="";t.trim()?(l==="email"&&(/^[\w-.]+@([\w-]+\.)+[\w-]{2,4}$/.test(t)||(n="Invalid email format")),l==="phone"&&(/^(\+?\d{2}\s?\d{10}|\+?\d{12}|\d{10})$/.test(t)||(n="Phone Number should be in +XX XXXXXXXXXX or XXXXXXXXXX format")),l==="password"&&(x.every(c=>c.test(t))||(n="Password does not meet all requirements")),l==="pincode"&&(/^\d{6}$/.test(t)||(n="Pincode must be exactly 6 digits"))):n="This field is required",b(a=>({...a,[l]:n}))};i.useEffect(()=>{const l=Object.values(s).some(a=>a!==""),t=Object.values(r).every(a=>a.trim()!==""),n=u.every(a=>a===!0);I(!l&&t&&n)},[s,r,u]);const h=()=>u.filter(Boolean).length,T=async l=>{l.preventDefault(),X&&(g(!0),E.postData({endpoint:"/user/register",body:{request:$(r)},successCallback:t=>{g(!1),t.status==="ok"?(p.success(e.jsxs("span",{children:["Registration successful! Please continue to ",e.jsx("a",{href:"/login",className:"text-primary",style:{textDecoration:"underline"},children:"login"})," "]}),{duration:5e3}),setTimeout(()=>window.location.href="/login",2500)):p.error(t?.error||"Registration failed")},errorCallback:()=>{g(!1),p.error("Registration failed")}}))};return e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(B,{}),e.jsx("div",{className:"flex-1 flex items-center justify-center px-4 py-6 sm:py-8",children:e.jsxs("div",{className:"w-full max-w-2xl",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-42 h-42 sm:w-42 sm:h-42 mx-auto mb-4 bg-primary/10 rounded-full flex items-center justify-center",children:e.jsx(V,{size:"xxl"})}),e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-foreground mb-2",children:"Create Your Account"}),e.jsx("p",{className:"text-sm sm:text-base text-muted-foreground",children:"Join us today and start your healthy journey"})]}),e.jsxs("div",{className:"bg-card rounded-xl shadow-sm border border-border p-4 sm:p-6 lg:p-8",children:[e.jsxs("form",{onSubmit:T,children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("h3",{className:"text-lg font-semibold text-foreground mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center text-primary text-sm font-bold",children:"1"}),"Personal Information"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"name",className:"text-sm font-medium text-foreground",children:"Full Name *"}),e.jsx(m,{type:"text",id:"name",name:"name",value:r.name,onChange:o,placeholder:"Enter your full name",className:`h-11 sm:h-12 text-sm sm:text-base ${s.name?"border-destructive":""}`}),s.name&&e.jsx("p",{className:"text-destructive text-xs sm:text-sm",children:s.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"username",className:"text-sm font-medium text-foreground",children:"Username *"}),e.jsx(m,{type:"text",id:"username",name:"username",value:r.username,onChange:o,placeholder:"Choose a username",className:`h-11 sm:h-12 text-sm sm:text-base ${s.username?"border-destructive":""}`}),s.username&&e.jsx("p",{className:"text-destructive text-xs sm:text-sm",children:s.username})]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h3",{className:"text-lg font-semibold text-foreground mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center text-primary text-sm font-bold",children:"2"}),"Contact Information"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"email",className:"text-sm font-medium text-foreground",children:"Email Address *"}),e.jsx(m,{type:"email",id:"email",name:"email",value:r.email,onChange:o,placeholder:"Enter your email",className:`h-11 sm:h-12 text-sm sm:text-base ${s.email?"border-destructive":""}`}),s.email&&e.jsx("p",{className:"text-destructive text-xs sm:text-sm",children:s.email})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"phone",className:"text-sm font-medium text-foreground",children:"Phone Number *"}),e.jsx(m,{type:"text",inputMode:"tel",id:"phone",name:"phone",value:r.phone,onChange:o,placeholder:"10-digit phone number",className:`h-11 sm:h-12 text-sm sm:text-base ${s.phone?"border-destructive":""}`}),s.phone&&e.jsx("p",{className:"text-destructive text-xs sm:text-sm",children:s.phone})]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h3",{className:"text-lg font-semibold text-foreground mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center text-primary text-sm font-bold",children:"3"}),"Security"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"password",className:"text-sm font-medium text-foreground",children:"Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx(m,{type:C?"text":"password",id:"password",name:"password",value:r.password,onChange:o,onFocus:()=>P(!0),onBlur:()=>P(!1),placeholder:"Create a strong password",className:`h-11 sm:h-12 text-sm sm:text-base pr-10 ${s.password?"border-destructive":""}`}),e.jsx(S,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 hover:bg-transparent",onClick:()=>D(l=>!l),tabIndex:-1,children:C?e.jsx(J,{className:"h-4 w-4"}):e.jsx(U,{className:"h-4 w-4"})})]}),s.password&&e.jsx("p",{className:"text-destructive text-xs sm:text-sm",children:s.password}),(F||y)&&e.jsxs("div",{className:"mt-3 space-y-3",children:[y&&e.jsxs("div",{children:[e.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${h()<=2?"bg-destructive":h()<=4?"bg-yellow-500":"bg-green-500"}`,style:{width:`${h()/x.length*100}%`}})}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Password strength: ",h(),"/",x.length]})]}),F&&e.jsxs("div",{className:"bg-muted/30 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs font-medium text-foreground mb-2",children:"Password requirements:"}),e.jsx("ul",{className:"space-y-1",children:x.map((l,t)=>e.jsxs("li",{className:`text-xs flex items-center gap-2 ${u[t]?"text-green-600":"text-muted-foreground"}`,children:[u[t]?e.jsx(R,{className:"h-3 w-3"}):e.jsx(q,{className:"h-3 w-3"}),l.label]},l.label))})]})]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h3",{className:"text-lg font-semibold text-foreground mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center text-primary text-sm font-bold",children:"4"}),"Address Information"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"address",className:"text-sm font-medium text-foreground",children:"Address *"}),e.jsx(M,{id:"address",name:"address",value:r.address,onChange:o,placeholder:"Enter your complete address",rows:3,className:`text-sm sm:text-base resize-none ${s.address?"border-destructive":""}`}),s.address&&e.jsx("p",{className:"text-destructive text-xs sm:text-sm",children:s.address})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"city",className:"text-sm font-medium text-foreground",children:"City *"}),e.jsx(m,{type:"text",id:"city",name:"city",value:r.city,onChange:o,placeholder:"Enter city",className:`h-11 sm:h-12 text-sm sm:text-base ${s.city?"border-destructive":""}`}),s.city&&e.jsx("p",{className:"text-destructive text-xs sm:text-sm",children:s.city})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"state",className:"text-sm font-medium text-foreground",children:"State *"}),e.jsx(m,{type:"text",id:"state",name:"state",value:r.state,onChange:o,placeholder:"Enter state",className:`h-11 sm:h-12 text-sm sm:text-base ${s.state?"border-destructive":""}`}),s.state&&e.jsx("p",{className:"text-destructive text-xs sm:text-sm",children:s.state})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"country",className:"text-sm font-medium text-foreground",children:"Country *"}),e.jsx(m,{type:"text",id:"country",name:"country",value:r.country,onChange:o,placeholder:"Enter country",className:`h-11 sm:h-12 text-sm sm:text-base ${s.country?"border-destructive":""}`}),s.country&&e.jsx("p",{className:"text-destructive text-xs sm:text-sm",children:s.country})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"pincode",className:"text-sm font-medium text-foreground",children:"Pincode *"}),e.jsx(m,{type:"text",inputMode:"numeric",pattern:"\\d{6}",id:"pincode",name:"pincode",value:r.pincode,onChange:o,placeholder:"6-digit pincode",className:`h-11 sm:h-12 text-sm sm:text-base ${s.pincode?"border-destructive":""}`}),s.pincode&&e.jsx("p",{className:"text-destructive text-xs sm:text-sm",children:s.pincode})]})]})]})]}),e.jsx(S,{type:"submit",className:"w-full h-11 sm:h-12 text-sm sm:text-base font-medium",disabled:v||w||!X,children:v?e.jsxs(e.Fragment,{children:[e.jsx(k,{className:"w-4 h-4 mr-2 animate-spin"}),"Creating Account..."]}):w?"Validating Details...":"Create Account"})]}),e.jsx("div",{className:"mt-6 pt-6 border-t border-border",children:e.jsxs("p",{className:"text-center text-sm text-muted-foreground",children:["Already have an account?"," ",e.jsx("a",{href:"/login",className:"text-primary hover:underline font-medium",children:"Sign in"})]})})]})]})}),e.jsx("footer",{className:"mt-auto",children:e.jsx(z,{})})]})};export{se as default};
