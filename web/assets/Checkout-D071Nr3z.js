import{r as o,j as e,v as Le,Q as $e}from"./vendor-react-Bk0qDDMD.js";import{C as Be}from"./dropdown-menu-Dae-Y6FG.js";import{T as Re}from"./TopNav-CB2ZnTw2.js";import{b as be,u as He,A as j,e as N,c as u,B as q}from"./index-Bzbs1pXN.js";import Me from"./Addresses-S-xVdIrf.js";import{D as Ue,a as Xe,b as Je,c as We,d as ze}from"./dialog-CLX5gY7u.js";import{I as k}from"./input-Cpcu6Bjn.js";import{L as x}from"./label-COuHthBN.js";import{u as je,v as Ne,w as Qe}from"./vendor-radix-B6Rg7jVq.js";import{a5 as Ve,I as Ye}from"./vendor-icons-FTV6Dp_q.js";import{T as Ge}from"./textarea-Ds-7KeaI.js";import"./vendor-base-ui-BXIcfa4M.js";import"./NavBar-CnkV8-sD.js";import"./vendor-motion-DKNEqpS6.js";import"./TopBar-CaoAhFRU.js";import"./vendor-pdf-CtkwMsdI.js";import"./vendor-charts-DTq7uDuz.js";import"./badge-BCB6vZm7.js";import"./card-CEH0XzyS.js";import"./input-group-BDw_1XBF.js";import"./switch-DKrHyWEZ.js";const le=o.forwardRef(({className:A,...B},D)=>e.jsx(je,{className:be("grid gap-2",A),...B,ref:D}));le.displayName=je.displayName;const $=o.forwardRef(({className:A,...B},D)=>e.jsx(Ne,{ref:D,className:be("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",A),...B,children:e.jsx(Qe,{className:"flex items-center justify-center",children:e.jsx(Ve,{className:"h-2.5 w-2.5 fill-current text-current"})})}));$.displayName=Ne.displayName;const ys=()=>{const{effectiveTheme:A}=He(),B=Le(),[D,v]=o.useState(!1),[H,ve]=o.useState(0),[R,G]=o.useState(0),[_,Z]=o.useState(0),[l,y]=o.useState([]),[oe,ce]=o.useState(null),[O,Se]=o.useState("Home Delivery"),[M,Ce]=o.useState("UPI"),[F,we]=o.useState(null),[K,U]=o.useState(!1),[de,me]=o.useState(null),[X,ue]=o.useState(300),[pe,ke]=o.useState(null),[xe,Ie]=o.useState(null),[r,ee]=o.useState({name:"",address:"",city:"",state:"",pincode:"",mobile:"",email:"",country:"",notes:"",userAddressId:null}),[J,se]=o.useState(null),[g,he]=o.useState({}),[S,te]=o.useState(!1),[Pe,re]=o.useState(!1),[ae,W]=o.useState([]),[ne,fe]=o.useState(""),[m,E]=o.useState(null),[z,Q]=o.useState([]),[ge,V]=o.useState(0),[Y,I]=o.useState(0),T=s=>{const a=localStorage.getItem("token");if(!a)return;const n={id:J??void 0,mobile:r.mobile,email:r.email,name:r.name,products:s,createdBy:r.name,updatedBy:r.name,token:a};j.postData({endpoint:"/order/save-cart",body:{request:N(n)},successCallback:t=>{t.id&&se(t.id)},errorCallback:t=>{console.error("Error saving cart:",t)}})};o.useEffect(()=>{r.mobile&&r.mobile.length>=10&&j.postData({endpoint:"/order/pending-order",body:{request:N({token:localStorage.getItem("token")})},successCallback:s=>{if(s?.products&&Array.isArray(s.products)&&s.products.length>0){const a=[...s.products];l.forEach(n=>{const t=a.findIndex(i=>i.productId===n.productId&&i.priceList?.id===n.priceList?.id);t===-1?a.push(n):a[t].quantity=n.quantity}),y(a),localStorage.setItem("cart",JSON.stringify(a))}se(s.cartId||null)},errorCallback:s=>{console.error("Error fetching pending order:",s)}})},[r.mobile]),o.useEffect(()=>{K&&X===0&&(U(!1),r.mobile&&r.mobile.length>=10&&j.postData({endpoint:"/order/pending-order",body:{request:N({mobile:r.mobile})},successCallback:s=>{s?.products&&Array.isArray(s.products)&&s.products.length>0&&y(s.products),se(s.cartId||null),u.error("The Payment Session Expired. Please click Place Order again to pay.",{duration:5e3})},errorCallback:s=>{console.error("Error fetching pending order:",s)}}))},[X,K,l]);const De=()=>{U(!1),F!==null&&ce({id:F}),y([]),Oe(),localStorage.removeItem("cart")},Oe=()=>{if(!xe.id||!pe.id)return;const s=localStorage.getItem("token"),a={id:J??void 0,...xe,status:"Ordered",token:s||void 0,mobile:r.mobile,email:r.email,name:r.name,products:l,createdBy:r.name,updatedBy:r.name};j.postData({endpoint:"/order/save-cart",body:{request:N(a)},successCallback:n=>{n.id==null&&u.error("Cart update failed!");const t={id:F??void 0,...pe,mobile:r.mobile,email:r.email,name:r.name,products:l,createdBy:r.name,updatedBy:r.name,status:"Payment Processed",token:s||void 0,couponId:m?m.id:void 0};j.postData({endpoint:"/order/place-order",body:{request:N(t)},successCallback:i=>{i.id==null&&u.error("Order update failed!")},errorCallback:()=>{u.error("Order update failed!")}})},errorCallback:()=>{u.error("Cart creation failed!")}})},ye=()=>{const s=localStorage.getItem("token");s?j.postData({endpoint:"/user/default-address",body:{request:N({token:s})},successCallback:a=>{a&&(ee(n=>({...n,name:a.name||n.name,address:a.addressLine1||n.address,city:a.city||n.city,state:a.state||n.state,pincode:a.pincode||n.pincode,mobile:a.phone||n.mobile,email:a.email||n.email,userAddressId:a.id,country:a.country})),te(!0))},errorCallback:a=>{console.error("Error fetching default address:",a),te(!1)}}):te(!1)},qe=()=>{const s=localStorage.getItem("token");if(l.length>0){const a=l.map(t=>t.productId).filter(t=>t!==void 0),n=s?[]:["New Users"];j.postData({endpoint:"/order/get-coupons",body:{request:N({products:a,token:s||void 0,users:n})},successCallback:t=>{t.coupons&&Array.isArray(t.coupons)?W(t.coupons):W([])},errorCallback:t=>{console.error("Error fetching coupons:",t),W([])}})}else W([])};o.useEffect(()=>{ye()},[]),o.useEffect(()=>{qe()},[l]),o.useEffect(()=>{try{const s=localStorage.getItem("cart");s&&y(JSON.parse(s))}catch{y([])}},[]),o.useEffect(()=>{const s=l.reduce((i,c)=>c.priceList&&typeof c.priceList.unitprice=="number"?i+c.priceList.unitprice*c.quantity:i,0);ve(s);let a=[],n=0;const t=localStorage.getItem("token");if(m){if(l.length>0){const i=l.map(p=>p.productId).filter(p=>p!==void 0),c=t?[]:["New Users"];j.postData({endpoint:"/order/get-coupons",body:{request:N({couponCode:m.code,products:i,token:t||void 0,users:c})},successCallback:p=>{if(p.coupons&&Array.isArray(p.coupons)){const h=m.products.map(d=>d.id);l.forEach((d,P)=>{let w=0;d.productId&&h.includes(d.productId)&&m.discounts.forEach(f=>{if(f.name==="Shipping"&&f.flatrate===!0)I(R===99?99-f.discount:0);else if(f.name==="Shipping"&&f.flatrate===!1)if(R>=99){const ie=f.discount/100*99;I(ie)}else I(99);else if(f.name==="Product Discount"&&f.flatrate===!0)w+=(d.priceList.unitprice-f.discount)*d.quantity;else if(f.name==="Product Discount"&&f.flatrate===!1){const ie=d.priceList?.unitprice?d.priceList.unitprice*d.quantity:0;w+=ie*(f.discount/100)}}),a[P]=w,n+=w,Q(a),V(n);const L=m&&m.discounts.some(f=>f.name==="Shipping")?99-Y:s>=999?0:l.length>0&&O==="Home Delivery"?99:0;G(L),Z(s-n+L)})}},errorCallback:p=>{E(null),Q(a),V(n);const d=m&&m.discounts.some(P=>P.name==="Shipping")?99-Y:s>=999?0:l.length>0&&O==="Home Delivery"?99:0;G(d),Z(s-n+d)}})}}else{a=l.map(()=>0),Q(a),V(n);const c=m&&m.discounts.some(p=>p.name==="Shipping")?99-Y:s>=999?0:l.length>0&&O==="Home Delivery"?99:0;G(c),Z(s-n+c)}},[l,O,M,m,Y]);const Ae=()=>{const s={};return r.name?/^[A-Za-z ]+$/.test(r.name)||(s.name="Name must contain only alphabets."):s.name="Name is required.",r.address||(s.address="Address is required."),r.city||(s.city="City is required."),r.state||(s.state="State is required."),r.pincode?/^[0-9]{6}$/.test(r.pincode)||(s.pincode="Pincode must be 6 digits."):s.pincode="Pincode is required.",r.mobile?r.mobile.match(/^\\+[0-9]{1,2} ?[0-9]{10}$/)||r.mobile.match(/^[0-9]{10}$/)||(s.mobile="Mobile must be 10 digits or in format +CC XXXXXXXXXX."):s.mobile="Mobile is required.",s},C=s=>{const{name:a,value:n}=s.target;let t=n;a==="pincode"&&(t=t.replace(/[^0-9]/g,"").slice(0,6)),a==="mobile"&&(t.startsWith("+")?(t=t.replace(/[^+0-9 ]/g,""),t="+"+t.slice(1).replace(/\+/g,""),t=t.replace(/^\+(\d{1,2})( ?)(\d{0,10}).*$/,(i,c,p,h)=>`+${c}${p}${h}`)):t=t.replace(/[^0-9]/g,"").slice(0,10)),ee({...r,[a]:t}),he({...g,[a]:""})},Fe=async()=>{if(ue(300),D)return;v(!0);const s=Ae();if(l.length===0){u.error("Your cart is empty. Please add items before placing an order."),v(!1);return}if(he(s),Object.keys(s).length===0){const a=localStorage.getItem("token"),n=!!a,t=(i,c)=>{const p={id:F??void 0,name:r.name,address:r.address,city:r.city,state:r.state,pincode:r.pincode,mobile:r.mobile,email:r.email,country:r.country,notes:r.notes,shippingMethod:O,paymentMethod:M,cartId:i,userAddressId:r.userAddressId,status:"Ordered",token:c||void 0,couponId:m?m.id:void 0};j.postData({endpoint:"/order/place-order",body:{request:N(p)},successCallback:h=>{if(!h.id){u.error("Order creation failed!"),v(!1);return}if(M==="UPI"){we(h.id),U(!0),Ie({id:i}),ke(h),v(!1),de&&(clearInterval(de),me(null));const d=setInterval(()=>{ue(P=>P>0?P-1:0)},1e3);me(d)}else u.success("Order placed successfully! Order ID: "+h.id),ee({name:"",address:"",city:"",state:"",pincode:"",mobile:"",email:"",country:"",notes:"",userAddressId:null}),y([]),localStorage.removeItem("cart"),ce({id:h.id}),v(!1)},errorCallback:h=>{console.error("Error placing order",h),u.error("Order creation failed!"),v(!1)}})};if(n)if(J)t(J,a);else{const i={id:void 0,mobile:r.mobile,email:r.email,name:r.name,products:l,createdBy:r.name,updatedBy:r.name,token:a};j.postData({endpoint:"/order/save-cart",body:{request:N(i)},successCallback:c=>{if(!c.id){u.error("Cart creation failed!"),v(!1);return}t(c.id,a)},errorCallback:c=>{console.error("Error saving cart",c),u.error("Cart creation failed!"),v(!1)}})}else{const i={id:void 0,mobile:r.mobile,email:r.email,name:r.name,products:l,createdBy:r.name,updatedBy:r.name,token:void 0};j.postData({endpoint:"/order/save-cart",body:{request:N(i)},successCallback:c=>{if(!c.id){u.error("Cart creation failed!"),v(!1);return}t(c.id,a)},errorCallback:c=>{console.error("Error saving cart",c),u.error("Cart creation failed!"),v(!1)}})}}else u.error("Please check the form for any mistakes.",{duration:3e3}),v(!1)},Ee=()=>{if(!ne.trim())return;const s=localStorage.getItem("token");if(l.length>0){const a=l.map(t=>t.productId).filter(t=>t!==void 0),n=s?[]:["New Users"];j.postData({endpoint:"/order/get-coupons",body:{request:N({couponCode:ne,products:a,token:s||void 0,users:n})},successCallback:t=>{if(t.coupons&&Array.isArray(t.coupons)&&t.coupons.length>0){const i=t.coupons[0];E(i),fe(""),u.success(`Coupon ${i.code} applied!`);let c=[],p=0;const h=i.products.map(d=>d.id);l.forEach((d,P)=>{let w=0;d.productId&&h.includes(d.productId)&&i.discounts.forEach(b=>{if(b.name==="Shipping"&&b.flatrate===!0)I(R===99?99:0);else if(b.name==="Shipping"&&b.flatrate===!1)if(R===99){const L=b.discount/100*99;I(L)}else I(0);else if(b.name==="Product Discount"&&b.flatrate===!0)w+=Math.round((d.priceList.unitprice-b.discount)*d.quantity);else if(b.name==="Product Discount"&&b.flatrate===!1){const L=d.priceList?.unitprice?d.priceList.unitprice*d.quantity:0;w+=Math.round(L*(b.discount/100))}}),c[P]=w,p+=w}),Q(c),V(p)}else E(null),u.error("Invalid Coupon Code")},errorCallback:t=>{E(null),u.error("Error applying coupon")}})}},Te=()=>{B("/")};return e.jsxs(e.Fragment,{children:[e.jsx(Re,{}),oe?e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"container flex flex-col items-center justify-center justify-center-safe py-12 justify-self-center min-h-screen",children:[e.jsx("div",{className:"text-center mb-6",children:e.jsx(Ye,{className:"h-32 w-32 text-green-500 mx-auto"})}),e.jsx("h2",{className:"mt-6 text-2xl font-semibold text-green-600",children:"Order Placed Successfully"}),e.jsx("h4",{className:"mt-2 text-lg",children:"We will contact you within 24hrs for the payment confirmation, and the order will be processed within 3 working days."}),e.jsx("h4",{className:"mt-2",children:"You can get updates on WhatsApp on the status of the order."}),e.jsx("h4",{className:"mt-2",children:"This is a homemade food buisness start up so please bear with us for any small delays. But we guarantee the best quality."}),e.jsxs("h4",{className:"mt-4 text-lg font-medium",children:["Order ID: ",oe.id]}),e.jsx(q,{variant:"outline",className:"py-3 px-4 mt-6 text-white hover:text-black bg-primary border-gray-400 hover:bg-green-50",onClick:Te,children:"Continue Shopping"})]})}):e.jsxs(e.Fragment,{children:[K?e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-background border border-border rounded-xl p-4 sm:p-6 lg:p-8 max-w-sm sm:max-w-md lg:max-w-lg w-full mx-auto shadow-2xl",children:[e.jsxs("div",{className:"text-center mb-4 sm:mb-6",children:[e.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 mx-auto mb-3 bg-primary/10 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-xl sm:text-2xl",children:"⏰"})}),e.jsx("h1",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-foreground",children:"Time remaining"}),e.jsxs("div",{className:"text-2xl sm:text-3xl lg:text-4xl font-mono font-bold text-primary mt-2",children:[Math.floor(X/60),":",(X%60).toString().padStart(2,"0")]})]}),e.jsxs("div",{className:"text-center mb-4 sm:mb-6",children:[e.jsx("p",{className:"text-sm sm:text-base text-muted-foreground mb-3",children:"Complete your payment using the QR code below"}),e.jsx("div",{className:"bg-muted/50 rounded-lg p-3 mb-4",children:e.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground",children:["Please share a screenshot of the payment on WhatsApp to"," ",e.jsx("a",{className:"text-primary hover:underline font-medium",href:"https://wa.me/+919363720792",target:"_blank",rel:"noopener noreferrer",children:"+91 93637-20792"})," ","for us to start processing the order"]})})]}),e.jsx("div",{className:"flex justify-center mb-4 sm:mb-6",children:e.jsx("div",{className:"bg-background p-3 rounded-xl border border-border",children:e.jsx($e,{value:`upi://pay?pa=renugarenuga36-1@okhdfcbank&pn=Renus Home Foods&tn=Renus Home Foods Order ID ${F}&am=${_}`,size:180,qrStyle:"dots",eyeRadius:10,logoPaddingStyle:"circle",logoImage:"/img/logo.webp"})})}),e.jsxs("div",{className:"bg-muted/30 rounded-lg p-3 mb-4 text-center",children:[e.jsxs("div",{className:"text-sm sm:text-base font-semibold text-foreground",children:["Order ID: #",F]}),e.jsxs("div",{className:"text-lg sm:text-xl font-bold text-primary",children:["Total: ₹",_.toFixed(2)]})]}),e.jsx(q,{className:"w-full h-12 sm:h-14 text-sm sm:text-base font-semibold",onClick:De,children:"Confirm Payment"}),e.jsx("div",{className:"text-center mt-3",children:e.jsx("button",{onClick:()=>U(!1),className:"text-sm text-muted-foreground hover:text-foreground transition-colors",children:"Close and try again later"})})]})}):e.jsx(e.Fragment,{}),e.jsx("div",{className:"container mx-auto px-4 pt-6 pb-5",children:e.jsxs("div",{className:"py-4",children:[e.jsxs("div",{className:"mb-6 lg:mb-8",children:[e.jsx("h1",{className:"text-2xl lg:text-3xl font-bold",children:"Billing details"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Complete your order information"})]}),e.jsx("form",{action:"#",onSubmit:s=>s.preventDefault(),children:e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-5 gap-6 lg:gap-8",children:[e.jsxs("div",{className:"xl:col-span-3 space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(x,{htmlFor:"name",className:"text-sm font-medium",children:["Name",e.jsx("sup",{children:"*"})]}),e.jsx(k,{type:"text",id:"name",name:"name",value:r.name,onChange:C,disabled:S,className:"w-full h-11 text-sm",placeholder:"Enter your full name"}),g.name&&e.jsx("div",{className:"text-sm text-red-600 mt-1",children:g.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(x,{htmlFor:"mobile",className:"text-sm font-medium",children:["Mobile",e.jsx("sup",{children:"*"})]}),e.jsx(k,{type:"tel",id:"mobile",name:"mobile",value:r.mobile,onChange:C,inputMode:"tel",pattern:"(\\+[0-9]{1,2} ?)?[0-9]{10}",disabled:S,className:"w-full h-11 text-sm",placeholder:"10 digit mobile number"}),g.mobile&&e.jsx("div",{className:"text-sm text-red-600 mt-1",children:g.mobile})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(x,{htmlFor:"address",className:"text-sm font-medium",children:["Address ",e.jsx("sup",{children:"*"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx(k,{type:"text",id:"address",name:"address",value:r.address,onChange:C,placeholder:"House Number, Street Name, Area",disabled:S,className:"flex-1 h-11 text-sm"}),S&&e.jsx(q,{variant:"outline",onClick:()=>re(!0),className:`sm:w-auto w-full h-11 text-green-600 border-green-600 ${A==="dark"?"hover:bg-primary":"hover:bg-green-50"}`,children:"Change"})]}),g.address&&e.jsx("div",{className:"text-sm text-red-600 mt-1",children:g.address})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(x,{htmlFor:"city",className:"text-sm font-medium",children:["Town/City",e.jsx("sup",{children:"*"})]}),e.jsx(k,{type:"text",id:"city",name:"city",value:r.city,onChange:C,disabled:S,className:"w-full h-11 text-sm",placeholder:"Enter City"}),g.city&&e.jsx("div",{className:"text-sm text-red-600 mt-1",children:g.city})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(x,{htmlFor:"state",className:"text-sm font-medium",children:["State",e.jsx("sup",{children:"*"})]}),e.jsx(k,{type:"text",id:"state",name:"state",value:r.state,onChange:C,disabled:S,className:"w-full h-11 text-sm",placeholder:"Enter State"}),g.state&&e.jsx("div",{className:"text-sm text-red-600 mt-1",children:g.state})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(x,{htmlFor:"pincode",className:"text-sm font-medium",children:["Pincode",e.jsx("sup",{children:"*"})]}),e.jsx(k,{type:"text",id:"pincode",name:"pincode",value:r.pincode,onChange:C,inputMode:"numeric",pattern:"[0-9]*",disabled:S,className:"w-full h-11 text-sm",placeholder:"6 digit Pincode"}),g.pincode&&e.jsx("div",{className:"text-sm text-red-600 mt-1",children:g.pincode})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"country",className:"text-sm font-medium",children:"Country"}),e.jsx(k,{type:"text",id:"country",name:"country",value:r.country,onChange:C,disabled:S,className:"w-full"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"email",className:"text-sm font-medium",children:"Email Address"}),e.jsx(k,{type:"email",id:"email",name:"email",value:r.email,onChange:C,disabled:S,className:"w-full"})]})]}),e.jsxs("div",{className:"space-y-2 pt-6",children:[e.jsx(x,{htmlFor:"notes",className:"text-sm font-medium",children:"Delivery Notes (Optional)"}),e.jsx(Ge,{id:"notes",name:"notes",placeholder:"Delivery Notes (Optional)",value:r.notes,onChange:C,rows:5,className:"resize-none"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs(x,{className:"text-sm font-medium",children:["Shipping Method",e.jsx("sup",{children:"*"})]}),e.jsxs(le,{value:O,onValueChange:s=>Se(s),className:"space-y-1 pt-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($,{value:"Home Delivery",id:"Shipping-Home"}),e.jsx(x,{htmlFor:"Shipping-Home",className:"text-sm font-normal cursor-pointer",children:"Home Delivery"}),O==="Home Delivery"&&H<999&&H>0&&e.jsxs("div",{className:"text-sm text-red-600 ml-4",children:["Add Products worth ₹",999-H," or more to get free shipping"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($,{value:"Free Store Pickup",id:"Shipping-Store"}),e.jsx(x,{htmlFor:"Shipping-Store",className:"text-sm font-normal cursor-pointer",children:"Free Store Pickup"})]})]})]}),e.jsxs("div",{className:"space-y-4 pt-6 border-b pb-2",children:[e.jsx("h4",{className:"text-lg font-semibold",children:"Payment Option"}),e.jsxs(le,{value:M,onValueChange:Ce,className:"space-y-1",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($,{value:"Direct Bank Transfer",id:"Payment-Bank"}),e.jsx(x,{htmlFor:"Payment-Bank",className:"text-sm font-normal cursor-pointer",children:"Direct Bank Transfer"})]}),e.jsx("div",{className:"text-sm text-gray-600 ml-6",children:"Order will be processed once the amount is checked cleared in our accounts. Please include the order ID shown after placing the order in your payment remarks"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($,{value:"UPI",id:"Payment-UPI"}),e.jsx(x,{htmlFor:"Payment-UPI",className:"text-sm font-normal cursor-pointer",children:"UPI/Google Pay/Paytm/PhonePe QR"})]}),e.jsx("div",{className:"text-sm text-gray-600 ml-6",children:"Pay Using the QR Shown after placing the order and confirm the order after payment"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($,{value:"Cash on Delivery",id:"Payment-COD"}),e.jsx(x,{htmlFor:"Payment-COD",className:"text-sm font-normal cursor-pointer",children:"Cash on Delivery (COD)"})]}),e.jsx("div",{className:"text-sm text-gray-600 ml-6",children:"Order will be processed after personal confirmation of the order through phone."})]})]})]})]}),e.jsxs("div",{className:"xl:col-span-2",children:[e.jsxs("div",{className:"bg-card rounded-lg border border-border overflow-hidden",children:[e.jsxs("div",{className:"p-4 lg:p-6 border-b border-border",children:[e.jsx("h2",{className:"text-lg lg:text-xl font-semibold",children:"Order Summary"}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[l.length," items in your cart"]})]}),e.jsx("div",{className:"lg:hidden",children:e.jsx("div",{className:"divide-y divide-border max-h-96 overflow-y-auto",style:{scrollbarWidth:"thin",paddingRight:"24px"},children:l.length===0?e.jsx("div",{className:"p-6 text-center text-muted-foreground",children:"Your cart is empty."}):l.map((s,a)=>e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-16 h-16 bg-muted rounded-lg overflow-hidden flex-shrink-0",children:e.jsx("img",{src:s.image?`/static/inventory/${s.image}`:"/img/logo.webp",alt:s.name||"Product",className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-medium text-sm truncate",children:s.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.priceList?.weight}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsxs("span",{className:"text-sm font-medium",children:["₹",s.priceList?.unitprice]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",className:"w-6 h-6 rounded-full border border-border flex items-center justify-center text-xs hover:bg-accent",onClick:()=>{if(s.quantity>1){const n=l.map((t,i)=>i===a?{...t,quantity:t.quantity-1}:t);y(n),localStorage.setItem("cart",JSON.stringify(n)),T(n)}else{const n=l.filter((t,i)=>i!==a);y(n),localStorage.setItem("cart",JSON.stringify(n)),T(n)}},children:"-"}),e.jsx("span",{className:"text-sm font-medium min-w-[2rem] text-center",children:s.quantity}),e.jsx("button",{type:"button",className:"w-6 h-6 rounded-full border border-border flex items-center justify-center text-xs hover:bg-accent",onClick:()=>{const n=l.map((t,i)=>i===a?{...t,quantity:t.quantity+1}:t);y(n),localStorage.setItem("cart",JSON.stringify(n)),T(n)},children:"+"})]})]}),e.jsxs("div",{className:"text-right mt-1",children:[e.jsxs("span",{className:"text-sm font-semibold",children:["₹",s.priceList?.unitprice?s.priceList.unitprice*s.quantity:0]}),z[a]>0&&e.jsxs("div",{className:"text-xs text-green-600",children:["(-₹",z[a].toFixed(2),")"]})]})]})]})},a))})}),e.jsx("div",{className:"hidden lg:block max-h-96 overflow-y-auto",style:{scrollbarWidth:"thin",paddingRight:"24px"},children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"sticky top-0 bg-card z-10",children:e.jsxs("tr",{className:"border-b border-border",children:[e.jsx("th",{className:"text-left p-3 text-sm font-medium",children:"Product"}),e.jsx("th",{className:"text-left p-3 text-sm font-medium",children:"Weight"}),e.jsx("th",{className:"text-left p-3 text-sm font-medium",children:"Price"}),e.jsx("th",{className:"text-center p-3 text-sm font-medium",children:"Qty"}),e.jsx("th",{className:"text-right p-3 text-sm font-medium",children:"Total"})]})}),e.jsx("tbody",{children:l.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"text-center p-6 text-muted-foreground",children:"Your cart is empty."})}):l.map((s,a)=>e.jsxs("tr",{className:"border-b border-border hover:bg-accent/50",children:[e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-10 h-10 bg-muted rounded overflow-hidden",children:e.jsx("img",{src:s.image?`/static/inventory/${s.image}`:"/img/logo.webp",alt:s.name||"Product",className:"w-full h-full object-cover"})}),e.jsx("span",{className:"text-sm font-medium truncate",children:s.name})]})}),e.jsx("td",{className:"p-3 text-sm text-muted-foreground",children:s.priceList?.weight}),e.jsxs("td",{className:"p-3 text-sm",children:["₹",s.priceList?.unitprice]}),e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx("button",{type:"button",className:"w-6 h-6 rounded border border-border flex items-center justify-center text-xs hover:bg-accent",onClick:()=>{if(s.quantity>1){const n=l.map((t,i)=>i===a?{...t,quantity:t.quantity-1}:t);y(n),localStorage.setItem("cart",JSON.stringify(n)),T(n)}else{const n=l.filter((t,i)=>i!==a);y(n),localStorage.setItem("cart",JSON.stringify(n)),T(n)}},children:"-"}),e.jsx("span",{className:"text-sm font-medium min-w-[2rem] text-center",children:s.quantity}),e.jsx("button",{type:"button",className:"w-6 h-6 rounded border border-border flex items-center justify-center text-xs hover:bg-accent",onClick:()=>{const n=l.map((t,i)=>i===a?{...t,quantity:t.quantity+1}:t);y(n),localStorage.setItem("cart",JSON.stringify(n)),T(n)},children:"+"})]})}),e.jsx("td",{className:"p-3 text-sm text-right",children:e.jsxs("div",{children:["₹",s.priceList?.unitprice?s.priceList.unitprice*s.quantity:0,z[a]>0&&e.jsxs("div",{className:"text-xs text-green-600",children:["(-₹",z[a].toFixed(2),")"]})]})})]},a))})]})})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:"bg-muted/30 rounded-lg p-3 lg:p-4",children:e.jsx("table",{className:`w-full ${A==="dark"?"table-dark":""}`,children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{colSpan:4,className:"text-end align-middle",children:e.jsx("strong",{children:"Subtotal"})}),e.jsxs("td",{colSpan:2,className:"text-end align-middle",children:["₹",H.toFixed(2)]})]}),m&&ge>0&&e.jsxs("tr",{children:[e.jsx("td",{colSpan:4,className:"text-end align-middle",children:e.jsxs("strong",{children:["Discount (",m.code,")"]})}),e.jsxs("td",{colSpan:2,className:"text-end align-middle",children:["-₹",ge.toFixed(2)]})]}),e.jsxs("tr",{children:[e.jsx("td",{colSpan:4,className:"text-end align-middle",children:e.jsx("strong",{children:"Shipping"})}),e.jsxs("td",{colSpan:2,className:"text-end align-middle",children:["₹",R.toFixed(2)]})]}),e.jsxs("tr",{children:[e.jsx("td",{colSpan:4,className:"text-end align-middle",children:e.jsx("strong",{children:"Total"})}),e.jsx("td",{colSpan:2,className:"text-end align-middle",children:e.jsxs("strong",{children:["₹",_.toFixed(2)]})})]})]})})}),e.jsxs("div",{className:"space-y-4 pt-4",children:[e.jsx(x,{className:"text-sm font-medium",children:"Coupons"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(k,{type:"text",placeholder:"Enter coupon code",value:ne,onChange:s=>fe(s.target.value),className:"flex-1"}),e.jsx(q,{type:"button",variant:"outline",onClick:Ee,className:"px-6",children:"Apply"})]}),ae.length>0&&e.jsx("div",{className:"max-h-48 overflow-y-auto border rounded-lg",style:{scrollbarWidth:"thin",paddingRight:"16px"},children:ae.map((s,a)=>{const n=s.discounts.map(t=>t.flatrate===!1&&t.discount>0?`${t.discount}% off ${t.name}`:t.flatrate===!0?`${t.name.replace("Discount","Price")} ₹${t.discount} Flat`:"").filter(t=>t).join(" & ");return e.jsxs("div",{className:`p-3 ${a===ae.length-1?"":"border-b"}`,children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:s.code}),e.jsx(q,{type:"button",size:"sm",variant:m&&m.id===s.id?"default":"outline",onClick:()=>{!m||m.id!==s.id?(E(s),u.success(`Coupon ${s.code} applied!`)):(E(null),u("Coupon removed."))},children:m&&m.id===s.id?"Remove":"Apply"})]}),n&&e.jsx("div",{className:"text-sm text-gray-600 mt-1",children:n})]},s.id)})})]})]}),e.jsx("div",{className:"pt-4",children:e.jsx(q,{type:"button",className:"w-full py-3 px-4 text-uppercase border-2 border-green-600 text-white hover:text-green-600 hover:bg-green-50",onClick:Fe,disabled:D,children:D?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"mr-2",children:"Placing Order..."}),e.jsx("div",{className:"inline-block w-4 h-4 border-2 border-green-600 border-t-transparent rounded-full animate-spin"})]}):"Place Order"})})]})]})]})})]})})]}),e.jsx(Ue,{open:Pe,onOpenChange:re,children:e.jsxs(Xe,{className:"max-w-4xl max-h-screen mt-4 mb-4 overflow-hidden",children:[e.jsx(Je,{children:e.jsx(We,{children:"Select Default Address"})}),e.jsx("div",{className:"overflow-y-auto max-h-screen",children:e.jsx(Me,{modalMode:!0})}),e.jsx(ze,{children:e.jsx(q,{variant:"outline",onClick:()=>{re(!1),ye()},children:"Close"})})]})}),e.jsx(Be,{})]})};export{ys as default};
