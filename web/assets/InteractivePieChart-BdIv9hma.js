const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/toImg-CxZveqTv.js","assets/rasterize-34PCWURX-Bcw9BwF6.js","assets/toCanvas-iqQjX25n.js","assets/vendor-react-Bk0qDDMD.js","assets/vendor-base-ui-BXIcfa4M.js","assets/index-Bzbs1pXN.js","assets/vendor-pdf-CtkwMsdI.js","assets/vendor-charts-DTq7uDuz.js","assets/vendor-radix-B6Rg7jVq.js","assets/vendor-icons-FTV6Dp_q.js","assets/vendor-motion-DKNEqpS6.js","assets/index-4jGJEv1G.css","assets/dropdown-menu-Dae-Y6FG.js","assets/toBlob-BVZSU584.js","assets/download-oYvCwz7N.js"])))=>i.map(i=>d[i]);
import{r as O,z as lr,j as S}from"./vendor-react-Bk0qDDMD.js";import{c as H,A as ir,e as sr,B as Ue,u as cr,b as Be}from"./index-Bzbs1pXN.js";import{_ as z,E as ur}from"./vendor-pdf-CtkwMsdI.js";import{D as Ve,a as ze,b as qe,e as He,c as X,d as dt}from"./dropdown-menu-Dae-Y6FG.js";import{ah as Ge,ai as Ie,aj as dr,a4 as ve,ak as ke,I as fr,a5 as mr}from"./vendor-icons-FTV6Dp_q.js";import{R as Pt,B as hr,Y as pr,X as gr,T as Tt,a as yr,P as wr,b as br,C as xr}from"./vendor-charts-DTq7uDuz.js";const Xe={normal:["#894829","#f69568","#d97706","#dc2626","#059669","#7c3aed","#db2777","#0891b2"]},ia=e=>{const t=e.reduce((r,n)=>r+(n.value||0),0);return t===0?e.map(r=>({...r,percentage:0})):e.map(r=>({...r,percentage:(r.value||0)/t*100}))},sa=(e,t)=>e.includes(t)?e.filter(n=>n!==t):[...e,t];class ca{intervalId=null;callback=null;start(t,r=3e4){this.stop(),this.callback=t,this.intervalId=setInterval(t,r)}stop(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null),this.callback=null}isRunning(){return this.intervalId!==null}getLastUpdateTime(){return null}}var k={image:new Map,background:new Map,resource:new Map,defaultStyle:new Map,baseStyle:new Map,computedStyle:new WeakMap,font:new Set,session:{styleMap:new Map,styleCache:new WeakMap,nodeMap:new Map}};function Sr(e="soft"){switch(k.session.__counterEpoch=(k.session.__counterEpoch||0)+1,e){case"auto":{k.session.styleMap=new Map,k.session.nodeMap=new Map;return}case"soft":{k.session.styleMap=new Map,k.session.nodeMap=new Map,k.session.styleCache=new WeakMap;return}case"full":return;case"disabled":{k.session.styleMap=new Map,k.session.nodeMap=new Map,k.session.styleCache=new WeakMap,k.computedStyle=new WeakMap,k.baseStyle=new Map,k.defaultStyle=new Map,k.image=new Map,k.background=new Map,k.resource=new Map,k.font=new Set;return}default:{k.session.styleMap=new Map,k.session.nodeMap=new Map,k.session.styleCache=new WeakMap;return}}}function ot(e){let t=e.match(/url\((['"]?)(.*?)(\1)\)/);if(!t)return null;let r=t[2].trim();return r.startsWith("#")?null:r}function Cr(e){if(!e||e==="none")return"";let t=e.replace(/translate[XY]?\([^)]*\)/g,"");return t=t.replace(/matrix\(([^)]+)\)/g,(r,n)=>{let o=n.split(",").map(a=>a.trim());return o.length!==6?`matrix(${n})`:(o[4]="0",o[5]="0",`matrix(${o.join(", ")})`)}),t=t.replace(/matrix3d\(([^)]+)\)/g,(r,n)=>{let o=n.split(",").map(a=>a.trim());return o.length!==16?`matrix3d(${n})`:(o[12]="0",o[13]="0",`matrix3d(${o.join(", ")})`)}),t.trim().replace(/\s{2,}/g," ")}function Le(e){if(/%[0-9A-Fa-f]{2}/.test(e))return e;try{return encodeURI(e)}catch{return e}}function vr(e="[snapDOM]",{ttlMs:t=5*6e4,maxEntries:r=12}={}){let n=new Map,o=0;function a(l,i,s){if(o>=r)return;let c=Date.now();(n.get(i)||0)>c||(n.set(i,c+t),o++,l==="warn"&&console&&console.warn?console.warn(`${e} ${s}`):console&&console.error&&console.error(`${e} ${s}`))}return{warnOnce(l,i){a("warn",l,i)},errorOnce(l,i){a("error",l,i)},reset(){n.clear(),o=0}}}var ft=vr("[snapDOM]",{ttlMs:3*6e4,maxEntries:10}),De=new Map,$e=new Map;function kr(e){return/^data:|^blob:|^about:blank$/i.test(e)}function $r(e,t){try{let r=typeof location<"u"&&location.href?location.href:"http://localhost/",n=t.includes("{url}")?t.split("{url}")[0]:t,o=new URL(n||".",r),a=new URL(e,r);if(a.origin===o.origin)return!0;let l=a.searchParams;if(l&&(l.has("url")||l.has("target")))return!0}catch{}return!1}function Er(e,t){if(!t||kr(e)||$r(e,t))return!1;try{let r=typeof location<"u"&&location.href?location.href:"http://localhost/",n=new URL(e,r);return typeof location<"u"?n.origin!==location.origin:!0}catch{return!!t}}function Mr(e,t){if(!t)return e;if(t.includes("{url}"))return t.replace("{urlRaw}",Le(e)).replace("{url}",encodeURIComponent(e));if(/[?&]url=?$/.test(t))return`${t}${encodeURIComponent(e)}`;if(t.endsWith("?"))return`${t}url=${encodeURIComponent(e)}`;if(t.endsWith("/"))return`${t}${Le(e)}`;let r=t.includes("?")?"&":"?";return`${t}${r}url=${encodeURIComponent(e)}`}function mt(e){return new Promise((t,r)=>{let n=new FileReader;n.onload=()=>t(String(n.result||"")),n.onerror=()=>r(new Error("read_failed")),n.readAsDataURL(e)})}function Ar(e,t){return[t.as||"blob",t.timeout??3e3,t.useProxy||"",t.errorTTL??8e3,e].join("|")}async function J(e,t={}){let r=t.as??"blob",n=t.timeout??3e3,o=t.useProxy||"",a=t.errorTTL??8e3,l=t.headers||{},i=!!t.silent;if(/^data:/i.test(e))try{if(r==="text")return{ok:!0,data:String(e),status:200,url:e,fromCache:!1};if(r==="dataURL")return{ok:!0,data:String(e),status:200,url:e,fromCache:!1,mime:String(e).slice(5).split(";")[0]||""};let[,h="",x=""]=String(e).match(/^data:([^,]*),(.*)$/)||[],w=/;base64/i.test(h)?atob(x):decodeURIComponent(x),b=new Uint8Array([...w].map(C=>C.charCodeAt(0))),g=new Blob([b],{type:(h||"").split(";")[0]||""});return{ok:!0,data:g,status:200,url:e,fromCache:!1,mime:g.type||""}}catch{return{ok:!1,data:null,status:0,url:e,fromCache:!1,reason:"special_url_error"}}if(/^blob:/i.test(e))try{let h=await fetch(e);if(!h.ok)return{ok:!1,data:null,status:h.status,url:e,fromCache:!1,reason:"http_error"};let x=await h.blob(),w=x.type||h.headers.get("content-type")||"";return r==="dataURL"?{ok:!0,data:await mt(x),status:h.status,url:e,fromCache:!1,mime:w}:r==="text"?{ok:!0,data:await x.text(),status:h.status,url:e,fromCache:!1,mime:w}:{ok:!0,data:x,status:h.status,url:e,fromCache:!1,mime:w}}catch{return{ok:!1,data:null,status:0,url:e,fromCache:!1,reason:"network"}}if(/^about:blank$/i.test(e))return r==="dataURL"?{ok:!0,data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR4nGMAAQAABQABDQottAAAAABJRU5ErkJggg==",status:200,url:e,fromCache:!1,mime:"image/png"}:{ok:!0,data:r==="text"?"":new Blob([]),status:200,url:e,fromCache:!1};let s=Ar(e,{as:r,timeout:n,useProxy:o,errorTTL:a}),c=$e.get(s);if(c&&c.until>Date.now())return{...c.result,fromCache:!0};c&&$e.delete(s);let u=De.get(s);if(u)return u;let f=Er(e,o)?Mr(e,o):e,m=t.credentials;if(!m)try{let h=typeof location<"u"&&location.href?location.href:"http://localhost/",x=new URL(e,h);m=typeof location<"u"&&x.origin===location.origin?"include":"omit"}catch{m="omit"}let y=new AbortController,p=setTimeout(()=>y.abort("timeout"),n),d=(async()=>{try{let h=await fetch(f,{signal:y.signal,credentials:m,headers:l});if(!h.ok){let b={ok:!1,data:null,status:h.status,url:f,fromCache:!1,reason:"http_error"};if(a>0&&$e.set(s,{until:Date.now()+a,result:b}),!i){let g=`${h.status} ${h.statusText||""}`.trim();ft.warnOnce(`http:${h.status}:${r}:${new URL(e,location?.href??"http://localhost/").origin}`,`HTTP error ${g} while fetching ${r} ${e}`)}return t.onError&&t.onError(b),b}if(r==="text")return{ok:!0,data:await h.text(),status:h.status,url:f,fromCache:!1};let x=await h.blob(),w=x.type||h.headers.get("content-type")||"";return r==="dataURL"?{ok:!0,data:await mt(x),status:h.status,url:f,fromCache:!1,mime:w}:{ok:!0,data:x,status:h.status,url:f,fromCache:!1,mime:w}}catch(h){let x=h&&typeof h=="object"&&"name"in h&&h.name==="AbortError"?String(h.message||"").includes("timeout")?"timeout":"abort":"network",w={ok:!1,data:null,status:0,url:f,fromCache:!1,reason:x};if(!/^blob:/i.test(e)&&a>0&&$e.set(s,{until:Date.now()+a,result:w}),!i){let b=`${x}:${r}:${new URL(e,location?.href??"http://localhost/").origin}`,g=x==="timeout"?`Timeout after ${n}ms. Consider increasing timeout or using a proxy for ${e}`:x==="abort"?`Request aborted while fetching ${r} ${e}`:`Network/CORS issue while fetching ${r} ${e}. A proxy may be required`;ft.errorOnce(b,g)}return t.onError&&t.onError(w),w}finally{clearTimeout(p),De.delete(s)}})();return De.set(s,d),d}async function jt(e,t={}){if(/^((repeating-)?(linear|radial|conic)-gradient)\(/i.test(e)||e.trim()==="none")return e;let r=ot(e);if(!r)return e;let n=Le(r);if(k.background.has(n)){let o=k.background.get(n);return o?`url("${o}")`:"none"}try{let o=await J(n,{as:"dataURL",useProxy:t.useProxy});return o.ok?(k.background.set(n,o.data),`url("${o.data}")`):(k.background.set(n,null),"none")}catch{return k.background.set(n,null),"none"}}var Nr=new Set(["meta","script","noscript","title","link","template"]),at=new Set(["meta","link","style","title","noscript","script","template","g","defs","use","marker","mask","clipPath","pattern","path","polygon","polyline","line","circle","ellipse","rect","filter","lineargradient","radialgradient","stop"]);function Lr(e){if(e=String(e).toLowerCase(),at.has(e)){let a={};return k.defaultStyle.set(e,a),a}if(k.defaultStyle.has(e))return k.defaultStyle.get(e);let t=document.getElementById("snapdom-sandbox");t||(t=document.createElement("div"),t.id="snapdom-sandbox",t.setAttribute("data-snapdom-sandbox","true"),t.setAttribute("aria-hidden","true"),t.style.position="absolute",t.style.left="-9999px",t.style.top="-9999px",t.style.width="0px",t.style.height="0px",t.style.overflow="hidden",document.body.appendChild(t));let r=document.createElement(e);r.style.all="initial",t.appendChild(r);let n=getComputedStyle(r),o={};for(let a of n){if(Rt(a))continue;let l=n.getPropertyValue(a);o[a]=l}return t.removeChild(r),k.defaultStyle.set(e,o),o}var Fr=/(?:^|-)(animation|transition)(?:-|$)/i,Pr=/^(--|view-timeline|scroll-timeline|animation-trigger|offset-|position-try|app-region|interactivity|overlay|view-transition|-webkit-locale|-webkit-user-(?:drag|modify)|-webkit-tap-highlight-color|-webkit-text-security)$/i,Tr=new Set(["cursor","pointer-events","touch-action","user-select","print-color-adjust","speak","reading-flow","reading-order","anchor-name","anchor-scope","container-name","container-type","timeline-scope"]);function Rt(e){let t=String(e).toLowerCase();return!!(Tr.has(t)||Pr.test(t)||Fr.test(t))}function Ye(e,t){if(t=String(t||"").toLowerCase(),at.has(t))return"";let r=[],n=Lr(t);for(let[o,a]of Object.entries(e)){if(Rt(o))continue;let l=n[o];a&&a!==l&&r.push(`${o}:${a}`)}return r.sort(),r.join(";")}function jr(e){let t=new Set;return e.nodeType!==Node.ELEMENT_NODE&&e.nodeType!==Node.DOCUMENT_FRAGMENT_NODE?[]:(e.tagName&&t.add(e.tagName.toLowerCase()),typeof e.querySelectorAll=="function"&&e.querySelectorAll("*").forEach(r=>t.add(r.tagName.toLowerCase())),Array.from(t))}function Rr(e){let t=new Map;for(let n of e){let o=k.defaultStyle.get(n);if(!o)continue;let a=Object.entries(o).map(([l,i])=>`${l}:${i};`).sort().join("");a&&(t.has(a)||t.set(a,[]),t.get(a).push(n))}let r="";for(let[n,o]of t.entries())r+=`${o.join(",")} { ${n} }
`;return r}function _r(e){let t=Array.from(new Set(e.values())).filter(Boolean).sort(),r=new Map,n=1;for(let o of t)r.set(o,`c${n++}`);return r}function _t(e,t=null){if(!(e instanceof Element))return window.getComputedStyle(e,t);let r=k.computedStyle.get(e);if(r||(r=new Map,k.computedStyle.set(e,r)),!r.has(t)){let n=window.getComputedStyle(e,t);r.set(t,n)}return r.get(t)}function ht(e){let t={};for(let r of e)t[r]=e.getPropertyValue(r);return t}function It(e){let t=[],r=0,n=0;for(let o=0;o<e.length;o++){let a=e[o];a==="("&&r++,a===")"&&r--,a===","&&r===0&&(t.push(e.slice(n,o).trim()),n=o+1)}return t.push(e.slice(n).trim()),t}var Ir=[/font\s*awesome/i,/material\s*icons/i,/ionicons/i,/glyphicons/i,/feather/i,/bootstrap\s*icons/i,/remix\s*icons/i,/heroicons/i,/layui/i,/lucide/i],se=Object.assign({materialIconsFilled:"https://fonts.gstatic.com/s/materialicons/v48/flUhRq6tzZclQEJ-Vdg-IuiaDsNcIhQ8tQ.woff2",materialIconsOutlined:"https://fonts.gstatic.com/s/materialiconsoutlined/v110/gok-H7zzDkdnRel8-DQ6KAXJ69wP1tGnf4ZGhUcel5euIg.woff2",materialIconsRound:"https://fonts.gstatic.com/s/materialiconsround/v109/LDItaoyNOAY6Uewc665JcIzCKsKc_M9flwmPq_HTTw.woff2",materialIconsSharp:"https://fonts.gstatic.com/s/materialiconssharp/v110/oPWQ_lt5nv4pWNJpghLP75WiFR4kLh3kvmvRImcycg.woff2"},typeof window<"u"&&window.__SNAPDOM_ICON_FONTS__||{}),Qe=[];function Dr(e){let t=Array.isArray(e)?e:[e];for(let r of t)r instanceof RegExp?Qe.push(r):typeof r=="string"?Qe.push(new RegExp(r,"i")):console.warn("[snapdom] Ignored invalid iconFont value:",r)}function Z(e){let t=typeof e=="string"?e:"",r=[...Ir,...Qe];for(let n of r)if(n instanceof RegExp&&n.test(t))return!0;return!!(/icon/i.test(t)||/glyph/i.test(t)||/symbols/i.test(t)||/feather/i.test(t)||/fontawesome/i.test(t))}function Wr(e=""){let t=String(e).toLowerCase();return/\bmaterial\s*icons\b/.test(t)||/\bmaterial\s*symbols\b/.test(t)}var pt=new Map;function Or(e=""){let t=Object.create(null),r=String(e||""),n=/['"]?\s*([A-Za-z]{3,4})\s*['"]?\s*([+-]?\d+(?:\.\d+)?)\s*/g,o;for(;o=n.exec(r);)t[o[1].toUpperCase()]=Number(o[2]);return t}async function Ur(e,t,r){let n=String(e||""),o=n.toLowerCase(),a=String(t||"").toLowerCase();if(/\bmaterial\s*icons\b/.test(o)&&!/\bsymbols\b/.test(o))return{familyForMeasure:n,familyForCanvas:n};if(!/\bmaterial\s*symbols\b/.test(o))return{familyForMeasure:n,familyForCanvas:n};let l=r&&(r.FILL??r.fill),i="outlined";/\brounded\b/.test(a)||/\bround\b/.test(a)?i="rounded":/\bsharp\b/.test(a)?i="sharp":/\boutlined\b/.test(a)&&(i="outlined");let s=l===1,c=null;if(s&&(i==="outlined"&&se.materialIconsFilled?c={url:se.materialIconsFilled,alias:"snapdom-mi-filled"}:i==="rounded"&&se.materialIconsRound?c={url:se.materialIconsRound,alias:"snapdom-mi-round"}:i==="sharp"&&se.materialIconsSharp&&(c={url:se.materialIconsSharp,alias:"snapdom-mi-sharp"})),!c)return{familyForMeasure:n,familyForCanvas:n};if(!pt.has(c.alias))try{let f=new FontFace(c.alias,`url(${c.url})`,{style:"normal",weight:"400"});document.fonts.add(f),await f.load(),pt.set(c.alias,!0)}catch{return{familyForMeasure:n,familyForCanvas:n}}let u=`"${c.alias}"`;return{familyForMeasure:u,familyForCanvas:u}}async function Br(e="Material Icons",t=24){try{await Promise.all([document.fonts.load(`400 ${t}px "${String(e).replace(/["']/g,"")}"`),document.fonts.ready])}catch{}}function Vr(e){let t=e.getPropertyValue("-webkit-text-fill-color")?.trim()||"",r=/^transparent$/i.test(t)||/rgba?\(\s*0\s*,\s*0\s*,\s*0\s*,\s*0\s*\)/i.test(t);if(t&&!r&&t.toLowerCase()!=="currentcolor")return t;let n=e.color?.trim();return n&&n!=="inherit"?n:"#000"}async function zr(e,{family:t="Material Icons",weight:r="normal",fontSize:n=32,color:o="#000",variation:a="",className:l=""}={}){let i=String(t||"").replace(/^['"]+|['"]+$/g,""),s=window.devicePixelRatio||1,c=Or(a),{familyForMeasure:u,familyForCanvas:f}=await Ur(i,l,c);await Br(f.replace(/^["']+|["']+$/g,""),n);let m=document.createElement("span");m.textContent=e,m.style.position="absolute",m.style.visibility="hidden",m.style.left="-99999px",m.style.whiteSpace="nowrap",m.style.fontFamily=u,m.style.fontWeight=String(r||"normal"),m.style.fontSize=`${n}px`,m.style.lineHeight="1",m.style.margin="0",m.style.padding="0",m.style.fontFeatureSettings="'liga' 1",m.style.fontVariantLigatures="normal",m.style.color=o,document.body.appendChild(m);let y=m.getBoundingClientRect(),p=Math.max(1,Math.ceil(y.width)),d=Math.max(1,Math.ceil(y.height));document.body.removeChild(m);let h=document.createElement("canvas");h.width=p*s,h.height=d*s;let x=h.getContext("2d");x.scale(s,s),x.font=`${r?`${r} `:""}${n}px ${f}`,x.textAlign="left",x.textBaseline="top",x.fillStyle=o;try{x.fontKerning="normal"}catch{}return x.fillText(e,0,0),{dataUrl:h.toDataURL(),width:p,height:d}}async function qr(e,t){if(!(e instanceof Element))return 0;let r='.material-icons, [class*="material-symbols"]',n=Array.from(e.querySelectorAll(r)).filter(l=>l&&l.textContent&&l.textContent.trim());if(n.length===0)return 0;let o=t instanceof Element?Array.from(t.querySelectorAll(r)).filter(l=>l&&l.textContent&&l.textContent.trim()):[],a=0;for(let l=0;l<n.length;l++){let i=n[l],s=o[l]||null;try{let c=getComputedStyle(s||i),u=c.fontFamily||"Material Icons";if(!Wr(u))continue;let f=(s||i).textContent.trim();if(!f)continue;let m=parseInt(c.fontSize,10)||24,y=c.fontWeight&&c.fontWeight!=="normal"?c.fontWeight:"normal",p=Vr(c),d=c.fontVariationSettings&&c.fontVariationSettings!=="normal"?c.fontVariationSettings:"",h=(s||i).className||"",{dataUrl:x,width:w,height:b}=await zr(f,{family:u,weight:y,fontSize:m,color:p,variation:d,className:h});i.textContent="";let g=i.ownerDocument.createElement("img");g.src=x,g.alt=f,g.style.height=`${m}px`,g.style.width=`${Math.max(1,Math.round(w/b*m))}px`,g.style.objectFit="contain",g.style.verticalAlign=getComputedStyle(i).verticalAlign||"baseline",i.appendChild(g),a++}catch{}}return a}async function Hr(e,t,r,n=32,o="#000"){t=t.replace(/^['"]+|['"]+$/g,"");let a=window.devicePixelRatio||1;try{await document.fonts.ready}catch{}let l=document.createElement("span");l.textContent=e,l.style.position="absolute",l.style.visibility="hidden",l.style.fontFamily=`"${t}"`,l.style.fontWeight=r||"normal",l.style.fontSize=`${n}px`,l.style.lineHeight="1",l.style.whiteSpace="nowrap",l.style.padding="0",l.style.margin="0",document.body.appendChild(l);let i=l.getBoundingClientRect(),s=Math.ceil(i.width),c=Math.ceil(i.height);document.body.removeChild(l);let u=document.createElement("canvas");u.width=Math.max(1,s*a),u.height=Math.max(1,c*a);let f=u.getContext("2d");return f.scale(a,a),f.font=r?`${r} ${n}px "${t}"`:`${n}px "${t}"`,f.textAlign="left",f.textBaseline="top",f.fillStyle=o,f.fillText(e,0,0),{dataUrl:u.toDataURL(),width:s,height:c}}var Gr=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","emoji","math","fangsong","ui-serif","ui-sans-serif","ui-monospace","ui-rounded"]);function Pe(e){if(!e)return"";for(let t of e.split(",")){let r=t.trim().replace(/^['"]+|['"]+$/g,"");if(r&&!Gr.has(r.toLowerCase()))return r}return""}function Me(e){let t=String(e??"400").trim().toLowerCase();if(t==="normal")return 400;if(t==="bold")return 700;let r=parseInt(t,10);return Number.isFinite(r)?Math.min(900,Math.max(100,r)):400}function Ae(e){let t=String(e??"normal").trim().toLowerCase();return t.startsWith("italic")?"italic":t.startsWith("oblique")?"oblique":"normal"}function Xr(e){let t=String(e??"100%").match(/(\d+(?:\.\d+)?)\s*%/);return t?Math.max(50,Math.min(200,parseFloat(t[1]))):100}function Yr(e){let t=String(e||"400").trim(),r=t.match(/^(\d{2,3})\s+(\d{2,3})$/);if(r){let o=Me(r[1]),a=Me(r[2]);return{min:Math.min(o,a),max:Math.max(o,a)}}let n=Me(t);return{min:n,max:n}}function Qr(e){let t=String(e||"normal").trim().toLowerCase();return t==="italic"?{kind:"italic"}:t.startsWith("oblique")?{kind:"oblique"}:{kind:"normal"}}function Kr(e){let t=String(e||"100%").trim(),r=t.match(/(\d+(?:\.\d+)?)\s*%\s+(\d+(?:\.\d+)?)\s*%/);if(r){let a=parseFloat(r[1]),l=parseFloat(r[2]);return{min:Math.min(a,l),max:Math.max(a,l)}}let n=t.match(/(\d+(?:\.\d+)?)\s*%/),o=n?parseFloat(n[1]):100;return{min:o,max:o}}function Jr(e,t){if(!e)return!1;try{let r=new URL(e,location.href);if(r.origin===location.origin)return!0;let n=r.host.toLowerCase();if(["fonts.googleapis.com","fonts.gstatic.com","use.typekit.net","p.typekit.net","kit.fontawesome.com","use.fontawesome.com"].some(a=>n.endsWith(a)))return!0;let o=(r.pathname+r.search).toLowerCase();if(/\bfont(s)?\b/.test(o)||/\.woff2?(\b|$)/.test(o))return!0;for(let a of t){let l=a.toLowerCase().replace(/\s+/g,"+"),i=a.toLowerCase().replace(/\s+/g,"-");if(o.includes(l)||o.includes(i))return!0}return!1}catch{return!1}}function Zr(e){let t=new Set;for(let r of e||[]){let n=String(r).split("__")[0]?.trim();n&&t.add(n)}return t}function gt(e,t){return e&&e.replace(/url\(\s*(['"]?)([^)'"]+)\1\s*\)/g,(r,n,o)=>{let a=(o||"").trim();if(!a||/^data:|^blob:|^https?:|^file:|^about:/i.test(a))return r;let l=a;try{l=new URL(a,t||location.href).href}catch{}return`url("${l}")`})}var Ke=/@import\s+(?:url\(\s*(['"]?)([^)"']+)\1\s*\)|(['"])([^"']+)\3)([^;]*);/g,Fe=4;async function en(e,t,r){if(!e)return e;let n=new Set;function o(i,s){try{return new URL(i,s||location.href).href}catch{return i}}async function a(i,s,c=0){if(c>Fe)return console.warn(`[snapDOM] @import depth exceeded (${Fe}) at ${s}`),i;let u="",f=0,m;for(;m=Ke.exec(i);){u+=i.slice(f,m.index),f=Ke.lastIndex;let y=(m[2]||m[4]||"").trim(),p=o(y,s);if(n.has(p)){console.warn(`[snapDOM] Skipping circular @import: ${p}`);continue}n.add(p);let d="";try{let h=await J(p,{as:"text",useProxy:r,silent:!0});h.ok&&typeof h.data=="string"&&(d=h.data)}catch{}d?(d=gt(d,p),d=await a(d,p,c+1),u+=`
/* inlined: ${p} */
${d}
`):u+=m[0]}return u+=i.slice(f),u}let l=gt(e,t||location.href);return l=await a(l,t||location.href,0),l}var Dt=/url\((["']?)([^"')]+)\1\)/g,tn=/@font-face[^{}]*\{[^}]*\}/g;function Wt(e){if(!e)return[];let t=[],r=e.split(",").map(n=>n.trim()).filter(Boolean);for(let n of r){let o=n.match(/^U\+([0-9A-Fa-f?]+)(?:-([0-9A-Fa-f?]+))?$/);if(!o)continue;let a=o[1],l=o[2],i=s=>{if(!s.includes("?"))return parseInt(s,16);let c=parseInt(s.replace(/\?/g,"0"),16),u=parseInt(s.replace(/\?/g,"F"),16);return[c,u]};if(l){let s=i(a),c=i(l),u=Array.isArray(s)?s[0]:s,f=Array.isArray(c)?c[1]:c;t.push([Math.min(u,f),Math.max(u,f)])}else{let s=i(a);Array.isArray(s)?t.push([s[0],s[1]]):t.push([s,s])}}return t}function Ot(e,t){if(!t.length||!e||e.size===0)return!0;for(let r of e)for(let[n,o]of t)if(r>=n&&r<=o)return!0;return!1}function lt(e,t){let r=[];if(!e)return r;for(let n of e.matchAll(Dt)){let o=(n[2]||"").trim();if(!(!o||o.startsWith("data:"))){if(!/^https?:/i.test(o))try{o=new URL(o,t||location.href).href}catch{}r.push(o)}}return r}async function Ut(e,t,r=""){let n=e;for(let o of e.matchAll(Dt)){let a=ot(o[0]);if(!a)continue;let l=a;if(!l.startsWith("http")&&!l.startsWith("data:"))try{l=new URL(l,t||location.href).href}catch{}if(!Z(l)){if(k.resource?.has(l)){k.font?.add(l),n=n.replace(o[0],`url(${k.resource.get(l)})`);continue}if(!k.font?.has(l))try{let i=await J(l,{as:"dataURL",useProxy:r,silent:!0});if(i.ok&&typeof i.data=="string"){let s=i.data;k.resource?.set(l,s),k.font?.add(l),n=n.replace(o[0],`url(${s})`)}}catch{console.warn("[snapDOM] Failed to fetch font resource:",l)}}}return n}function rn(e){if(!e.length)return null;let t=(l,i)=>e.some(([s,c])=>!(c<l||s>i)),r=t(0,255)||t(305,305),n=t(256,591)||t(7680,7935),o=t(880,1023),a=t(1024,1279);return t(7840,7929)||t(258,259)||t(416,417)||t(431,432)?"vietnamese":a?"cyrillic":o?"greek":n?"latin-ext":r?"latin":null}function yt(e={}){let t=new Set((e.families||[]).map(o=>String(o).toLowerCase())),r=new Set((e.domains||[]).map(o=>String(o).toLowerCase())),n=new Set((e.subsets||[]).map(o=>String(o).toLowerCase()));return(o,a)=>{if(t.size&&t.has(o.family.toLowerCase()))return!0;if(r.size)for(let l of o.srcUrls)try{if(r.has(new URL(l).host.toLowerCase()))return!0}catch{}if(n.size){let l=rn(a);if(l&&n.has(l))return!0}return!1}}function nn(e){if(!e)return e;let t=/@font-face[^{}]*\{[^}]*\}/gi,r=new Set,n=[];for(let a of e.match(t)||[]){let l=a.match(/font-family:\s*([^;]+);/i)?.[1]||"",i=Pe(l),s=(a.match(/font-weight:\s*([^;]+);/i)?.[1]||"400").trim(),c=(a.match(/font-style:\s*([^;]+);/i)?.[1]||"normal").trim(),u=(a.match(/font-stretch:\s*([^;]+);/i)?.[1]||"100%").trim(),f=(a.match(/unicode-range:\s*([^;]+);/i)?.[1]||"").trim(),m=(a.match(/src\s*:\s*([^;}]+)[;}]/i)?.[1]||"").trim(),y=lt(m,location.href),p=y.length?y.map(h=>String(h).toLowerCase()).sort().join("|"):m.toLowerCase(),d=[String(i||"").toLowerCase(),s,c,u,f.toLowerCase(),p].join("|");r.has(d)||(r.add(d),n.push(a))}if(n.length===0)return e;let o=0;return e.replace(t,()=>n[o++]||"")}function on(e,t,r,n){let o=Array.from(e||[]).sort().join("|"),a=t?JSON.stringify({families:(t.families||[]).map(i=>String(i).toLowerCase()).sort(),domains:(t.domains||[]).map(i=>String(i).toLowerCase()).sort(),subsets:(t.subsets||[]).map(i=>String(i).toLowerCase()).sort()}):"",l=(r||[]).map(i=>`${(i.family||"").toLowerCase()}::${i.weight||"normal"}::${i.style||"normal"}::${i.src||""}`).sort().join("|");return`fonts-embed-css::req=${o}::ex=${a}::lf=${l}::px=${n||""}`}async function Bt(e,t,r,n){let o;try{o=e.cssRules||[]}catch{return}let a=(l,i)=>{try{return new URL(l,i||location.href).href}catch{return l}};for(let l of o){if(l.type===CSSRule.IMPORT_RULE&&l.styleSheet){let i=l.href?a(l.href,t):t;if(n.depth>=Fe){console.warn(`[snapDOM] CSSOM import depth exceeded (${Fe}) at ${i}`);continue}if(i&&n.visitedSheets.has(i)){console.warn(`[snapDOM] Skipping circular CSSOM import: ${i}`);continue}i&&n.visitedSheets.add(i);let s={...n,depth:(n.depth||0)+1};await Bt(l.styleSheet,i,r,s);continue}if(l.type===CSSRule.FONT_FACE_RULE){let i=(l.style.getPropertyValue("font-family")||"").trim(),s=Pe(i);if(!s||Z(s))continue;let c=(l.style.getPropertyValue("font-weight")||"400").trim(),u=(l.style.getPropertyValue("font-style")||"normal").trim(),f=(l.style.getPropertyValue("font-stretch")||"100%").trim(),m=(l.style.getPropertyValue("src")||"").trim(),y=(l.style.getPropertyValue("unicode-range")||"").trim();if(!n.faceMatchesRequired(s,u,c,f))continue;let p=Wt(y);if(!Ot(n.usedCodepoints,p))continue;let d={family:s,weightSpec:c,styleSpec:u,stretchSpec:f,unicodeRange:y,srcRaw:m,srcUrls:lt(m,t||location.href),href:t||location.href};if(n.simpleExcluder&&n.simpleExcluder(d,p))continue;if(/url\(/i.test(m)){let h=await Ut(m,t||location.href,n.useProxy);await r(`@font-face{font-family:${s};src:${h};font-style:${u};font-weight:${c};font-stretch:${f};${y?`unicode-range:${y};`:""}}`)}else await r(`@font-face{font-family:${s};src:${m};font-style:${u};font-weight:${c};font-stretch:${f};${y?`unicode-range:${y};`:""}}`)}}}async function an({required:e,usedCodepoints:t,exclude:r=void 0,localFonts:n=[],useProxy:o=""}={}){e instanceof Set||(e=new Set),t instanceof Set||(t=new Set);let a=new Map;for(let d of e){let[h,x,w,b]=String(d).split("__");if(!h)continue;let g=a.get(h)||[];g.push({w:parseInt(x,10),s:w,st:parseInt(b,10)}),a.set(h,g)}function l(d,h,x,w){if(!a.has(d))return!1;let b=a.get(d),g=Yr(x),C=Qr(h),v=Kr(w),$=g.min!==g.max,E=g.min,j=N=>C.kind==="normal"&&N==="normal"||C.kind!=="normal"&&(N==="italic"||N==="oblique"),T=!1;for(let N of b){let I=$?N.w>=g.min&&N.w<=g.max:N.w===E,P=j(Ae(N.s)),M=N.st>=v.min&&N.st<=v.max;if(I&&P&&M){T=!0;break}}if(T)return!0;if(!$)for(let N of b){let I=j(Ae(N.s)),P=N.st>=v.min&&N.st<=v.max;if(Math.abs(E-N.w)<=300&&I&&P)return!0}if(!$&&C.kind==="normal"&&b.some(N=>Ae(N.s)!=="normal"))for(let N of b){let I=Math.abs(E-N.w)<=300,P=N.st>=v.min&&N.st<=v.max;if(I&&P)return!0}return!1}let i=yt(r),s=on(e,r,n,o);if(k.resource?.has(s))return k.resource.get(s);let c=Zr(e),u=[],f=Ke;for(let d of document.querySelectorAll("style")){let h=d.textContent||"";for(let x of h.matchAll(f)){let w=(x[2]||x[4]||"").trim();!w||Z(w)||document.querySelector(`link[rel="stylesheet"][href="${w}"]`)||u.push(w)}}u.length&&await Promise.all(u.map(d=>new Promise(h=>{if(document.querySelector(`link[rel="stylesheet"][href="${d}"]`))return h(null);let x=document.createElement("link");x.rel="stylesheet",x.href=d,x.setAttribute("data-snapdom","injected-import"),x.onload=()=>h(x),x.onerror=()=>h(null),document.head.appendChild(x)})));let m="",y=Array.from(document.querySelectorAll('link[rel="stylesheet"]')).filter(d=>!!d.href);for(let d of y)try{if(Z(d.href))continue;let h="",x=!1;try{x=new URL(d.href,location.href).origin===location.origin}catch{}if(!x&&!Jr(d.href,c))continue;if(x){let b=Array.from(document.styleSheets).find(g=>g.href===d.href);if(b)try{let g=b.cssRules||[];h=Array.from(g).map(C=>C.cssText).join("")}catch{}}if(!h&&(h=(await J(d.href,{as:"text",useProxy:o})).data,Z(d.href)))continue;h=await en(h,d.href,o);let w="";for(let b of h.match(tn)||[]){let g=(b.match(/font-family:\s*([^;]+);/i)?.[1]||"").trim(),C=Pe(g);if(!C||Z(C))continue;let v=(b.match(/font-weight:\s*([^;]+);/i)?.[1]||"400").trim(),$=(b.match(/font-style:\s*([^;]+);/i)?.[1]||"normal").trim(),E=(b.match(/font-stretch:\s*([^;]+);/i)?.[1]||"100%").trim(),j=(b.match(/unicode-range:\s*([^;]+);/i)?.[1]||"").trim(),T=(b.match(/src\s*:\s*([^;}]+)[;}]/i)?.[1]||"").trim(),N=lt(T,d.href);if(!l(C,$,v,E))continue;let I=Wt(j);if(!Ot(t,I))continue;let P={family:C,weightSpec:v,styleSpec:$,stretchSpec:E,unicodeRange:j,srcRaw:T,srcUrls:N,href:d.href};if(r&&i(P,I))continue;let M=/url\(/i.test(T)?await Ut(b,d.href,o):b;w+=M}w.trim()&&(m+=w)}catch{console.warn("[snapDOM] Failed to process stylesheet:",d.href)}let p={requiredIndex:a,usedCodepoints:t,faceMatchesRequired:l,simpleExcluder:r?yt(r):null,useProxy:o,visitedSheets:new Set,depth:0};for(let d of document.styleSheets)if(!(d.href&&y.some(h=>h.href===d.href)))try{let h=d.href||location.href;h&&p.visitedSheets.add(h),await Bt(d,h,async x=>{m+=x},p)}catch{}try{for(let d of document.fonts||[]){if(!d||!d.family||d.status!=="loaded"||!d._snapdomSrc)continue;let h=String(d.family).replace(/^['"]+|['"]+$/g,"");if(Z(h)||!a.has(h)||r?.families&&r.families.some(w=>String(w).toLowerCase()===h.toLowerCase()))continue;let x=d._snapdomSrc;if(!String(x).startsWith("data:")){if(k.resource?.has(d._snapdomSrc))x=k.resource.get(d._snapdomSrc),k.font?.add(d._snapdomSrc);else if(!k.font?.has(d._snapdomSrc))try{let w=await J(d._snapdomSrc,{as:"dataURL",useProxy:o,silent:!0});if(w.ok&&typeof w.data=="string")x=w.data,k.resource?.set(d._snapdomSrc,x),k.font?.add(d._snapdomSrc);else continue}catch{console.warn("[snapDOM] Failed to fetch dynamic font src:",d._snapdomSrc);continue}}m+=`@font-face{font-family:'${h}';src:url(${x});font-style:${d.style||"normal"};font-weight:${d.weight||"normal"};}`}}catch{}for(let d of n){if(!d||typeof d!="object")continue;let h=String(d.family||"").replace(/^['"]+|['"]+$/g,"");if(!h||Z(h)||!a.has(h)||r?.families&&r.families.some(v=>String(v).toLowerCase()===h.toLowerCase()))continue;let x=d.weight!=null?String(d.weight):"normal",w=d.style!=null?String(d.style):"normal",b=d.stretchPct!=null?`${d.stretchPct}%`:"100%",g=String(d.src||""),C=g;if(!C.startsWith("data:")){if(k.resource?.has(g))C=k.resource.get(g),k.font?.add(g);else if(!k.font?.has(g))try{let v=await J(g,{as:"dataURL",useProxy:o,silent:!0});if(v.ok&&typeof v.data=="string")C=v.data,k.resource?.set(g,C),k.font?.add(g);else continue}catch{console.warn("[snapDOM] Failed to fetch localFonts src:",g);continue}}m+=`@font-face{font-family:'${h}';src:url(${C});font-style:${w};font-weight:${x};font-stretch:${b};}`}return m&&(m=nn(m),k.resource?.set(s,m)),m}function ln(e){let t=new Set;if(!e)return t;let r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,null),n=l=>{let i=Pe(l.fontFamily);if(!i)return;let s=(c,u,f)=>`${i}__${Me(c)}__${Ae(u)}__${Xr(f)}`;t.add(s(l.fontWeight,l.fontStyle,l.fontStretch))};n(getComputedStyle(e));let o=getComputedStyle(e,"::before");o&&o.content&&o.content!=="none"&&n(o);let a=getComputedStyle(e,"::after");for(a&&a.content&&a.content!=="none"&&n(a);r.nextNode();){let l=r.currentNode,i=getComputedStyle(l);n(i);let s=getComputedStyle(l,"::before");s&&s.content&&s.content!=="none"&&n(s);let c=getComputedStyle(l,"::after");c&&c.content&&c.content!=="none"&&n(c)}return t}function sn(e){let t=new Set,r=o=>{if(o)for(let a of o)t.add(a.codePointAt(0))},n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT,null);for(;n.nextNode();){let o=n.currentNode;if(o.nodeType===Node.TEXT_NODE)r(o.nodeValue||"");else if(o.nodeType===Node.ELEMENT_NODE){let a=o;for(let l of["::before","::after"]){let i=getComputedStyle(a,l)?.getPropertyValue("content");if(!(!i||i==="none"))if(/^"/.test(i)||/^'/.test(i))r(i.slice(1,-1));else{let s=i.match(/\\[0-9A-Fa-f]{1,6}/g);if(s)for(let c of s)try{t.add(parseInt(c.slice(1),16))}catch{}}}}}return t}async function cn(e,t=2){try{await document.fonts.ready}catch{}let r=Array.from(e||[]).filter(Boolean);if(r.length===0)return;let n=()=>{let o=document.createElement("div");o.style.cssText="position:absolute!important;left:-9999px!important;top:0!important;opacity:0!important;pointer-events:none!important;contain:layout size style;";for(let a of r){let l=document.createElement("span");l.textContent="AaBbGg1234ÁÉÍÓÚçñ—∞",l.style.fontFamily=`"${a}"`,l.style.fontWeight="700",l.style.fontStyle="italic",l.style.fontSize="32px",l.style.lineHeight="1",l.style.whiteSpace="nowrap",l.style.margin="0",l.style.padding="0",o.appendChild(l)}document.body.appendChild(o),o.offsetWidth,document.body.removeChild(o)};for(let o=0;o<Math.max(1,t);o++)n(),await new Promise(a=>requestAnimationFrame(()=>requestAnimationFrame(a)))}async function un(e,t,r,n={}){let o=[[e,t]],a=["background-image","mask","mask-image","-webkit-mask","-webkit-mask-image","mask-source","mask-box-image-source","mask-border-source","-webkit-mask-box-image-source","border-image","border-image-source"],l=["mask-position","mask-size","mask-repeat","-webkit-mask-position","-webkit-mask-size","-webkit-mask-repeat","mask-origin","mask-clip","-webkit-mask-origin","-webkit-mask-clip","-webkit-mask-position-x","-webkit-mask-position-y"],i=["background-position","background-position-x","background-position-y","background-size","background-repeat","background-origin","background-clip","background-attachment","background-blend-mode"],s=["border-image-slice","border-image-width","border-image-outset","border-image-repeat"];for(;o.length;){let[c,u]=o.shift(),f=r.get(c)||_t(c);r.has(c)||r.set(c,f);let m=(()=>{let d=f.getPropertyValue("border-image"),h=f.getPropertyValue("border-image-source");return d&&d!=="none"||h&&h!=="none"})();for(let d of i){let h=f.getPropertyValue(d);h&&u.style.setProperty(d,h)}for(let d of a){let h=f.getPropertyValue(d);if(!h||h==="none")continue;let x=It(h),w=await Promise.all(x.map(b=>jt(b,n)));w.some(b=>b&&b!=="none"&&!/^url\(undefined/.test(b))&&u.style.setProperty(d,w.join(", "))}for(let d of l){let h=f.getPropertyValue(d);!h||h==="initial"||u.style.setProperty(d,h)}if(m)for(let d of s){let h=f.getPropertyValue(d);!h||h==="initial"||u.style.setProperty(d,h)}let y=Array.from(c.children),p=Array.from(u.children).filter(d=>!(d.dataset&&d.dataset.snapdomPseudo));for(let d=0;d<Math.min(y.length,p.length);d++)o.push([y[d],p[d]])}}function ue(e,{fast:t=!1}={}){if(t)return e();"requestIdleCallback"in window?requestIdleCallback(e,{timeout:50}):setTimeout(e,1)}function pe(){if(typeof navigator>"u")return!1;let e=navigator.userAgent||"",t=e.toLowerCase(),r=t.includes("safari")&&!t.includes("chrome")&&!t.includes("crios")&&!t.includes("fxios")&&!t.includes("android"),n=/applewebkit/i.test(e),o=/mobile/i.test(e),a=!/safari/i.test(e),l=n&&o&&a,i=/(micromessenger|wxwork|wecom|windowswechat|macwechat)/i.test(e),s=/(baiduboxapp|baidubrowser|baidusearch|baiduboxlite)/i.test(t),c=/ipad|iphone|ipod/.test(t)&&n;return r||l||i||s||c}var we=[];function Vt(e){if(!e)return null;if(Array.isArray(e)){let[t,r]=e;return typeof t=="function"?t(r):t}if(typeof e=="object"&&"plugin"in e){let{plugin:t,options:r}=e;return typeof t=="function"?t(r):t}return typeof e=="function"?e():e}function dn(...e){let t=e.flat();for(let r of t){let n=Vt(r);n&&(we.some(o=>o&&o.name&&n.name&&o.name===n.name)||we.push(n))}}function zt(e){return(e&&Array.isArray(e.plugins)?e.plugins:we)||we}async function te(e,t,r){let n=r,o=zt(t);for(let a of o){let l=a&&typeof a[e]=="function"?a[e]:null;if(!l)continue;let i=await l(t,n);typeof i<"u"&&(n=i)}return n}async function fn(e,t,r){let n=[],o=zt(t);for(let a of o){let l=a&&typeof a[e]=="function"?a[e]:null;if(!l)continue;let i=await l(t,r);typeof i<"u"&&n.push(i)}return n}function mn(e){let t=[];if(Array.isArray(e))for(let r of e){let n=Vt(r);if(!n||!n.name)continue;let o=t.findIndex(a=>a&&a.name===n.name);o>=0&&t.splice(o,1),t.push(n)}for(let r of we)r&&r.name&&!t.some(n=>n.name===r.name)&&t.push(r);return Object.freeze(t)}function hn(e,t,r=!1){return!e||e.plugins&&!r||(e.plugins=mn(t)),e}var wt=new WeakMap,Je=new Map,Ze=0;function ge(){Ze++}var bt=!1;function pn(e=document.documentElement){if(!bt){bt=!0;try{new MutationObserver(()=>ge()).observe(e,{subtree:!0,childList:!0,characterData:!0,attributes:!0})}catch{}try{new MutationObserver(()=>ge()).observe(document.head,{subtree:!0,childList:!0,characterData:!0,attributes:!0})}catch{}try{let t=document.fonts;t&&(t.addEventListener?.("loadingdone",ge),t.ready?.then(()=>ge()).catch(()=>{}))}catch{}}}function gn(e,t={}){let r={},n=e.getPropertyValue("visibility");for(let a=0;a<e.length;a++){let l=e[a],i=e.getPropertyValue(l);(l==="background-image"||l==="content")&&i.includes("url(")&&!i.includes("data:")&&(i="none"),r[l]=i}let o=["text-decoration-line","text-decoration-color","text-decoration-style","text-decoration-thickness","text-underline-offset","text-decoration-skip-ink"];for(let a of o)if(!r[a])try{let l=e.getPropertyValue(a);l&&(r[a]=l)}catch{}if(t.embedFonts){let a=["font-feature-settings","font-variation-settings","font-kerning","font-variant","font-variant-ligatures","font-optical-sizing"];for(let l of a)if(!r[l])try{let i=e.getPropertyValue(l);i&&(r[l]=i)}catch{}}return n==="hidden"&&(r.opacity="0"),r}var xt=new WeakMap;function yn(e){let t=xt.get(e);return t||(t=Object.entries(e).sort((r,n)=>r[0]<n[0]?-1:r[0]>n[0]?1:0).map(([r,n])=>`${r}:${n}`).join(";"),xt.set(e,t),t)}function wn(e,t=null,r={}){let n=wt.get(e);if(n&&n.epoch===Ze)return n.snapshot;let o=t||getComputedStyle(e),a=gn(o,r);return kn(e,o,a),wt.set(e,{epoch:Ze,snapshot:a}),a}function bn(e,t){return e&&e.session&&e.persist?e:e&&(e.styleMap||e.styleCache||e.nodeMap)?{session:e,persist:{snapshotKeyCache:Je,defaultStyle:k.defaultStyle,baseStyle:k.baseStyle,image:k.image,resource:k.resource,background:k.background,font:k.font},options:t||{}}:{session:k.session,persist:{snapshotKeyCache:Je,defaultStyle:k.defaultStyle,baseStyle:k.baseStyle,image:k.image,resource:k.resource,background:k.background,font:k.font},options:e||t||{}}}async function de(e,t,r,n){if(e.tagName==="STYLE")return;let o=bn(r,n),a=o.options&&o.options.cache||"auto";if(a!=="disabled"&&pn(document.documentElement),a==="disabled"&&!o.session.__bumpedForDisabled&&(ge(),Je.clear(),o.session.__bumpedForDisabled=!0),at.has(e.tagName?.toLowerCase())){let m=e.getAttribute?.("style");m&&t.setAttribute("style",m)}let{session:l,persist:i}=o;l.styleCache.has(e)||l.styleCache.set(e,getComputedStyle(e));let s=l.styleCache.get(e),c=wn(e,s,o.options),u=yn(c),f=i.snapshotKeyCache.get(u);if(!f){let m=e.tagName?.toLowerCase()||"div";f=Ye(c,m),i.snapshotKeyCache.set(u,f)}l.styleMap.set(t,f)}function xn(e){return e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof HTMLIFrameElement||e instanceof SVGElement||e instanceof HTMLObjectElement||e instanceof HTMLEmbedElement}function Sn(e){return e.backgroundImage&&e.backgroundImage!=="none"||e.backgroundColor&&e.backgroundColor!=="rgba(0, 0, 0, 0)"&&e.backgroundColor!=="transparent"||(parseFloat(e.borderTopWidth)||0)>0||(parseFloat(e.borderBottomWidth)||0)>0||(parseFloat(e.paddingTop)||0)>0||(parseFloat(e.paddingBottom)||0)>0?!0:(e.overflowBlock||e.overflowY||"visible")!=="visible"}function Cn(e){let t=e.parentElement;if(!t)return!1;let r=getComputedStyle(t).display||"";return r.includes("flex")||r.includes("grid")}function vn(e,t){if(e.textContent&&/\S/.test(e.textContent))return!0;let r=e.firstElementChild,n=e.lastElementChild;if(r&&r.tagName==="BR"||n&&n.tagName==="BR")return!0;let o=e.scrollHeight;if(o===0)return!1;let a=parseFloat(t.paddingTop)||0,l=parseFloat(t.paddingBottom)||0;return o>a+l}function kn(e,t,r){if(e instanceof HTMLElement&&e.style&&e.style.height)return;let n=e.tagName&&e.tagName.toLowerCase();if(!n||n!=="div"&&n!=="section"&&n!=="article"&&n!=="main"&&n!=="aside"&&n!=="header"&&n!=="footer"&&n!=="nav"&&n!=="ol"&&n!=="ul"&&n!=="li")return;let o=t.display||"";if(o.includes("flex")||o.includes("grid")||xn(e))return;let a=t.position;if(a==="absolute"||a==="fixed"||a==="sticky"||t.transform!=="none"||Sn(t)||Cn(e))return;let l=t.overflowX||t.overflow||"visible",i=t.overflowY||t.overflow||"visible";if(l!=="visible"||i!=="visible")return;let s=t.clip;s&&s!=="auto"&&s!=="rect(auto, auto, auto, auto)"||t.visibility==="hidden"||t.opacity==="0"||vn(e,t)&&(delete r.height,delete r["block-size"])}var qt=["fill","stroke","color","background-color","stop-color"],St=new Map;function $n(e,t){let r=t+"::"+e.toLowerCase(),n=St.get(r);if(n)return n;let o=document,a=t==="http://www.w3.org/2000/svg"?o.createElementNS(t,e):o.createElement(e),l=o.createElement("div");l.style.cssText="position:absolute;left:-99999px;top:-99999px;contain:strict;display:block;",l.appendChild(a),o.documentElement.appendChild(l);let i=getComputedStyle(a),s={};for(let c of qt)s[c]=i.getPropertyValue(c)||"";return l.remove(),St.set(r,s),s}function En(e,t){if(!(e instanceof Element)||!(t instanceof Element))return;let r=e.getAttribute?.("style"),n=!!(r&&r.includes("var("));if(!n&&e.attributes?.length){let a=e.attributes;for(let l=0;l<a.length;l++){let i=a[l];if(i&&typeof i.value=="string"&&i.value.includes("var(")){n=!0;break}}}let o=null;if(n)try{o=getComputedStyle(e)}catch{}if(n){let a=e.style;if(a&&a.length)for(let l=0;l<a.length;l++){let i=a[l],s=a.getPropertyValue(i);if(!s||!s.includes("var("))continue;let c=o&&o.getPropertyValue(i);if(c)try{t.style.setProperty(i,c.trim(),a.getPropertyPriority(i))}catch{}}}if(n&&e.attributes?.length){let a=e.attributes;for(let l=0;l<a.length;l++){let i=a[l];if(!i||typeof i.value!="string"||!i.value.includes("var("))continue;let s=i.name,c=o&&o.getPropertyValue(s);if(c)try{t.style.setProperty(s,c.trim())}catch{}}}if(!n){if(!o)try{o=getComputedStyle(e)}catch{o=null}if(!o)return;let a=e.namespaceURI||"html",l=$n(e.tagName,a);for(let i of qt){let s=o.getPropertyValue(i)||"",c=l[i]||"";if(s&&s!==c)try{t.style.setProperty(i,s.trim())}catch{}}}}function We(e,t,r){return Promise.all(e.map(n=>new Promise(o=>{function a(){ue(l=>{!(l&&typeof l.timeRemaining=="function")||l.timeRemaining()>0?t(n,o):a()},{fast:r})}a()})))}function Mn(e){return e=e.trim(),!e||/:not\(\s*\[data-sd-slotted\]\s*\)\s*$/.test(e)?e:`${e}:not([data-sd-slotted])`}function An(e,t,r=!0){return e.split(",").map(n=>n.trim()).filter(Boolean).map(n=>{if(n.startsWith(":where(")||n.startsWith("@"))return n;let o=r?Mn(n):n;return`:where(${t} ${o})`}).join(", ")}function Nn(e,t){return e?(e=e.replace(/:host\(([^)]+)\)/g,(r,n)=>`:where(${t}:is(${n.trim()}))`),e=e.replace(/:host\b/g,`:where(${t})`),e=e.replace(/:host-context\(([^)]+)\)/g,(r,n)=>`:where(:where(${n.trim()}) ${t})`),e=e.replace(/::slotted\(([^)]+)\)/g,(r,n)=>`:where(${t} ${n.trim()})`),e=e.replace(/(^|})(\s*)([^@}{]+){/g,(r,n,o,a)=>{let l=An(a,t,!0);return`${n}${o}${l}{`}),e):""}function Ln(e){return e.shadowScopeSeq=(e.shadowScopeSeq||0)+1,`s${e.shadowScopeSeq}`}function Fn(e){let t="";try{e.querySelectorAll("style").forEach(n=>{t+=(n.textContent||"")+`
`});let r=e.adoptedStyleSheets||[];for(let n of r)try{if(n&&n.cssRules)for(let o of n.cssRules)t+=o.cssText+`
`}catch{}}catch{}return t}function Pn(e,t,r){if(!t)return;let n=document.createElement("style");n.setAttribute("data-sd",r),n.textContent=t,e.insertBefore(n,e.firstChild||null)}function Tn(e,t){try{let r=e.currentSrc||e.src||"";if(!r)return;t.setAttribute("src",r),t.removeAttribute("srcset"),t.removeAttribute("sizes"),t.loading="eager",t.decoding="sync"}catch{}}function jn(e){let t=new Set;if(!e)return t;let r=/var\(\s*(--[A-Za-z0-9_-]+)\b/g,n;for(;n=r.exec(e);)t.add(n[1]);return t}function Rn(e,t){try{let r=getComputedStyle(e).getPropertyValue(t).trim();if(r)return r}catch{}try{let r=getComputedStyle(document.documentElement).getPropertyValue(t).trim();if(r)return r}catch{}return""}function _n(e,t,r){let n=[];for(let o of t){let a=Rn(e,o);a&&n.push(`${o}: ${a};`)}return n.length?`${r}{${n.join("")}}
`:""}function In(e){e&&(e.nodeType===Node.ELEMENT_NODE&&e.setAttribute("data-sd-slotted",""),e.querySelectorAll&&e.querySelectorAll("*").forEach(t=>t.setAttribute("data-sd-slotted","")))}async function Dn(e,t=3){let r=()=>{try{return e.contentDocument||e.contentWindow?.document||null}catch{return null}},n=r(),o=0;for(;o<t&&(!n||!n.body&&!n.documentElement);)await new Promise(a=>setTimeout(a,0)),n=r(),o++;return n&&(n.body||n.documentElement)?n:null}function Wn(e){let t=e.getBoundingClientRect(),r=0,n=0,o=0,a=0;try{let s=getComputedStyle(e);r=parseFloat(s.borderLeftWidth)||0,n=parseFloat(s.borderRightWidth)||0,o=parseFloat(s.borderTopWidth)||0,a=parseFloat(s.borderBottomWidth)||0}catch{}let l=Math.max(0,Math.round(t.width-(r+n))),i=Math.max(0,Math.round(t.height-(o+a)));return{contentWidth:l,contentHeight:i,rect:t}}function On(e,t,r){let n=e.createElement("style");return n.setAttribute("data-sd-iframe-pin",""),n.textContent=`html, body {margin: 0 !important;padding: 0 !important;width: ${t}px !important;height: ${r}px !important;min-width: ${t}px !important;min-height: ${r}px !important;box-sizing: border-box !important;overflow: hidden !important;background-clip: border-box !important;}`,(e.head||e.documentElement).appendChild(n),()=>{try{n.remove()}catch{}}}async function Un(e,t,r){let n=await Dn(e,3);if(!n)throw new Error("iframe document not accessible/ready");let{contentWidth:o,contentHeight:a,rect:l}=Wn(e),i=r?.snap;if(!i||typeof i.toPng!="function")throw new Error("snapdom.toPng not available in iframe or window");let s={...r,scale:1},c=On(n,o,a),u;try{u=await i.toPng(n.documentElement,s)}finally{c()}u.style.display="block",u.style.width=`${o}px`,u.style.height=`${a}px`;let f=document.createElement("div");return t.nodeMap.set(f,e),de(e,f,t,r),f.style.overflow="hidden",f.style.display="block",f.style.width||(f.style.width=`${Math.round(l.width)}px`),f.style.height||(f.style.height=`${Math.round(l.height)}px`),f.appendChild(u),f}var he=new Map;async function ye(e){if(k.resource?.has(e))return k.resource.get(e);if(he.has(e))return he.get(e);let t=(async()=>{let r=await J(e,{as:"dataURL",silent:!0});if(!r.ok||typeof r.data!="string")throw new Error(`[snapDOM] Failed to read blob URL: ${e}`);return k.resource?.set(e,r.data),r.data})();he.set(e,t);try{let r=await t;return he.set(e,r),r}catch(r){throw he.delete(e),r}}var Bn=/\bblob:[^)"'\s]+/g;async function Ct(e){if(!e||e.indexOf("blob:")===-1)return e;let t=Array.from(new Set(e.match(Bn)||[]));if(t.length===0)return e;let r=e;for(let n of t)try{let o=await ye(n);r=r.split(n).join(o)}catch{}return r}function Ee(e){return typeof e=="string"&&e.startsWith("blob:")}function Vn(e){return(e||"").split(",").map(t=>t.trim()).filter(Boolean).map(t=>{let r=t.match(/^(\S+)(\s+.+)?$/);return r?{url:r[1],desc:r[2]||""}:null}).filter(Boolean)}function zn(e){return e.map(t=>t.desc?`${t.url} ${t.desc.trim()}`:t.url).join(", ")}async function qn(e){if(!e)return;let t=e.querySelectorAll?e.querySelectorAll("img"):[];for(let l of t)try{let i=l.getAttribute("src")||l.currentSrc||"";if(Ee(i)){let c=await ye(i);l.setAttribute("src",c)}let s=l.getAttribute("srcset");if(s&&s.includes("blob:")){let c=Vn(s),u=!1;for(let f of c)if(Ee(f.url))try{f.url=await ye(f.url),u=!0}catch{}u&&l.setAttribute("srcset",zn(c))}}catch{}let r=e.querySelectorAll?e.querySelectorAll("image"):[];for(let l of r)try{let i="http://www.w3.org/1999/xlink",s=l.getAttribute("href")||l.getAttributeNS?.(i,"href");if(Ee(s)){let c=await ye(s);l.setAttribute("href",c),l.removeAttributeNS?.(i,"href")}}catch{}let n=e.querySelectorAll?e.querySelectorAll("[style*='blob:']"):[];for(let l of n)try{let i=l.getAttribute("style");if(i&&i.includes("blob:")){let s=await Ct(i);l.setAttribute("style",s)}}catch{}let o=e.querySelectorAll?e.querySelectorAll("style"):[];for(let l of o)try{let i=l.textContent||"";i.includes("blob:")&&(l.textContent=await Ct(i))}catch{}let a=["poster"];for(let l of a){let i=e.querySelectorAll?e.querySelectorAll(`[${l}^='blob:']`):[];for(let s of i)try{let c=s.getAttribute(l);Ee(c)&&s.setAttribute(l,await ye(c))}catch{}}}async function Ne(e,t,r){if(!e)throw new Error("Invalid node");let n=new Set,o=null,a=null;if(e.nodeType===Node.ELEMENT_NODE){let c=(e.localName||e.tagName||"").toLowerCase();if(e.id==="snapdom-sandbox"||e.hasAttribute("data-snapdom-sandbox")||Nr.has(c))return null}if(e.nodeType===Node.TEXT_NODE||e.nodeType!==Node.ELEMENT_NODE)return e.cloneNode(!0);if(e.getAttribute("data-capture")==="exclude"){if(r.excludeMode==="hide"){let c=document.createElement("div"),u=e.getBoundingClientRect();return c.style.cssText=`display:inline-block;width:${u.width}px;height:${u.height}px;visibility:hidden;`,c}else if(r.excludeMode==="remove")return null}if(r.exclude&&Array.isArray(r.exclude))for(let c of r.exclude)try{if(e.matches?.(c)){if(r.excludeMode==="hide"){let u=document.createElement("div"),f=e.getBoundingClientRect();return u.style.cssText=`display:inline-block;width:${f.width}px;height:${f.height}px;visibility:hidden;`,u}else if(r.excludeMode==="remove")return null}}catch(u){console.warn(`Invalid selector in exclude option: ${c}`,u)}if(typeof r.filter=="function")try{if(!r.filter(e)){if(r.filterMode==="hide"){let c=document.createElement("div"),u=e.getBoundingClientRect();return c.style.cssText=`display:inline-block;width:${u.width}px;height:${u.height}px;visibility:hidden;`,c}else if(r.filterMode==="remove")return null}}catch(c){console.warn("Error in filter function:",c)}if(e.tagName==="IFRAME"){let c=!1;try{c=!!(e.contentDocument||e.contentWindow?.document)}catch{c=!1}if(c)try{return await Un(e,t,r)}catch(u){console.warn("[SnapDOM] iframe rasterization failed, fallback:",u)}if(r.placeholders){let u=document.createElement("div");return u.style.cssText=`width:${e.offsetWidth}px;height:${e.offsetHeight}px;background-image:repeating-linear-gradient(45deg,#ddd,#ddd 5px,#f9f9f9 5px,#f9f9f9 10px);display:flex;align-items:center;justify-content:center;font-size:12px;color:#555;border:1px solid #aaa;`,de(e,u,t,r),u}else{let u=e.getBoundingClientRect(),f=document.createElement("div");return f.style.cssText=`display:inline-block;width:${u.width}px;height:${u.height}px;visibility:hidden;`,de(e,f,t,r),f}}if(e.getAttribute("data-capture")==="placeholder"){let c=e.cloneNode(!1);t.nodeMap.set(c,e),de(e,c,t,r);let u=document.createElement("div");return u.textContent=e.getAttribute("data-placeholder-text")||"",u.style.cssText="color:#666;font-size:12px;text-align:center;line-height:1.4;padding:0.5em;box-sizing:border-box;",c.appendChild(u),c}if(e.tagName==="CANVAS"){let c="";try{let f=e.getContext("2d",{willReadFrequently:!0});try{f&&f.getImageData(0,0,1,1)}catch{}if(await new Promise(m=>requestAnimationFrame(m)),c=e.toDataURL("image/png"),!c||c==="data:,"){try{f&&f.getImageData(0,0,1,1)}catch{}if(await new Promise(m=>requestAnimationFrame(m)),c=e.toDataURL("image/png"),!c||c==="data:,"){let m=document.createElement("canvas");m.width=e.width,m.height=e.height;let y=m.getContext("2d");y&&(y.drawImage(e,0,0),c=m.toDataURL("image/png"))}}}catch{}let u=document.createElement("img");try{u.decoding="sync",u.loading="eager"}catch{}c&&(u.src=c),u.width=e.width,u.height=e.height;try{let f=getComputedStyle(e);f.width&&(u.style.width=f.width),f.height&&(u.style.height=f.height)}catch{}return t.nodeMap.set(u,e),de(e,u,t,r),u}let l;try{if(l=e.cloneNode(!1),En(e,l),t.nodeMap.set(l,e),e.tagName==="IMG"){Tn(e,l);try{let c=e.getBoundingClientRect(),u=Math.round(c.width||0),f=Math.round(c.height||0);if(!u||!f){let m=window.getComputedStyle(e),y=parseFloat(m.width)||0,p=parseFloat(m.height)||0,d=parseInt(e.getAttribute("width")||"",10)||0,h=parseInt(e.getAttribute("height")||"",10)||0,x=e.width||e.naturalWidth||0,w=e.height||e.naturalHeight||0;u=Math.round(u||y||d||x||0),f=Math.round(f||p||h||w||0)}u&&(l.dataset.snapdomWidth=String(u)),f&&(l.dataset.snapdomHeight=String(f))}catch{}try{let c=e.getAttribute("style")||"",u=window.getComputedStyle(e),f=h=>{let x=c.match(new RegExp(`${h}\\s*:\\s*([^;]+)`,"i")),w=x?x[1].trim():u.getPropertyValue(h);return/%|auto/i.test(String(w||""))},m=parseInt(l.dataset.snapdomWidth||"0",10),y=parseInt(l.dataset.snapdomHeight||"0",10),p=f("width")||!m,d=f("height")||!y;p&&m&&(l.style.width=`${m}px`),d&&y&&(l.style.height=`${y}px`),m&&(l.style.minWidth=`${m}px`),y&&(l.style.minHeight=`${y}px`)}catch{}}}catch(c){throw console.error("[Snapdom] Failed to clone node:",e,c),c}if(e instanceof HTMLTextAreaElement){let c=e.getBoundingClientRect();l.style.width=`${c.width}px`,l.style.height=`${c.height}px`}if(e instanceof HTMLInputElement&&(l.value=e.value,l.setAttribute("value",e.value),e.checked!==void 0&&(l.checked=e.checked,e.checked&&l.setAttribute("checked",""),e.indeterminate&&(l.indeterminate=e.indeterminate))),e instanceof HTMLSelectElement&&(o=e.value),e instanceof HTMLTextAreaElement&&(a=e.value),de(e,l,t,r),e.shadowRoot){let c=function(w,b){if(w.nodeType===Node.ELEMENT_NODE&&w.tagName==="STYLE")return b(null);Ne(w,t,r).then(g=>{b(g||null)}).catch(()=>{b(null)})};try{let w=e.shadowRoot.querySelectorAll("slot");for(let b of w){let g=[];try{g=b.assignedNodes?.({flatten:!0})||b.assignedNodes?.()||[]}catch{g=b.assignedNodes?.()||[]}for(let C of g)n.add(C)}}catch{}let u=Ln(t),f=`[data-sd="${u}"]`;try{l.setAttribute("data-sd",u)}catch{}let m=Fn(e.shadowRoot),y=Nn(m,f),p=jn(m),d=_n(e,p,f);Pn(l,d+y,u);let h=document.createDocumentFragment(),x=await We(Array.from(e.shadowRoot.childNodes),c,r.fast);h.append(...x.filter(w=>!!w)),l.appendChild(h)}if(e.tagName==="SLOT"){let c=function(p,d){Ne(p,t,r).then(h=>{h&&In(h),d(h||null)}).catch(()=>{d(null)})},u=e.assignedNodes?.({flatten:!0})||[],f=u.length>0?u:Array.from(e.childNodes),m=document.createDocumentFragment(),y=await We(Array.from(f),c,r.fast);return m.append(...y.filter(p=>!!p)),m}function i(c,u){if(n.has(c))return u(null);Ne(c,t,r).then(f=>{u(f||null)}).catch(()=>{u(null)})}let s=await We(Array.from(e.childNodes),i,r.fast);if(l.append(...s.filter(c=>!!c)),o!==null&&l instanceof HTMLSelectElement){l.value=o;for(let c of l.options)c.value===o?c.setAttribute("selected",""):c.removeAttribute("selected")}return a!==null&&l instanceof HTMLTextAreaElement&&(l.textContent=a),l}function Hn(e){return/\bcounter\s*\(|\bcounters\s*\(/.test(e||"")}function Gn(e){return(e||"").replace(/"([^"]*)"/g,"$1")}function vt(e,t=!1){let r="",n=Math.max(1,e);for(;n>0;)n--,r=String.fromCharCode(97+n%26)+r,n=Math.floor(n/26);return t?r.toUpperCase():r}function kt(e,t=!0){let r=[[1e3,"M"],[900,"CM"],[500,"D"],[400,"CD"],[100,"C"],[90,"XC"],[50,"L"],[40,"XL"],[10,"X"],[9,"IX"],[5,"V"],[4,"IV"],[1,"I"]],n=Math.max(1,Math.min(3999,e)),o="";for(let[a,l]of r)for(;n>=a;)o+=l,n-=a;return t?o:o.toLowerCase()}function $t(e,t){switch((t||"decimal").toLowerCase()){case"decimal":return String(Math.max(0,e));case"decimal-leading-zero":return(e<10?"0":"")+String(Math.max(0,e));case"lower-alpha":return vt(e,!1);case"upper-alpha":return vt(e,!0);case"lower-roman":return kt(e,!1);case"upper-roman":return kt(e,!0);default:return String(Math.max(0,e))}}function Xn(e){let t=()=>k?.session?.__counterEpoch??0,r=t(),n=new WeakMap,o=e instanceof Document?e.documentElement:e,a=m=>m&&m.tagName==="LI",l=m=>{let y=0,p=m?.parentElement;if(!p)return 0;for(let d of p.children){if(d===m)break;d.tagName==="LI"&&y++}return y},i=m=>{let y=new Map;for(let[p,d]of m)y.set(p,d.slice());return y},s=(m,y,p)=>{let d=i(m),h;try{h=p.style?.counterReset||getComputedStyle(p).counterReset}catch{}if(h&&h!=="none")for(let w of h.split(",")){let b=w.trim().split(/\s+/),g=b[0],C=Number.isFinite(Number(b[1]))?Number(b[1]):0;if(!g)continue;let v=y.get(g);if(v&&v.length){let $=v.slice();$.push(C),d.set(g,$)}else d.set(g,[C])}let x;try{x=p.style?.counterIncrement||getComputedStyle(p).counterIncrement}catch{}if(x&&x!=="none")for(let w of x.split(",")){let b=w.trim().split(/\s+/),g=b[0],C=Number.isFinite(Number(b[1]))?Number(b[1]):1;if(!g)continue;let v=d.get(g)||[];v.length===0&&v.push(0),v[v.length-1]+=C,d.set(g,v)}try{if(getComputedStyle(p).display==="list-item"&&a(p)){let w=p.parentElement,b=1;if(w&&w.tagName==="OL"){let C=w.getAttribute("start"),v=Number.isFinite(Number(C))?Number(C):1,$=l(p),E=p.getAttribute("value");b=Number.isFinite(Number(E))?Number(E):v+$}else b=1+l(p);let g=d.get("list-item")||[];g.length===0&&g.push(0),g[g.length-1]=b,d.set("list-item",g)}}catch{}return d},c=(m,y,p)=>{let d=s(p,y,m);n.set(m,d);let h=d;for(let x of m.children)h=c(x,d,h);return d},u=new Map;c(o,u,u);function f(){let m=t();if(m!==r){r=m;let y=new Map;c(o,y,y)}}return{get(m,y){f();let p=n.get(m)?.get(y);return p&&p.length?p[p.length-1]:0},getStack(m,y){f();let p=n.get(m)?.get(y);return p?p.slice():[]}}}function Yn(e,t,r){if(!e||e==="none")return e;try{let n=/\b(counter|counters)\s*\(([^)]+)\)/g,o=e.replace(n,(a,l,i)=>{let s=String(i).split(",").map(c=>c.trim());if(l==="counter"){let c=s[0]?.replace(/^["']|["']$/g,""),u=(s[1]||"decimal").toLowerCase(),f=r.get(t,c);return $t(f,u)}else{let c=s[0]?.replace(/^["']|["']$/g,""),u=s[1]?.replace(/^["']|["']$/g,"")??"",f=(s[2]||"decimal").toLowerCase(),m=r.getStack(t,c);return m.length?m.map(y=>$t(y,f)).join(u):""}});return Gn(o)}catch{return"- "}}var ce=new WeakMap,Et=300;function Qn(e,t){let r=Ht(e);return t?(t.__pseudoPreflightFp!==r&&(t.__pseudoPreflight=At(e),t.__pseudoPreflightFp=r),!!t.__pseudoPreflight):At(e)}function et(e){try{return e&&e.cssRules?e.cssRules:null}catch{return null}}function Ht(e){let t=e.querySelectorAll('style,link[rel~="stylesheet"]'),r=`n:${t.length}|`,n=0;for(let a=0;a<t.length;a++){let l=t[a];if(l.tagName==="STYLE"){let i=l.textContent?l.textContent.length:0;r+=`S${i}|`;let s=l.sheet,c=s?et(s):null;c&&(n+=c.length)}else{let i=l.getAttribute("href")||"",s=l.getAttribute("media")||"all";r+=`L${i}|m:${s}|`;let c=l.sheet,u=c?et(c):null;u&&(n+=u.length)}}let o=e.adoptedStyleSheets;return r+=`ass:${Array.isArray(o)?o.length:0}|tr:${n}`,r}function Mt(e,t,r){let n=et(e);if(!n)return!1;for(let o=0;o<n.length;o++){if(r.budget<=0)return!1;let a=n[o],l=a&&a.cssText?a.cssText:"";r.budget--;for(let i of t)if(l.includes(i))return!0;if(a&&a.cssRules&&a.cssRules.length)for(let i=0;i<a.cssRules.length&&r.budget>0;i++){let s=a.cssRules[i],c=s&&s.cssText?s.cssText:"";r.budget--;for(let u of t)if(c.includes(u))return!0}if(r.budget<=0)return!1}return!1}function At(e=document){let t=Ht(e),r=ce.get(e);if(r&&r.fingerprint===t)return r.result;let n=["::before","::after","::first-letter",":before",":after",":first-letter","counter(","counters(","counter-increment","counter-reset"],o=e.querySelectorAll("style");for(let l=0;l<o.length;l++){let i=o[l].textContent||"";for(let s of n)if(i.includes(s))return ce.set(e,{fingerprint:t,result:!0}),!0}let a=e.adoptedStyleSheets;if(Array.isArray(a)&&a.length){let l={budget:Et};try{for(let i of a)if(Mt(i,n,l))return ce.set(e,{fingerprint:t,result:!0}),!0}catch{}}{let l=e.querySelectorAll('style,link[rel~="stylesheet"]'),i={budget:Et};for(let s=0;s<l.length&&i.budget>0;s++){let c=l[s],u=null;if(c.tagName,u=c.sheet||null,u&&Mt(u,n,i))return ce.set(e,{fingerprint:t,result:!0}),!0}}return e.querySelector('[style*="counter("], [style*="counters("]')?(ce.set(e,{fingerprint:t,result:!0}),!0):(ce.set(e,{fingerprint:t,result:!1}),!1)}var fe=new WeakMap,Nt=-1;function Kn(e){return(e||"").replace(/"([^"]*)"/g,"$1")}function Jn(e){if(!e)return"";let t=[],r=/"([^"]*)"/g,n;for(;n=r.exec(e);)t.push(n[1]);return t.length?t.join(""):Kn(e)}function tt(e,t){let r=e.parentElement,n=r?fe.get(r):null;return n?{get(o,a){let l=t.get(o,a),i=n.get(a);return typeof i=="number"?Math.max(l,i):l},getStack(o,a){let l=t.getStack(o,a);if(!l.length)return l;let i=n.get(a);if(typeof i=="number"){let s=l.slice();return s[s.length-1]=Math.max(s[s.length-1],i),s}return l}}:t}function rt(e,t,r){let n=new Map;function o(s){let c=[];if(!s||s==="none")return c;for(let u of String(s).split(",")){let f=u.trim().split(/\s+/),m=f[0],y=Number.isFinite(Number(f[1]))?Number(f[1]):void 0;m&&c.push({name:m,num:y})}return c}let a=o(t?.counterReset),l=o(t?.counterIncrement);function i(s){if(n.has(s))return n.get(s).slice();let c=r.getStack(e,s);c=c.length?c.slice():[];let u=a.find(m=>m.name===s);if(u){let m=Number.isFinite(u.num)?u.num:0;c=c.length?[...c,m]:[m]}let f=l.find(m=>m.name===s);if(f){let m=Number.isFinite(f.num)?f.num:1;c.length===0&&(c=[0]),c[c.length-1]+=m}return n.set(s,c.slice()),c}return{get(s,c){let u=i(c);return u.length?u[u.length-1]:0},getStack(s,c){return i(c)},__incs:l}}function Zn(e,t,r){let n;try{n=getComputedStyle(e,t)}catch{}let o=n?.content;if(!o||o==="none"||o==="normal")return{text:"",incs:[]};let a=tt(e,r),l=rt(e,n,a),i=Hn(o)?Yn(o,e,l):o;return{text:Jn(i),incs:l.__incs||[]}}async function Gt(e,t,r,n){if(!(e instanceof Element)||!(t instanceof Element))return;let o=e.ownerDocument||document;if(!Qn(o,r))return;let a=k?.session?.__counterEpoch??0;if(Nt!==a&&(fe=new WeakMap,r&&(r.__counterCtx=null),Nt=a),!r.__counterCtx)try{r.__counterCtx=Xn(e.ownerDocument||document)}catch{}let l=r.__counterCtx;for(let c of["::before","::after","::first-letter"])try{let u=_t(e,c);if(!u||u.content==="none"&&u.backgroundImage==="none"&&u.backgroundColor==="transparent"&&(u.borderStyle==="none"||parseFloat(u.borderWidth)===0)&&(!u.transform||u.transform==="none")&&u.display==="inline")continue;if(c==="::first-letter"){let L=getComputedStyle(e);if(!(u.color!==L.color||u.fontSize!==L.fontSize||u.fontWeight!==L.fontWeight))continue;let F=Array.from(t.childNodes).find(ne=>ne.nodeType===Node.TEXT_NODE&&ne.textContent?.trim().length>0);if(!F)continue;let W=F.textContent,R=W.match(/^([^\p{L}\p{N}\s]*[\p{L}\p{N}](?:['’])?)/u)?.[0],q=W.slice(R?.length||0);if(!R||/[\uD800-\uDFFF]/.test(R))continue;let V=document.createElement("span");V.textContent=R,V.dataset.snapdomPseudo="::first-letter";let oe=ht(u),re=Ye(oe,"span");r.styleMap.set(V,re);let ae=document.createTextNode(q);t.replaceChild(ae,F),t.insertBefore(V,ae);continue}let f=u.content??"",m=f===""||f==="none"||f==="normal",{text:y,incs:p}=Zn(e,c,l),d=u.backgroundImage,h=u.backgroundColor,x=u.fontFamily,w=parseInt(u.fontSize)||32,b=parseInt(u.fontWeight)||!1,g=u.color||"#000",C=u.borderStyle,v=parseFloat(u.borderWidth),$=u.transform,E=Z(x),j=!m&&y!=="",T=d&&d!=="none",N=h&&h!=="transparent"&&h!=="rgba(0, 0, 0, 0)",I=C&&C!=="none"&&v>0,P=$&&$!=="none";if(!(j||T||N||I||P)){if(p&&p.length&&e.parentElement){let L=fe.get(e.parentElement)||new Map;for(let{name:F}of p){if(!F)continue;let W=tt(e,l),R=rt(e,getComputedStyle(e,c),W).get(e,F);L.set(F,R)}fe.set(e.parentElement,L)}continue}let M=document.createElement("span");M.dataset.snapdomPseudo=c,M.style.pointerEvents="none";let _=ht(u),B=Ye(_,"span");if(r.styleMap.set(M,B),E&&y&&y.length===1){let{dataUrl:L,width:F,height:W}=await Hr(y,x,b,w,g),R=document.createElement("img");R.src=L,R.style=`height:${w}px;width:${F/W*w}px;object-fit:contain;`,M.appendChild(R),t.dataset.snapdomHasIcon="true"}else if(y&&y.startsWith("url(")){let L=ot(y);if(L?.trim())try{let F=document.createElement("img"),W=await J(Le(L),{as:"dataURL",useProxy:n.useProxy});F.src=W.data,F.style=`width:${w}px;height:auto;object-fit:contain;`,M.appendChild(F)}catch(F){console.error(`[snapdom] Error in pseudo ${c} for`,e,F)}}else!E&&j&&(M.textContent=y);M.style.backgroundImage="none","maskImage"in M.style&&(M.style.maskImage="none"),"webkitMaskImage"in M.style&&(M.style.webkitMaskImage="none");try{M.style.backgroundRepeat=u.backgroundRepeat,M.style.backgroundSize=u.backgroundSize,u.backgroundPositionX&&u.backgroundPositionY?(M.style.backgroundPositionX=u.backgroundPositionX,M.style.backgroundPositionY=u.backgroundPositionY):M.style.backgroundPosition=u.backgroundPosition,M.style.backgroundOrigin=u.backgroundOrigin,M.style.backgroundClip=u.backgroundClip,M.style.backgroundAttachment=u.backgroundAttachment,M.style.backgroundBlendMode=u.backgroundBlendMode}catch{}if(T)try{let L=It(d),F=await Promise.all(L.map(jt));M.style.backgroundImage=F.join(", ")}catch(L){console.warn(`[snapdom] Failed to inline background-image for ${c}`,L)}N&&(M.style.backgroundColor=h);let U=M.childNodes.length>0||M.textContent?.trim()!==""||T||N||I||P;if(p&&p.length&&e.parentElement){let L=fe.get(e.parentElement)||new Map,F=tt(e,l),W=rt(e,getComputedStyle(e,c),F);for(let{name:R}of p){if(!R)continue;let q=W.get(e,R);L.set(R,q)}fe.set(e.parentElement,L)}if(!U)continue;c==="::before"?t.insertBefore(M,t.firstChild):t.appendChild(M)}catch(u){console.warn(`[snapdom] Failed to capture ${c} for`,e,u)}let i=Array.from(e.children),s=Array.from(t.children).filter(c=>!c.dataset.snapdomPseudo);for(let c=0;c<Math.min(i.length,s.length);c++)await Gt(i[c],s[c],r,n)}function eo(e,t){if(!e||!(e instanceof Element))return;let r=e.ownerDocument||document,n=r,o=e instanceof SVGSVGElement?[e]:Array.from(e.querySelectorAll("svg"));if(o.length===0)return;let a=/url\(\s*#([^)]+)\)/g,l=["fill","stroke","filter","clip-path","mask","marker","marker-start","marker-mid","marker-end"],i=g=>window.CSS&&CSS.escape?CSS.escape(g):g.replace(/[^a-zA-Z0-9_-]/g,"\\$&"),s="http://www.w3.org/1999/xlink",c=g=>{if(!g||!g.getAttribute)return null;let C=g.getAttribute("href")||g.getAttribute("xlink:href")||(typeof g.getAttributeNS=="function"?g.getAttributeNS(s,"href"):null);if(C)return C;let v=g.attributes;if(!v)return null;for(let $=0;$<v.length;$++){let E=v[$];if(!E||!E.name)continue;if(E.name==="href")return E.value;let j=E.name.indexOf(":");if(j!==-1&&E.name.slice(j+1)==="href")return E.value}return null},u=new Set(Array.from(e.querySelectorAll("[id]")).map(g=>g.id)),f=new Set,m=!1,y=(g,C=null)=>{if(!g)return;a.lastIndex=0;let v;for(;v=a.exec(g);){m=!0;let $=(v[1]||"").trim();$&&(u.has($)||(f.add($),C&&!C.has($)&&C.add($)))}},p=g=>{let C=g.querySelectorAll("use");for(let $ of C){let E=c($);if(!E||!E.startsWith("#"))continue;m=!0;let j=E.slice(1).trim();j&&!u.has(j)&&f.add(j)}let v=g.querySelectorAll('*[style*="url("],*[fill^="url("], *[stroke^="url("],*[filter^="url("],*[clip-path^="url("],*[mask^="url("],*[marker^="url("],*[marker-start^="url("],*[marker-mid^="url("],*[marker-end^="url("]');for(let $ of v){y($.getAttribute("style")||"");for(let E of l)y($.getAttribute(E))}};for(let g of o)p(g);if(!m)return;let d=e.querySelector("svg.inline-defs-container");d||(d=r.createElementNS("http://www.w3.org/2000/svg","svg"),d.classList.add("inline-defs-container"),d.setAttribute("aria-hidden","true"),d.setAttribute("style","position:absolute;width:0;height:0;overflow:hidden"),e.insertBefore(d,e.firstChild||null));let h=d.querySelector("defs")||null,x=g=>{if(!g||u.has(g))return null;let C=i(g),v=$=>{let E=n.querySelector($);return E&&!e.contains(E)?E:null};return v(`svg defs > *#${C}`)||v(`svg > symbol#${C}`)||v(`*#${C}`)};if(!f.size)return;let w=new Set(f),b=new Set;for(;w.size;){let g=w.values().next().value;if(w.delete(g),!g||u.has(g)||b.has(g))continue;let C=x(g);if(!C){b.add(g);continue}h||(h=r.createElementNS("http://www.w3.org/2000/svg","defs"),d.appendChild(h));let v=C.cloneNode(!0);v.id||v.setAttribute("id",g),h.appendChild(v),b.add(g),u.add(g);let $=[v,...v.querySelectorAll("*")];for(let E of $){let j=c(E);if(j&&j.startsWith("#")){let N=j.slice(1).trim();N&&!u.has(N)&&!b.has(N)&&w.add(N)}let T=E.getAttribute?.("style")||"";T&&y(T,w);for(let N of l){let I=E.getAttribute?.(N);I&&y(I,w)}}}}function to(e,t){if(!e||!t)return;let r=e.scrollTop||0;if(!r)return;getComputedStyle(t).position==="static"&&(t.style.position="relative");let n=e.getBoundingClientRect(),o=e.clientHeight,a="data-snap-ph",l=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT);for(;l.nextNode();){let i=l.currentNode,s=getComputedStyle(i),c=s.position;if(c!=="sticky"&&c!=="-webkit-sticky")continue;let u=Lt(s.top),f=Lt(s.bottom);if(u==null&&f==null)continue;let m=ro(i,e),y=no(t,m,a);if(!y)continue;let p=i.getBoundingClientRect(),d=p.width,h=p.height,x=p.left-n.left;if(!(d>0&&h>0)||!Number.isFinite(x))continue;let w=u!=null?u+r:r+(o-h-f);if(!Number.isFinite(w))continue;let b=Number.parseInt(s.zIndex,10),g=Number.isFinite(b),C=g?Math.max(b,1)+1:2,v=g?b-1:0,$=y.cloneNode(!1);$.setAttribute(a,"1"),$.style.position="sticky",$.style.left=`${x}px`,$.style.top=`${w}px`,$.style.width=`${d}px`,$.style.height=`${h}px`,$.style.visibility="hidden",$.style.zIndex=String(v),$.style.overflow="hidden",$.style.background="transparent",$.style.boxShadow="none",$.style.filter="none",y.parentElement?.insertBefore($,y),y.style.position="absolute",y.style.left=`${x}px`,y.style.top=`${w}px`,y.style.bottom="auto",y.style.zIndex=String(C),y.style.pointerEvents="none"}}function Lt(e){if(!e||e==="auto")return null;let t=Number.parseFloat(e);return Number.isFinite(t)?t:null}function ro(e,t){let r=[];for(let n=e;n&&n!==t;){let o=n.parentElement;if(!o)break;r.push(Array.prototype.indexOf.call(o.children,n)),n=o}return r.reverse()}function no(e,t,r){let n=e;for(let o=0;o<t.length;o++)if(n=oo(n,r)[t[o]],!n)return null;return n instanceof HTMLElement?n:null}function oo(e,t){let r=[],n=e.children;for(let o=0;o<n.length;o++){let a=n[o];a.hasAttribute(t)||r.push(a)}return r}function ao(e){let t=getComputedStyle(e),r=t.outlineStyle,n=t.outlineWidth,o=t.borderStyle,a=t.borderWidth,l=r!=="none"&&parseFloat(n)>0,i=o==="none"||parseFloat(a)===0;l&&i&&(e.style.border=`${n} solid transparent`)}async function lo(e,t={}){let r={styleMap:k.session.styleMap,styleCache:k.session.styleCache,nodeMap:k.session.nodeMap},n,o="",a="";ao(e);try{eo(e)}catch(s){console.warn("inlineExternal defs or symbol failed:",s)}try{n=await Ne(e,r,t,e)}catch(s){throw console.warn("deepClone failed:",s),s}try{await Gt(e,n,r,t)}catch(s){console.warn("inlinePseudoElements failed:",s)}await qn(n);try{let s=n.querySelectorAll("style[data-sd]");for(let c of s)a+=c.textContent||"",c.remove()}catch{}let l=_r(r.styleMap);o=Array.from(l.entries()).map(([s,c])=>`.${c}{${s}}`).join(""),o=a+o;for(let[s,c]of r.styleMap.entries()){if(s.tagName==="STYLE")continue;if(s.getRootNode&&s.getRootNode()instanceof ShadowRoot){s.setAttribute("style",c.replace(/;/g,"; "));continue}let u=l.get(c);u&&s.classList.add(u);let f=s.style?.backgroundImage,m=s.dataset?.snapdomHasIcon;f&&f!=="none"&&(s.style.backgroundImage=f),m&&(s.style.verticalAlign="middle",s.style.display="inline")}for(let[s,c]of r.nodeMap.entries()){let u=c.scrollLeft,f=c.scrollTop;if((u||f)&&s instanceof HTMLElement){s.style.overflow="hidden",s.style.scrollbarWidth="none",s.style.msOverflowStyle="none";let m=document.createElement("div");for(m.style.transform=`translate(${-u}px, ${-f}px)`,m.style.willChange="transform",m.style.display="inline-block",m.style.width="100%";s.firstChild;)m.appendChild(s.firstChild);s.appendChild(m)}}let i=n instanceof HTMLElement&&n.firstElementChild instanceof HTMLElement?n.firstElementChild:n;if(to(e,i),e===r.nodeMap.get(n)){let s=r.styleCache.get(e)||window.getComputedStyle(e);r.styleCache.set(e,s);let c=Cr(s.transform);n.style.margin="0",n.style.top="auto",n.style.left="auto",n.style.right="auto",n.style.bottom="auto",n.style.animation="none",n.style.transition="none",n.style.willChange="auto",n.style.float="none",n.style.clear="none",n.style.transform=c||""}for(let[s,c]of r.nodeMap.entries())c.tagName==="PRE"&&(s.style.marginTop="0",s.style.marginBlockStart="0");return{clone:n,classCSS:o,styleCache:r.styleCache}}function io(e){let t=parseInt(e.dataset?.snapdomWidth||"",10)||0,r=parseInt(e.dataset?.snapdomHeight||"",10)||0,n=parseInt(e.getAttribute("width")||"",10)||0,o=parseInt(e.getAttribute("height")||"",10)||0,a=parseFloat(e.style?.width||"")||0,l=parseFloat(e.style?.height||"")||0,i=t||a||n||e.width||e.naturalWidth||100,s=r||l||o||e.height||e.naturalHeight||100;return{width:i,height:s}}async function so(e,t={}){let r=Array.from(e.querySelectorAll("img")),n=async o=>{if(!o.getAttribute("src")){let u=o.currentSrc||o.src||"";u&&o.setAttribute("src",u)}o.removeAttribute("srcset"),o.removeAttribute("sizes");let a=o.src||"";if(!a)return;let l=await J(a,{as:"dataURL",useProxy:t.useProxy});if(l.ok&&typeof l.data=="string"&&l.data.startsWith("data:")){o.src=l.data,o.width||(o.width=o.naturalWidth||100),o.height||(o.height=o.naturalHeight||100);return}let{width:i,height:s}=io(o),{fallbackURL:c}=t||{};if(c)try{let u=typeof c=="function"?await c({width:i,height:s,src:a,element:o}):c;if(u){let f=await J(u,{as:"dataURL",useProxy:t.useProxy});o.src=f.data,o.width||(o.width=i),o.height||(o.height=s);return}}catch{}if(t.placeholders!==!1){let u=document.createElement("div");u.style.cssText=[`width:${i}px`,`height:${s}px`,"background:#ccc","display:inline-block","text-align:center",`line-height:${s}px`,"color:#666","font-size:12px","overflow:hidden"].join(";"),u.textContent="img",o.replaceWith(u)}else{let u=document.createElement("div");u.style.cssText=`display:inline-block;width:${i}px;height:${s}px;visibility:hidden;`,o.replaceWith(u)}};for(let o=0;o<r.length;o+=4){let a=r.slice(o,o+4).map(n);await Promise.allSettled(a)}}function co(e){if(!e)return()=>{};let t=uo(e);if(t<=0)return()=>{};if(!ho(e))return()=>{};let r=getComputedStyle(e),n=Math.round(fo(r)*t+mo(r)),o=e.textContent??"",a=o;if(e.scrollHeight<=n+.5)return()=>{};let l=0,i=o.length,s=-1;for(;l<=i;){let c=l+i>>1;e.textContent=o.slice(0,c)+"…",e.scrollHeight<=n+.5?(s=c,l=c+1):i=c-1}return e.textContent=(s>=0?o.slice(0,s):"")+"…",()=>{e.textContent=a}}function uo(e){let t=getComputedStyle(e),r=t.getPropertyValue("-webkit-line-clamp")||t.getPropertyValue("line-clamp");r=(r||"").trim();let n=parseInt(r,10);return Number.isFinite(n)&&n>0?n:0}function fo(e){let t=(e.lineHeight||"").trim(),r=parseFloat(e.fontSize)||16;return!t||t==="normal"?Math.round(r*1.2):t.endsWith("px")?parseFloat(t):/^\d+(\.\d+)?$/.test(t)?Math.round(parseFloat(t)*r):t.endsWith("%")?Math.round(parseFloat(t)/100*r):Math.round(r*1.2)}function mo(e){return(parseFloat(e.paddingTop)||0)+(parseFloat(e.paddingBottom)||0)}function ho(e){return e.childElementCount>0?!1:Array.from(e.childNodes).some(t=>t.nodeType===Node.TEXT_NODE)}function po(e,t){if(!e||!t||!t.style)return;let r=getComputedStyle(e);try{t.style.boxShadow="none"}catch{}try{t.style.textShadow="none"}catch{}try{t.style.outline="none"}catch{}let n=(r.filter||"").replace(/\bblur\([^()]*\)\s*/gi,"").replace(/\bdrop-shadow\([^()]*\)\s*/gi,"").trim().replace(/\s+/g," ");try{t.style.filter=n.length?n:"none"}catch{}}function go(e){let t=document.createTreeWalker(e,NodeFilter.SHOW_COMMENT),r=[];for(;t.nextNode();)r.push(t.currentNode);for(let n of r)n.remove()}function yo(e,t={}){let{stripFrameworkDirectives:r=!0}=t,n=new Set(["xml","xlink"]),o=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT);for(;o.nextNode();){let a=o.currentNode;for(let l of Array.from(a.attributes)){let i=l.name;if(i.includes("@")){a.removeAttribute(i);continue}if(i.includes(":")){let s=i.split(":",1)[0];if(!n.has(s)){a.removeAttribute(i);continue}}if(r&&(i.startsWith("x-")||i.startsWith("v-")||i.startsWith(":")||i.startsWith("on:")||i.startsWith("bind:")||i.startsWith("let:")||i.startsWith("class:"))){a.removeAttribute(i);continue}}}}function wo(e,t={}){e&&(yo(e,t),go(e))}function bo(e){try{let t=e.getAttribute?.("style")||"";return/\b(height|width|block-size|inline-size)\s*:/.test(t)}catch{return!1}}function xo(e){return e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof HTMLIFrameElement||e instanceof SVGElement||e instanceof HTMLObjectElement||e instanceof HTMLEmbedElement}function So(e,t){if(!(e instanceof Element)||bo(e)||xo(e))return!1;let r=t.position;if(r==="absolute"||r==="fixed"||r==="sticky")return!1;let n=t.display||"";return!(n.includes("flex")||n.includes("grid")||n.startsWith("table")||t.transform&&t.transform!=="none")}function Co(e,t,r=new Map){function n(o,a){if(!(o instanceof Element)||!(a instanceof Element))return;let l=o.childElementCount>a.childElementCount,i=r.get(o)||getComputedStyle(o);if(r.has(o)||r.set(o,i),l&&So(o,i)){a.style.height||(a.style.height="auto"),a.style.width||(a.style.width="auto"),a.style.removeProperty("block-size"),a.style.removeProperty("inline-size"),a.style.minHeight||(a.style.minHeight="0"),a.style.minWidth||(a.style.minWidth="0"),a.style.maxHeight||(a.style.maxHeight="none"),a.style.maxWidth||(a.style.maxWidth="none");let u=i.overflowY||i.overflowBlock||"visible",f=i.overflowX||i.overflowInline||"visible";(u!=="visible"||f!=="visible")&&(a.style.overflow="visible")}let s=Array.from(o.children),c=Array.from(a.children);for(let u=0;u<Math.min(s.length,c.length);u++)n(s[u],c[u])}n(e,t)}function vo(e){let t=getComputedStyle(e);return!(t.display==="none"||t.position==="absolute"||t.position==="fixed"||t.position==="sticky"||(t.cssFloat||t.float||"none")!=="none"||t.transform&&t.transform!=="none")}function ko(e,t){if(!(e instanceof Element))return!1;if(e.getAttribute("data-capture")==="exclude"&&t?.excludeMode==="remove")return!0;if(Array.isArray(t?.exclude))for(let r of t.exclude)try{if(e.matches(r))return t.excludeMode==="remove"}catch{}return!1}function $o(e,t){let r=getComputedStyle(e),n=e.getBoundingClientRect(),o=1/0,a=-1/0,l=!1,i=Array.from(e.children);for(let y of i){if(ko(y,t)||!vo(y))continue;let p=y.getBoundingClientRect(),d=p.top-n.top,h=p.bottom-n.top;h<=d||(d<o&&(o=d),h>a&&(a=h),l=!0)}let s=l?Math.max(0,a-o):0,c=parseFloat(r.borderTopWidth)||0,u=parseFloat(r.borderBottomWidth)||0,f=parseFloat(r.paddingTop)||0,m=parseFloat(r.paddingBottom)||0;return c+u+f+m+s}var A=(e,t=3)=>Number.isFinite(e)?Math.round(e*10**t)/10**t:e;function Eo(e){let t=e.boxShadow||"";if(!t||t==="none")return{top:0,right:0,bottom:0,left:0};let r=t.split(/\),(?=(?:[^()]*\([^()]*\))*[^()]*$)/).map(i=>i.trim()),n=0,o=0,a=0,l=0;for(let i of r){let s=i.match(/-?\d+(\.\d+)?px/g)?.map(d=>parseFloat(d))||[];if(s.length<2)continue;let[c,u,f=0,m=0]=s,y=Math.abs(c)+f+m,p=Math.abs(u)+f+m;o=Math.max(o,y+Math.max(c,0)),l=Math.max(l,y+Math.max(-c,0)),a=Math.max(a,p+Math.max(u,0)),n=Math.max(n,p+Math.max(-u,0))}return{top:Math.ceil(n),right:Math.ceil(o),bottom:Math.ceil(a),left:Math.ceil(l)}}function Mo(e){let t=(e.filter||"").match(/blur\(\s*([0-9.]+)px\s*\)/),r=t?Math.ceil(parseFloat(t[1])||0):0;return{top:r,right:r,bottom:r,left:r}}function Ao(e){if((e.outlineStyle||"none")==="none")return{top:0,right:0,bottom:0,left:0};let t=Math.ceil(parseFloat(e.outlineWidth||"0")||0);return{top:t,right:t,bottom:t,left:t}}function No(e){let t=`${e.filter||""} ${e.webkitFilter||""}`.trim();if(!t||t==="none")return{bleed:{top:0,right:0,bottom:0,left:0},has:!1};let r=t.match(/drop-shadow\((?:[^()]|\([^()]*\))*\)/gi)||[],n=0,o=0,a=0,l=0,i=!1;for(let s of r){i=!0;let c=s.match(/-?\d+(?:\.\d+)?px/gi)?.map(d=>parseFloat(d))||[],[u=0,f=0,m=0]=c,y=Math.abs(u)+m,p=Math.abs(f)+m;o=Math.max(o,y+Math.max(u,0)),l=Math.max(l,y+Math.max(-u,0)),a=Math.max(a,p+Math.max(f,0)),n=Math.max(n,p+Math.max(-f,0))}return{bleed:{top:A(n),right:A(o),bottom:A(a),left:A(l)},has:i}}function Lo(e,t){if(!e||!t||!t.style)return null;let r=getComputedStyle(e);try{t.style.transformOrigin="0 0"}catch{}try{"translate"in t.style&&(t.style.translate="none"),"rotate"in t.style&&(t.style.rotate="none")}catch{}let n=r.transform||"none";if(n==="none")try{let a=Xt(e);if(a.a===1&&a.b===0&&a.c===0&&a.d===1)return t.style.transform="none",{a:1,b:0,c:0,d:1}}catch{}let o=n.match(/^matrix\(\s*([^)]+)\)$/i);if(o){let a=o[1].split(",").map(l=>parseFloat(l.trim()));if(a.length===6&&a.every(Number.isFinite)){let[l,i,s,c]=a,u=Math.sqrt(l*l+i*i)||0,f=0,m=0,y=0,p=0,d=0,h=0;u>0&&(f=l/u,m=i/u,y=f*s+m*c,p=s-f*y,d=c-m*y,h=Math.sqrt(p*p+d*d)||0,h>0?y=y/h:y=0);let x=u,w=0,b=y*h,g=h;try{t.style.transform=`matrix(${x}, ${w}, ${b}, ${g}, 0, 0)`}catch{}return{a:x,b:w,c:b,d:g}}}try{let a=String(n).trim();return t.style.transform=a+" translate(0px, 0px) rotate(0deg)",null}catch{return null}}function Ft(e,t,r,n,o){let a=r.a,l=r.b,i=r.c,s=r.d,c=r.e||0,u=r.f||0;function f(x,w){let b=x-n,g=w-o,C=a*b+i*g,v=l*b+s*g;return C+=n+c,v+=o+u,[C,v]}let m=[f(0,0),f(e,0),f(0,t),f(e,t)],y=1/0,p=1/0,d=-1/0,h=-1/0;for(let[x,w]of m)x<y&&(y=x),w<p&&(p=w),x>d&&(d=x),w>h&&(h=w);return{minX:y,minY:p,maxX:d,maxY:h,width:d-y,height:h-p}}function Fo(e,t,r){let n=(e.transformOrigin||"0 0").trim().split(/\s+/),[o,a]=[n[0]||"0",n[1]||"0"],l=(i,s)=>{let c=i.toLowerCase();return c==="left"||c==="top"?0:c==="center"?s/2:c==="right"||c==="bottom"?s:c.endsWith("px")?parseFloat(c)||0:c.endsWith("%")?(parseFloat(c)||0)*s/100:/^-?\d+(\.\d+)?$/.test(c)&&parseFloat(c)||0};return{ox:l(o,t),oy:l(a,r)}}function Po(e){let t={rotate:"0deg",scale:null,translate:null},r=typeof e.computedStyleMap=="function"?e.computedStyleMap():null;if(r){let o=s=>{try{return typeof r.has=="function"&&!r.has(s)||typeof r.get!="function"?null:r.get(s)}catch{return null}},a=o("rotate");if(a)if(a.angle){let s=a.angle;t.rotate=s.unit==="rad"?s.value*180/Math.PI+"deg":s.value+s.unit}else a.unit?t.rotate=a.unit==="rad"?a.value*180/Math.PI+"deg":a.value+a.unit:t.rotate=String(a);else{let s=getComputedStyle(e);t.rotate=s.rotate&&s.rotate!=="none"?s.rotate:"0deg"}let l=o("scale");if(l){let s="x"in l&&l.x?.value!=null?l.x.value:Array.isArray(l)?l[0]?.value:Number(l)||1,c="y"in l&&l.y?.value!=null?l.y.value:Array.isArray(l)?l[1]?.value:s;t.scale=`${s} ${c}`}else{let s=getComputedStyle(e);t.scale=s.scale&&s.scale!=="none"?s.scale:null}let i=o("translate");if(i){let s="x"in i&&"value"in i.x?i.x.value:Array.isArray(i)?i[0]?.value:0,c="y"in i&&"value"in i.y?i.y.value:Array.isArray(i)?i[1]?.value:0,u="x"in i&&i.x?.unit?i.x.unit:"px",f="y"in i&&i.y?.unit?i.y.unit:"px";t.translate=`${s}${u} ${c}${f}`}else{let s=getComputedStyle(e);t.translate=s.translate&&s.translate!=="none"?s.translate:null}return t}let n=getComputedStyle(e);return t.rotate=n.rotate&&n.rotate!=="none"?n.rotate:"0deg",t.scale=n.scale&&n.scale!=="none"?n.scale:null,t.translate=n.translate&&n.translate!=="none"?n.translate:null,t}var Oe=null;function To(){if(Oe)return Oe;let e=document.createElement("div");return e.id="snapdom-measure-slot",e.setAttribute("aria-hidden","true"),Object.assign(e.style,{position:"absolute",left:"-99999px",top:"0px",width:"0px",height:"0px",overflow:"hidden",opacity:"0",pointerEvents:"none",contain:"size layout style"}),document.documentElement.appendChild(e),Oe=e,e}function jo(e){let t=To(),r=document.createElement("div");r.style.transformOrigin="0 0",e.baseTransform&&(r.style.transform=e.baseTransform),e.rotate&&(r.style.rotate=e.rotate),e.scale&&(r.style.scale=e.scale),e.translate&&(r.style.translate=e.translate),t.appendChild(r);let n=Xt(r);return t.removeChild(r),n}function Ro(e){let t=getComputedStyle(e),r=t.transform||"none";if(r!=="none"&&!/^matrix\(\s*1\s*,\s*0\s*,\s*0\s*,\s*1\s*,\s*0\s*,\s*0\s*\)$/i.test(r))return!0;let n=t.rotate&&t.rotate!=="none"&&t.rotate!=="0deg",o=t.scale&&t.scale!=="none"&&t.scale!=="1",a=t.translate&&t.translate!=="none"&&t.translate!=="0px 0px";return!!(n||o||a)}function Xt(e){let t=getComputedStyle(e).transform;if(!t||t==="none")return new DOMMatrix;try{return new DOMMatrix(t)}catch{return new WebKitCSSMatrix(t)}}async function Yt(e,t){if(!e)throw new Error("Element cannot be null or undefined");Sr(t.cache);let r=t.fast,n=t.outerTransforms!==!1,o=!!t.outerShadows,a={element:e,options:t,plugins:t.plugins},l,i,s,c="",u="",f,m,y=null;await te("beforeSnap",a),await te("beforeClone",a);let p=co(a.element);try{({clone:l,classCSS:i,styleCache:s}=await lo(a.element,a.options)),!n&&l&&(y=Lo(a.element,l)),!o&&l&&po(a.element,l)}finally{p()}if(a={clone:l,classCSS:i,styleCache:s,...a},await te("afterClone",a),wo(a.clone),a.options?.excludeMode==="remove")try{Co(a.element,a.clone,a.styleCache)}catch(w){console.warn("[snapdom] shrink pass failed:",w)}try{await qr(a.clone,a.element)}catch{}await new Promise(w=>{ue(async()=>{await so(a.clone,a.options),w()},{fast:r})}),await new Promise(w=>{ue(async()=>{await un(a.element,a.clone,a.styleCache,a.options),w()},{fast:r})}),t.embedFonts&&await new Promise(w=>{ue(async()=>{let b=ln(a.element),g=sn(a.element);if(pe()){let C=new Set(Array.from(b).map(v=>String(v).split("__")[0]).filter(Boolean));await cn(C,1)}c=await an({required:b,usedCodepoints:g,exclude:a.options.excludeFonts,useProxy:a.options.useProxy}),w()},{fast:r})});let d=jr(a.clone).sort(),h=d.join(",");k.baseStyle.has(h)?u=k.baseStyle.get(h):await new Promise(w=>{ue(()=>{u=Rr(d),k.baseStyle.set(h,u),w()},{fast:r})}),a={fontsCSS:c,baseCSS:u,...a},await te("beforeRender",a),await new Promise(w=>{ue(()=>{let b=getComputedStyle(a.element),g=a.element.getBoundingClientRect(),C=Math.max(1,A(a.element.offsetWidth||parseFloat(b.width)||g.width||1)),v=Math.max(1,A(a.element.offsetHeight||parseFloat(b.height)||g.height||1));if(a.options?.excludeMode==="remove"){let Y=$o(a.element,a.options);Number.isFinite(Y)&&Y>0&&(v=Math.max(1,Math.min(v,A(Y+1))))}let $=(Y,K=NaN)=>{let ie=typeof Y=="string"?parseFloat(Y):Y;return Number.isFinite(ie)?ie:K},E=$(a.options.width),j=$(a.options.height),T=C,N=v,I=Number.isFinite(E),P=Number.isFinite(j),M=v>0?C/v:1;I&&P?(T=Math.max(1,A(E)),N=Math.max(1,A(j))):I?(T=Math.max(1,A(E)),N=Math.max(1,A(T/(M||1)))):P?(N=Math.max(1,A(j)),T=Math.max(1,A(N*(M||1)))):(T=C,N=v);let _=0,B=0,U=C,L=v;if(!n&&y&&Number.isFinite(y.a)){let Y={a:y.a,b:y.b||0,c:y.c||0,d:y.d||1,e:0,f:0},K=Ft(C,v,Y,0,0);_=A(K.minX),B=A(K.minY),U=A(K.maxX),L=A(K.maxY)}else if(n&&_o(a.element)){let Y=b.transform&&b.transform!=="none"?b.transform:"",K=Po(a.element),ie=jo({baseTransform:Y,rotate:K.rotate||"0deg",scale:K.scale,translate:K.translate}),{ox:nr,oy:or}=Fo(b,C,v),ar=ie.is2D?ie:new DOMMatrix(ie.toString()),Ce=Ft(C,v,ar,nr,or);_=A(Ce.minX),B=A(Ce.minY),U=A(Ce.maxX),L=A(Ce.maxY)}let F=Eo(b),W=Mo(b),R=Ao(b),q=No(b),V=o?{top:A(F.top+W.top+R.top+q.bleed.top),right:A(F.right+W.right+R.right+q.bleed.right),bottom:A(F.bottom+W.bottom+R.bottom+q.bleed.bottom),left:A(F.left+W.left+R.left+q.bleed.left)}:{top:0,right:0,bottom:0,left:0};_=A(_-V.left),B=A(B-V.top),U=A(U+V.right),L=A(L+V.bottom);let oe=Math.max(1,A(U-_)),re=Math.max(1,A(L-B)),ae=I||P?A(T/C):1,ne=P||I?A(N/v):1,be=Math.max(1,A(oe*ae)),ct=Math.max(1,A(re*ne)),xe="http://www.w3.org/2000/svg",Se=pe()?1:0,G=A(Se+(n?0:1)),Q=document.createElementNS(xe,"foreignObject"),Te=A(_),je=A(B);Q.setAttribute("x",String(A(-(Te-G)))),Q.setAttribute("y",String(A(-(je-G)))),Q.setAttribute("width",String(A(C+G*2))),Q.setAttribute("height",String(A(v+G*2))),Q.style.overflow="visible";let me=document.createElement("style");me.textContent=a.baseCSS+a.fontsCSS+"svg{overflow:visible;} foreignObject{overflow:visible;}"+a.classCSS,Q.appendChild(me);let le=document.createElement("div");le.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),le.style.width=`${A(C)}px`,le.style.height=`${A(v)}px`,le.style.overflow="visible",le.appendChild(a.clone),Q.appendChild(le);let er=new XMLSerializer().serializeToString(Q),Re=A(oe+G*2),_e=A(re+G*2),ut=I||P;t.meta={w0:C,h0:v,vbW:Re,vbH:_e,targetW:T,targetH:N};let tr=pe()&&ut?Re:A(be+G*2),rr=pe()&&ut?_e:A(ct+G*2);m=`<svg xmlns="${xe}" width="${tr}" height="${rr}" viewBox="0 0 ${Re} ${_e}">`+er+"</svg>",f=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(m)}`,a={svgString:m,dataURL:f,...a},w()},{fast:r})}),await te("afterRender",a);let x=document.getElementById("snapdom-sandbox");return x&&x.style.position==="absolute"&&x.remove(),a.dataURL}function _o(e){return Ro(e)}function Io(e){if(typeof e=="string"){let t=e.toLowerCase().trim();if(t==="disabled"||t==="full"||t==="auto"||t==="soft")return t}return"soft"}function Do(e={}){let t=e.format??"png";t==="jpg"&&(t="jpeg");let r=Io(e.cache);return{debug:e.debug??!1,fast:e.fast??!0,scale:e.scale??1,exclude:e.exclude??[],excludeMode:e.excludeMode??"hide",filter:e.filter??null,filterMode:e.filterMode??"hide",placeholders:e.placeholders!==!1,embedFonts:e.embedFonts??!1,iconFonts:Array.isArray(e.iconFonts)?e.iconFonts:e.iconFonts?[e.iconFonts]:[],localFonts:Array.isArray(e.localFonts)?e.localFonts:[],excludeFonts:e.excludeFonts??void 0,fallbackURL:e.fallbackURL??void 0,cache:r,useProxy:typeof e.useProxy=="string"?e.useProxy:"",width:e.width??null,height:e.height??null,format:t,type:e.type??"svg",quality:e.quality??.92,dpr:e.dpr??(window.devicePixelRatio||1),backgroundColor:e.backgroundColor??(["jpeg","webp"].includes(t)?"#ffffff":null),filename:e.filename??"snapDOM",outerTransforms:e.outerTransforms??!0,outerShadows:e.outerShadows??!1}}function Wo(...e){return dn(...e),D}var D=Object.assign(Oo,{plugins:Wo}),Qt=Symbol("snapdom.internal"),ee=Symbol("snapdom.internal.silent"),nt=!1;async function Oo(e,t){if(!e)throw new Error("Element cannot be null or undefined");let r=Do(t);if(hn(r,t&&t.plugins),pe()&&(r.embedFonts===!0||Bo(e)))for(let n=0;n<3;n++)try{await Uo(e,t),nt=!1}catch{}return r.iconFonts&&r.iconFonts.length>0&&Dr(r.iconFonts),r.snap||(r.snap={toPng:(n,o)=>D.toPng(n,o),toSvg:(n,o)=>D.toSvg(n,o)}),D.capture(e,r,Qt)}D.capture=async(e,t,r)=>{if(r!==Qt)throw new Error("[snapdom.capture] is internal. Use snapdom(...) instead.");let n=await Yt(e,t),o={img:async(p,d)=>{let{toImg:h}=await z(()=>import("./toImg-CxZveqTv.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]));return h(n,{...p,...d||{}})},svg:async(p,d)=>{let{toSvg:h}=await z(()=>import("./toImg-CxZveqTv.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]));return h(n,{...p,...d||{}})},canvas:async(p,d)=>{let{toCanvas:h}=await z(()=>import("./toCanvas-iqQjX25n.js"),__vite__mapDeps([2,3,4,5,6,7,8,9,10,11,12]));return h(n,{...p,...d||{}})},blob:async(p,d)=>{let{toBlob:h}=await z(()=>import("./toBlob-BVZSU584.js"),__vite__mapDeps([13,2,3,4,5,6,7,8,9,10,11,12]));return h(n,{...p,...d||{}})},png:async(p,d)=>{let{rasterize:h}=await z(()=>import("./rasterize-34PCWURX-Bcw9BwF6.js"),__vite__mapDeps([1,2,3,4,5,6,7,8,9,10,11,12]));return h(n,{...p,...d||{},format:"png"})},jpeg:async(p,d)=>{let{rasterize:h}=await z(()=>import("./rasterize-34PCWURX-Bcw9BwF6.js"),__vite__mapDeps([1,2,3,4,5,6,7,8,9,10,11,12]));return h(n,{...p,...d||{},format:"jpeg"})},webp:async(p,d)=>{let{rasterize:h}=await z(()=>import("./rasterize-34PCWURX-Bcw9BwF6.js"),__vite__mapDeps([1,2,3,4,5,6,7,8,9,10,11,12]));return h(n,{...p,...d||{},format:"webp"})},download:async(p,d)=>{let{download:h}=await z(()=>import("./download-oYvCwz7N.js"),__vite__mapDeps([14,13,2,3,4,5,6,7,8,9,10,11,12]));return h(n,{...p,...d||{}})}},a={...t,export:{url:n},exports:{svg:async p=>{let{toSvg:d}=await z(()=>import("./toImg-CxZveqTv.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]));return d(n,{...t,...p||{},[ee]:!0})},canvas:async p=>{let{toCanvas:d}=await z(()=>import("./toCanvas-iqQjX25n.js"),__vite__mapDeps([2,3,4,5,6,7,8,9,10,11,12]));return d(n,{...t,...p||{},[ee]:!0})},png:async p=>{let{rasterize:d}=await z(()=>import("./rasterize-34PCWURX-Bcw9BwF6.js"),__vite__mapDeps([1,2,3,4,5,6,7,8,9,10,11,12]));return d(n,{...t,...p||{},format:"png",[ee]:!0})},jpeg:async p=>{let{rasterize:d}=await z(()=>import("./rasterize-34PCWURX-Bcw9BwF6.js"),__vite__mapDeps([1,2,3,4,5,6,7,8,9,10,11,12]));return d(n,{...t,...p||{},format:"jpeg",[ee]:!0})},jpg:async p=>{let{rasterize:d}=await z(()=>import("./rasterize-34PCWURX-Bcw9BwF6.js"),__vite__mapDeps([1,2,3,4,5,6,7,8,9,10,11,12]));return d(n,{...t,...p||{},format:"jpeg",[ee]:!0})},webp:async p=>{let{rasterize:d}=await z(()=>import("./rasterize-34PCWURX-Bcw9BwF6.js"),__vite__mapDeps([1,2,3,4,5,6,7,8,9,10,11,12]));return d(n,{...t,...p||{},format:"webp",[ee]:!0})},blob:async p=>{let{toBlob:d}=await z(()=>import("./toBlob-BVZSU584.js"),__vite__mapDeps([13,2,3,4,5,6,7,8,9,10,11,12]));return d(n,{...t,...p||{},[ee]:!0})},img:async p=>{let{toImg:d}=await z(()=>import("./toImg-CxZveqTv.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]));return d(n,{...t,...p||{},[ee]:!0})}}},l=await fn("defineExports",a),i=Object.assign({},...l.filter(p=>p&&typeof p=="object")),s={...o,...i};s.jpeg&&!s.jpg&&(s.jpg=(p,d)=>s.jpeg(p,d));function c(p,d){let h={...t,...d||{}};return(p==="jpeg"||p==="jpg")&&(h.backgroundColor==null||h.backgroundColor==="transparent")&&(h.backgroundColor="#ffffff"),h}let u=!1,f=Promise.resolve();async function m(p,d){let h=async()=>{let x=s[p];if(!x)throw new Error(`[snapdom] Unknown export type: ${p}`);let w=c(p,d),b={...t,export:{type:p,options:w,url:n}};await te("beforeExport",b);let g=await x(b,w);return await te("afterExport",b,g),u||(u=!0,await te("afterSnap",t)),g};return f=f.then(h)}let y={url:n,toRaw:()=>n,to:(p,d)=>m(p,d),toImg:p=>m("img",p),toSvg:p=>m("svg",p),toCanvas:p=>m("canvas",p),toBlob:p=>m("blob",p),toPng:p=>m("png",p),toJpg:p=>m("jpg",p),toWebp:p=>m("webp",p),download:p=>m("download",p)};for(let p of Object.keys(s)){let d="to"+p.charAt(0).toUpperCase()+p.slice(1);y[d]||(y[d]=h=>m(p,h))}return y};D.toRaw=(e,t)=>D(e,t).then(r=>r.toRaw());D.toImg=(e,t)=>D(e,t).then(r=>r.toImg());D.toSvg=(e,t)=>D(e,t).then(r=>r.toSvg());D.toCanvas=(e,t)=>D(e,t).then(r=>r.toCanvas());D.toBlob=(e,t)=>D(e,t).then(r=>r.toBlob());D.toPng=(e,t)=>D(e,{...t,format:"png"}).then(r=>r.toPng());D.toJpg=(e,t)=>D(e,{...t,format:"jpeg"}).then(r=>r.toJpg());D.toWebp=(e,t)=>D(e,{...t,format:"webp"}).then(r=>r.toWebp());D.download=(e,t)=>D(e,t).then(r=>r.download());async function Uo(e,t){if(nt)return;let r={...t,fast:!0,embedFonts:!0,scale:.2},n;try{n=await Yt(e,r)}catch{}await new Promise(o=>requestAnimationFrame(()=>requestAnimationFrame(o))),n&&await new Promise(o=>{let a=new Image;try{a.decoding="sync",a.loading="eager"}catch{}a.style.cssText="position:fixed;left:0px;top:0px;width:10px;height:10px;opacity:0.01;pointer-events:none;",a.src=n,document.body.appendChild(a),(async()=>{try{typeof a.decode=="function"&&await a.decode()}catch{}let l=performance.now();for(;!(a.complete&&a.naturalWidth>0)&&performance.now()-l<900;)await new Promise(i=>setTimeout(i,200));await new Promise(i=>requestAnimationFrame(i));try{a.remove()}catch{}o()})()}),e.querySelectorAll("canvas").forEach(o=>{try{let a=o.getContext("2d",{willReadFrequently:!0});a&&a.getImageData(0,0,1,1)}catch{}}),nt=!0}function Bo(e){let t=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT);for(;t.nextNode();){let r=t.currentNode,n=getComputedStyle(r),o=n.backgroundImage&&n.backgroundImage!=="none",a=n.maskImage&&n.maskImage!=="none"||n.webkitMaskImage&&n.webkitMaskImage!=="none";if(o||a||r.tagName==="CANVAS")return!0}return!1}const Vo=async(e,t={},r="Admin Dashboard")=>{const{quality:n=1,backgroundColor:o="#ffffff",format:a="a4",orientation:l="portrait"}=t;try{const i=Array.from(document.getElementsByTagName("html")[0].classList);i.indexOf("dark")>-1&&document.getElementsByTagName("html")[0].classList.remove("dark");const s=await D.toPng(e,{quality:n,backgroundColor:o,type:"png"});if(i.indexOf("dark")>-1&&document.getElementsByTagName("html")[0].classList.add("dark"),!s)throw new Error("Failed to capture element with Snapdom");const c=new ur({orientation:l,unit:"mm",format:a}),u=c.internal.pageSize.getWidth(),f=c.internal.pageSize.getHeight(),m=s.width,y=s.height,p=Math.min(u/m,f/y),d=m*p,h=y*p,x=(u-d)/2,w=(f-h)/2;return c.addImage(s,"PNG",x,w,d,h),c.save(`${r}.pdf`),c.output("blob")}catch(i){throw console.error("Error converting element to PDF blob:",i),new Error(`Failed to create PDF blob: ${i instanceof Error?i.message:"Unknown error"}`)}},ua=({dashboardRef:e,tableData:t=[],tableColumns:r=[],title:n="Admin Dashboard",dateRange:o="",filterState:a,className:l=""})=>{const[i,s]=O.useState(!1),c=O.useRef(null),u=O.useCallback(()=>{if(!e?.current||!c.current)return console.warn("Dashboard ref or desktop clone ref not available"),null;const b=e.current,g=c.current;g.innerHTML="";const C=b.cloneNode(!0);return C.querySelectorAll("*").forEach(j=>{const T=j;T.classList.value=T.classList.value.replace(/\s(md|lg|xl|2xl):/g," ").replace(/\s(md|lg|xl|2xl):\w+/g," ").replace(/\s+(md|lg|xl|2xl)\s+/g," ").trim()}),C.className=C.className.replace(/\scontainer-mobile/g,"").replace(/\s-mobile/g,"").trim(),C.style.width="100%",C.style.maxWidth="1280px",C.style.margin="0 auto",C.style.padding="24px",C.querySelectorAll('[class*="grid-cols-1"]').forEach(j=>{const T=j;T.className=T.className.replace(/grid-cols-1/g,"grid-cols-2").replace(/lg:grid-cols-2/g,"lg:grid-cols-2").replace(/md:grid-cols-2/g,"md:grid-cols-2")}),C.querySelectorAll('[class*="gap-4"]').forEach(j=>{const T=j;(T.innerHTML.includes("Total Sales")||T.innerHTML.includes("Avg Order Value"))&&(T.className=T.className.replace(/grid-cols-1/g,"grid-cols-4").replace(/lg:grid-cols-4/g,"lg:grid-cols-4").replace(/md:grid-cols-2/g,"md:grid-cols-4"))}),g.style.position="fixed",g.style.left="-9999px",g.style.top="0",g.style.width="1280px",g.style.backgroundColor="#ffffff",g.style.zIndex="-1",g.style.overflow="visible",g.appendChild(C),g},[e,c]),f=O.useCallback(()=>{c.current&&(c.current.innerHTML="")},[c]),m=lr.useReactToPrint({contentRef:e,documentTitle:`${n} - ${o}`,onBeforePrint:()=>(s(!0),Promise.resolve()),onAfterPrint:()=>{s(!1),H.success("PDF printed successfully!")},onPrintError:b=>{s(!1),console.error("Print error:",b),H.error("Failed to print PDF")}}),y=O.useCallback(async()=>{s(!0),u(),await new Promise(g=>setTimeout(g,100));const b=c.current;if(!b){console.error("Desktop clone element not found"),s(!1);return}try{D.download(b,{quality:1,backgroundColor:"#ffffff",filename:`${n}.png`}).then(()=>{s(!1),f()}).catch(g=>{console.error("Error in handleDownloadPNG",g),s(!1),f()})}catch(g){console.error("Error in handleDownloadPNG:",g),s(!1),f()}},[u,f]),p=async()=>{s(!0),u(),await new Promise(b=>setTimeout(b,100));try{await Vo(c?.current,{quality:1,backgroundColor:"#ffffff",format:"a4",orientation:"portrait"},n)}catch(b){console.error("Error in handleDownloadPDF:",b)}finally{s(!1),f()}},[d,h]=O.useState("idle"),x=O.useCallback(async()=>{if(!t.length||!r.length){H.error("No table data available for export");return}s(!0);try{const b=localStorage.getItem("token");await new Promise((g,C)=>{ir.postData({endpoint:"/admin/export-data",body:{request:sr(a)},responseType:"blob",Authorization:`Bearer ${b}`,successCallback:v=>{const $=URL.createObjectURL(v),E=document.createElement("a");E.href=$,E.download=`${n.toLowerCase().replace(/\s+/g,"-")}-data.xlsx`,document.body.appendChild(E),E.click(),document.body.removeChild(E),URL.revokeObjectURL($),g()},errorCallback:v=>{console.error("Export API error:",v),C(v)}})}),H.success("Table data exported successfully!")}catch(b){console.error("Table export error:",b),H.error(`Failed to export table: ${b instanceof Error?b.message:"Unknown error"}`)}finally{s(!1)}},[t,r,n,o,a]),w=i||d==="preparing";return S.jsxs("div",{className:`flex items-center gap-2 ${l}`,children:[S.jsx("div",{ref:c,className:"desktop-clone-container",style:{position:"fixed",left:"-9999px",top:"0",width:"1280px",backgroundColor:"#ffffff",zIndex:"-1",overflow:"visible"}}),S.jsxs(Ve,{children:[S.jsx(ze,{asChild:!0,children:S.jsxs(Ue,{variant:"outline",size:"default",disabled:w,className:"flex items-center gap-2 basis-45 dark:border-green-600 hover:text-primary",children:[S.jsx(Ge,{className:"h-4 w-4"}),d==="preparing"?"Preparing...":"Export All"]})}),S.jsxs(qe,{align:"end",className:"w-56",children:[S.jsx(He,{children:"Dashboard"}),S.jsx(X,{onClick:m,disabled:w||!e,children:S.jsxs("div",{className:"flex items-center",children:[S.jsx(Ie,{className:"h-4 w-4 mr-2"}),S.jsx("span",{children:i?"Printing...":"Print"})]})}),S.jsx(X,{onClick:p,disabled:w||!e,className:"hidden lg:block",children:S.jsxs("div",{className:"flex items-center",children:[S.jsx(Ie,{className:"h-4 w-4 mr-2"}),S.jsx("span",{children:i?"Printing...":"Download PDF"})]})}),S.jsx(X,{onClick:y,disabled:w||!e,className:"hidden lg:block",children:S.jsxs("div",{className:"flex items-center",children:[S.jsx(Ie,{className:"h-4 w-4 mr-2"}),S.jsx("span",{children:i?"Printing...":"Download PNG"})]})}),S.jsxs(X,{onClick:x,disabled:w||!t.length||!r.length,children:[S.jsx(dr,{className:"h-4 w-4 mr-2"}),"Data Tables (Excel)"]})]})]})]})},Kt=e=>{const t=e.cloneNode(!0),n=window.getComputedStyle(document.body).fontFamily||'var(--default-font-family, ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji")';t.querySelectorAll("text, tspan").forEach(l=>{const i=l,s=window.getComputedStyle(l);i.style.fontFamily||(i.style.fontFamily=n),!i.style.fontSize&&s.fontSize&&(i.style.fontSize=s.fontSize),!i.style.fontWeight&&s.fontWeight&&(i.style.fontWeight=s.fontWeight),!i.style.fill&&s.color&&(i.style.fill=s.color)});const a=document.createElementNS("http://www.w3.org/2000/svg","style");return a.textContent=`
    text, tspan {
      font-family: ${n} !important;
      font-size: inherit !important;
      font-weight: inherit !important;
      fill: inherit !important;
    }
  `,t.insertBefore(a,t.firstChild),t},zo=(e,t=800,r=600)=>new Promise((n,o)=>{try{if(!e){o(new Error("SVG element is null or undefined"));return}if(!(e instanceof SVGElement)){o(new Error("Provided element is not an SVG element"));return}const a=t,l=r,i=Kt(e),s=new XMLSerializer().serializeToString(i);if(!s||s.length===0){o(new Error("Failed to serialize SVG element"));return}const c=new Blob([s],{type:"image/svg+xml;charset=utf-8"}),u=URL.createObjectURL(c),f=new Image;f.crossOrigin="anonymous",f.onload=()=>{try{const m=document.createElement("canvas");m.width=a,m.height=l;const y=m.getContext("2d");if(!y){URL.revokeObjectURL(u),o(new Error("Could not get 2D context for canvas"));return}y.fillStyle="white",y.fillRect(0,0,a,l);const p=20,d=a-p*2,h=l-p*2,x=d/f.naturalWidth,w=h/f.naturalHeight,b=Math.min(x,w,1),g=f.naturalWidth*b,C=f.naturalHeight*b,v=p+(d-g)/2,$=p+(h-C)/2;y.drawImage(f,v,$,g,C);const E=m.toDataURL("image/png");if(URL.revokeObjectURL(u),!E||E==="data:,"){o(new Error("Failed to create PNG data URL"));return}n(E)}catch(m){URL.revokeObjectURL(u),o(m)}},f.onerror=()=>{URL.revokeObjectURL(u),o(new Error("Failed to load SVG image"))},f.src=u}catch(a){o(a)}}),Jt=async(e,t=800,r=600,n=3,o=100)=>{if(!e)return console.error("Container element is null or undefined."),null;let a=null;for(let l=0;l<n;l++)try{if(!document.body.contains(e))throw new Error("Element is not attached to the document");const i=e.querySelector("svg");if(!i){if(l<n-1){console.warn(`Attempt ${l+1}: No SVG element found, retrying...`),await new Promise(f=>setTimeout(f,o));continue}return console.error("No SVG element found in the provided container after retries."),null}const s=window.getComputedStyle(i);if(s.display==="none"||s.visibility==="hidden")throw new Error("SVG element is hidden");const c=i.getBoundingClientRect();if(c.width===0||c.height===0){if(l<n-1){console.warn(`Attempt ${l+1}: SVG has zero dimensions, retrying...`),await new Promise(f=>setTimeout(f,o));continue}throw new Error("SVG element has zero dimensions")}const u=await zo(i,t,r);if(!u||u==="data:,")throw new Error("Failed to create PNG data URL from SVG");return u}catch(i){a=i,console.warn(`Attempt ${l+1} failed:`,i),l<n-1&&await new Promise(s=>setTimeout(s,o))}return console.error(`Failed to convert SVG to PNG after ${n} attempts. Last error:`,a),null},qo=async(e,t={})=>{const{filename:r="chart",width:n=800,height:o=600}=t;if(!e)throw new Error("Element is null or undefined");const a=await Jt(e,n,o);if(!a)throw new Error("Failed to convert chart to PNG after all retries");try{const l=document.createElement("a");l.download=`${r}.png`,l.href=a,document.body.appendChild(l),l.click(),document.body.removeChild(l)}catch(l){throw new Error(`Failed to trigger download: ${l}`)}},Ho=(e,t="chart")=>{const r=e.querySelector("svg");if(!r)throw new Error("No SVG element found");const n=Kt(r),o=new XMLSerializer().serializeToString(n),a=new Blob([o],{type:"image/svg+xml;charset=utf-8"}),l=URL.createObjectURL(a),i=document.createElement("a");i.href=l,i.download=`${t}.svg`,i.click(),URL.revokeObjectURL(l)},Go=async e=>{const t=await Jt(e);if(!t)throw new Error("Failed to convert chart to image");const n=await(await fetch(t)).blob();await navigator.clipboard.write([new ClipboardItem({[n.type]:n})])},Xo=async(e,t)=>{const r=`${t}
${e.map(n=>{if(n.totalStock||n.stock)return`${n.category||n.item||n.name}: Cost ₹${n.costValue?.toLocaleString()||0}, Stock: ${n.availableStock||n.totalStock||n.stock}`;if(n.locationName)return`${n.locationName}: Cost ₹${n.costValue?.toLocaleString()||0}, Stock: ${n.availableStock||n.totalStock}`;if(n?.availableStock>=0){const o=n?.costValue?`₹${n.costValue.toLocaleString()}`:"₹0",a=n?.availableStock||0,l=n?.pendingQuantity||n?.unfulfilledQuantity||0,i=n.fulfilledQuantity||0;return l>0||i>0?`${n.name||n.product} : ${o}, Stock: ${a}, ${i} Fulfilled, ${l} Pending`:`${n.name||n.product} : ${o}, Stock: ${a}`}return`${n.product||n.category||n.orderStatus}: ${n.totalSales?"₹"+n.totalSales:n.fulfilledQuantity+" Fulfilled, "+n.pendingQuantity+" Pending"}`}).join(`
`)}`;await navigator.clipboard.writeText(r)},Zt=({containerRef:e,data:t,title:r,filename:n="chart",className:o="",variant:a="default"})=>{const[l,i]=O.useState(!1),s=async()=>{if(e.current){i(!0);try{await qo(e.current,{filename:n}),H.success("Chart exported as PNG successfully!")}catch(m){H.error(`Failed to export PNG: ${m}`)}finally{i(!1)}}},c=()=>{if(e.current)try{Ho(e.current,n),H.success("Chart exported as SVG successfully!")}catch(m){H.error(`Failed to export SVG: ${m}`)}},u=async()=>{if(e.current){i(!0);try{await Go(e.current),H.success("Chart copied to clipboard!")}catch(m){H.error(`Failed to copy chart: ${m}`)}finally{i(!1)}}},f=async()=>{i(!0);try{await Xo(t,r),H.success("Chart data copied to clipboard!")}catch(m){H.error(`Failed to copy data: ${m}`)}finally{i(!1)}};return a==="compact"?S.jsx("div",{className:`flex items-center gap-2 ${o}`,children:S.jsxs(Ve,{children:[S.jsx(ze,{asChild:!0,children:S.jsx(Ue,{variant:"outline",size:"sm",disabled:l,className:"h-8 w-8 p-0",children:S.jsx(Ge,{className:"h-4 w-4"})})}),S.jsxs(qe,{align:"end",children:[S.jsxs(X,{onClick:s,disabled:l,children:[S.jsx(ve,{className:"h-4 w-4 mr-2"}),"Download PNG"]}),S.jsxs(X,{onClick:c,children:[S.jsx(ve,{className:"h-4 w-4 mr-2"}),"Download SVG"]}),S.jsx(dt,{}),S.jsxs(X,{onClick:u,disabled:l,children:[S.jsx(ke,{className:"h-4 w-4 mr-2"}),"Copy Image"]}),S.jsxs(X,{onClick:f,disabled:l,children:[S.jsx(ke,{className:"h-4 w-4 mr-2"}),"Copy Data"]})]})]})}):S.jsx("div",{className:`flex items-center gap-2 ${o}`,children:S.jsxs(Ve,{children:[S.jsx(ze,{asChild:!0,children:S.jsxs(Ue,{variant:"outline",size:"sm",disabled:l,className:"flex items-center gap-2",children:[S.jsx(Ge,{className:"h-4 w-4"}),"Export"]})}),S.jsxs(qe,{align:"end",className:"w-48",children:[S.jsx(He,{children:"Download"}),S.jsxs(X,{onClick:s,disabled:l,children:[S.jsx(ve,{className:"h-4 w-4 mr-2"}),"PNG Image"]}),S.jsxs(X,{onClick:c,children:[S.jsx(ve,{className:"h-4 w-4 mr-2"}),"SVG Vector"]}),S.jsx(dt,{}),S.jsx(He,{children:"Copy"}),S.jsxs(X,{onClick:u,disabled:l,children:[S.jsx(ke,{className:"h-4 w-4 mr-2"}),"Chart Image"]}),S.jsxs(X,{onClick:f,disabled:l,children:[S.jsx(ke,{className:"h-4 w-4 mr-2"}),"Chart Data"]})]})]})})},Yo=({active:e,payload:t,label:r})=>e&&t&&t.length?S.jsxs("div",{className:"custom-tooltip",style:{padding:"10px",borderRadius:"10px",boxShadow:"0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1)"},children:[S.jsx("p",{className:"font-bold text-sm pb-1",children:r}),t.map((n,o)=>S.jsxs("p",{className:"text-sm",children:[n.dataKey==="availableStock"?"Available":n.dataKey==="pendingQuantity"||n.dataKey==="unfulfilledQuantity"?"Pending":n.dataKey==="fulfilledQuantity"?"Fulfilled":n.dataKey,": ",S.jsx("span",{className:"font-bold",children:n.value})]},o))]}):null,Qo=(e,t=12)=>{if(!e)return"";if(e.length<=t)return e;const r=e.split(" "),n=[];let o="";for(const a of r)(o+" "+a).trim().length<=t?o=(o+" "+a).trim():(o&&n.push(o),o=a);return o&&n.push(o),n.join(`
`)},it=O.forwardRef(({className:e,data:t,bars:r,xAxisKey:n,showGrid:o=!0,showTooltip:a=!0,showLegend:l=!1,tooltipFormatter:i,yAxisTickFormatter:s,xAxisTickFormatter:c,onClick:u,onHover:f,selectedItems:m=[],layout:y="horizontal",stacked:p=!1,barSize:d},h)=>{const[x,w]=O.useState(null),{effectiveTheme:b}=cr(),C=b==="dark"?"#e5e5e5":"#1a1a1a",v=(P,M)=>{u&&u(P,M)},$=(P,M)=>{const _=P[n]||"unknown";w(`${r[M].dataKey}-${_}`),f&&f(P)},E=()=>{w(null),f&&f(null)},j=(P,M,_)=>{const B=x===`${P}-${M}`,U=r[_]?.color||"#8884d8";return B&&r[_]?.color?T(U,-20):U},T=(P,M)=>{const _=parseInt(P.replace("#",""),16),B=Math.round(2.55*M),U=(_>>16)+B,L=(_>>8&255)+B,F=(_&255)+B;return"#"+(16777216+(U<255?U<1?0:U:255)*65536+(L<255?L<1?0:L:255)*256+(F<255?F<1?0:F:255)).toString(16).slice(1)},I=s||(P=>P>=1e6?`₹${(P/1e6).toFixed(1)}M`:P>=1e3?`₹${(P/1e3).toFixed(1)}K`:`₹${P}`);return S.jsx("div",{ref:h,className:Be("w-full",e),children:S.jsx(Pt,{width:"100%",height:485,children:S.jsxs(hr,{data:t,layout:y,margin:{top:20,right:30,left:20,bottom:10},children:[o&&S.jsx(pr,{tick:{fontSize:12,fill:C},axisLine:!1,tickLine:!1,tickFormatter:I}),S.jsx(gr,{dataKey:n,tick:({x:P,y:M,payload:_})=>{const B=Qo(String(_.value),10);return S.jsx("text",{x:P,y:M,fill:C,textAnchor:"end",transform:`rotate(-45, ${P}, ${M})`,className:"text-sm font-medium",children:B.split(`
`).map((U,L)=>S.jsx("tspan",{x:P,dy:L===0?0:14,children:U},L))})},axisLine:!1,tickLine:!1,height:100}),a&&S.jsx(Tt,{content:S.jsx(Yo,{})}),r.map((P,M)=>S.jsx(yr,{dataKey:P.dataKey,fill:j(P.dataKey,"",M),name:P.name,radius:[4,4,0,0],stackId:p?"stack":void 0,barSize:d,onClick:_=>v(_.payload,M),onMouseEnter:_=>$(_.payload,M),onMouseLeave:E,style:{cursor:u?"pointer":"default",transition:"all 0.3s ease"}},P.dataKey))]})})})});it.displayName="BarChart";const Ko=O.forwardRef((e,t)=>S.jsx(it,{ref:t,...e,stacked:!0,bars:e.bars.map(r=>({...r,stackId:"stack"}))}));Ko.displayName="StackedBarChart";const da=({data:e,title:t,bars:r,selectedItems:n,onItemClick:o,onItemHover:a,theme:l,showPercentage:i=!1,showExportControls:s=!0,yAxisTickFormatter:c,xAxisTickFormatter:u})=>{const f=O.useRef(null),[m,y]=O.useState(!1);O.useEffect(()=>{const w=window.matchMedia("print"),b=g=>y(g.matches);return y(w.matches),w.addEventListener("change",b),()=>w.removeEventListener("change",b)},[]);const p=(w,b)=>{o(w)},d=w=>{a(w)},h=(w,b)=>b.toLowerCase().includes("quantity")||b==="Quantity"?w.toLocaleString():`₹${w.toLocaleString()}`,x=r.map((w,b)=>({dataKey:w.dataKey,name:w.name,color:w.color||Xe.normal[b%Xe.normal.length]}));return S.jsxs("div",{className:"w-full",children:[s&&S.jsx("div",{className:"flex justify-end items-center mb-4 no-print",children:S.jsx(Zt,{containerRef:f,data:e,title:t,filename:t.toLowerCase().replace(/\s+/g,"-"),variant:"compact"})}),S.jsx("div",{ref:f,style:{width:m?"80%":"100%",margin:"0 auto"},children:S.jsx(it,{data:e,bars:x,xAxisKey:"product",showGrid:!0,showTooltip:!0,tooltipFormatter:h,yAxisTickFormatter:c,xAxisTickFormatter:u,onClick:p,onHover:d,selectedItems:n,layout:"horizontal",stacked:!1})})]})},fa=({data:e,selectedItems:t,onItemToggle:r,theme:n,showPercentage:o=!0,formatAsCurrency:a=!0,className:l=""})=>{const i=u=>e.find(m=>m.name===u)?.color||"#8884d8",s=u=>t.includes(u),c=(u,f=!1)=>a?f?`₹${u.toLocaleString()}`:`₹${u.toLocaleString()}`:u.toLocaleString();return S.jsxs("div",{className:`w-full InteractiveLegend ${l}`,children:[t.length>0&&S.jsx("div",{className:"mb-3 flex justify-end",children:S.jsxs("button",{onClick:()=>t.forEach(u=>r(u)),className:"text-xs text-muted-foreground hover:text-primary transition-colors px-2 py-1 rounded hover:bg-accent/50",children:["Clear All Filters (",t.length,")"]})}),S.jsx("div",{className:"print:overflow-visible overflow-y-auto print:scrollbar-hide h-20 print:h-auto",children:S.jsx("div",{className:"grid grid-cols-2 gap-1 print:columns-2 print:gap-1 print:!grid-cols-none print:w-full",children:e.map((u,f)=>S.jsxs("div",{className:`flex items-center gap-1 px-3 py-2 print:w-8 print:px-0.5 print:py-0.5 print:text-xs rounded-lg transition-all duration-200 cursor-pointer hover:bg-accent/50 legend-item ${s(u.name)?"bg-primary/10 border border-primary/20":"border border-transparent"}`,onClick:()=>r(u.name),children:[S.jsx("div",{className:"relative",children:s(u.name)?S.jsx(fr,{className:"w-4 h-4 text-primary",style:{color:i(u.name)}}):S.jsx(mr,{className:"w-4 h-4 text-muted-foreground"})}),S.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:i(u.name)}}),S.jsxs("div",{className:"flex flex-col",children:[S.jsx("span",{className:`text-sm font-medium ${s(u.name)?"text-primary":"text-foreground"}`,children:u.name}),o&&u.percentage&&S.jsxs("div",{className:"text-xs text-muted-foreground",children:[u.percentage.toFixed(1),"% • ",c(u.value)]}),!o&&S.jsx("div",{className:`text-xs ${s(u.name)?"text-primary":"text-muted-foreground"}`,children:c(u.value)})]})]},u.name))})})]})};function Jo(){const[e,t]=O.useState({width:null,height:null});return O.useLayoutEffect(()=>{const r=()=>{t({width:window.innerWidth,height:window.innerHeight})};return r(),window.addEventListener("resize",r),()=>{window.removeEventListener("resize",r)}},[]),e}const Zo=(e,t=15)=>{if(!e)return"";if(e.length<=t)return e;const r=e.split(" "),n=[];let o="";for(const a of r)(o+" "+a).trim().length<=t?o=(o+" "+a).trim():(o&&n.push(o),o=a);return o&&n.push(o),n.join(`
`)},st=O.forwardRef(({className:e,data:t,dataKey:r,nameKey:n,colors:o,innerRadius:a,outerRadius:l,paddingAngle:i=1,showLabel:s=!0,showTooltip:c=!0,tooltipFormatter:u,labelFormatter:f,onClick:m,onHover:y,selectedItems:p=[],activeShape:d,theme:h,...x},w)=>{const{width:b,height:g}=Jo(),C=b<640,v=b>=640&&b<1024,$=C?60:v?80:100,E=C?70:v?100:120,j=C||v?$:a??$,T=C||v?E:l??E,I=o||["#894829","#f69568","#d97706","#dc2626","#059669","#7c3aed","#db2777","#0891b2"],M=h==="dark"?"#f5f5f5":"#1a1a1a",_=t.reduce((L,F)=>L+(F[r]||0),0),B=(L,F)=>{m&&m(L,F)},U=({active:L,payload:F,theme:W})=>{if(!L||!F?.length)return null;const R=F[0].payload,q=_>0?R[r]/_*100:0,V=W==="dark";return S.jsxs("div",{className:Be("rounded-lg border p-3 shadow-md",V?"bg-slate-800 border-slate-700 text-white":"bg-white border-gray-300 text-black"),children:[S.jsx("p",{className:"font-medium text-sm mb-2",children:R[n]}),S.jsxs("div",{className:"space-y-1",children:[S.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[S.jsx("span",{className:V?"text-gray-300":"text-gray-600",children:"Value:"}),S.jsx("span",{className:"font-medium",children:u?u(R[r],R[n],R):`₹${R[r].toLocaleString()}`})]}),S.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[S.jsx("span",{className:V?"text-gray-300":"text-gray-600",children:"Percentage:"}),S.jsxs("span",{className:"font-medium",children:[q.toFixed(1),"%"]})]})]})]})};return S.jsx("div",{ref:w,className:Be("w-full pb-8",e),...x,children:S.jsx(Pt,{width:"100%",height:450,children:S.jsxs(wr,{children:[S.jsx(br,{data:t,innerRadius:j,outerRadius:T,paddingAngle:i,dataKey:r,nameKey:n,onClick:B,label:({name:L,value:F,percent:W=0,cx:R,cy:q,midAngle:V=0})=>{const oe=`₹${F.toLocaleString()}`;let re=`${L||""} ${oe} (${(W*100).toFixed(0)}%)`;f&&(re=f(L||"",F,{name:L,value:F,percent:W}));const ae=Zo(re,12),ne=Math.PI/180,be=(V+360)%360,xe=be>150&&be<210?0:15,Se=T+20+xe,G=R+Se*Math.cos(-V*ne),Q=q+Se*Math.sin(-V*ne),Te=G>R?"start":"end";return S.jsx("text",{x:G,y:Q,fill:M,textAnchor:Te,dominantBaseline:"central",className:"text-sm font-medium",children:ae.split(`
`).map((je,me)=>S.jsx("tspan",{x:G,dy:me===0?0:14,children:je},me))})},labelLine:!0,children:t.map((L,F)=>{const W=p.includes(String(L[n]||"")),R=F%I.length,q=I[R];return S.jsx(xr,{fill:q,stroke:"var(--background)",strokeWidth:2,style:{transition:"all 0.3s ease",transformOrigin:"center",filter:W?"drop-shadow(0 0 8px rgba(59, 130, 246, 0.5))":"none",cursor:m?"pointer":"default",opacity:W?1:void 0}},`cell-${F}`)})}),c&&S.jsx(Tt,{content:S.jsx(U,{})})]})})})});st.displayName="PieChart";const ea=O.forwardRef((e,t)=>S.jsx(st,{ref:t,...e,innerRadius:e.innerRadius??80,outerRadius:e.outerRadius??100}));ea.displayName="DonutChart";const ma=({data:e,title:t,dataKey:r,nameKey:n,selectedItems:o,onItemClick:a,onItemHover:l,theme:i,innerRadius:s=120,outerRadius:c=140,showExportControls:u=!0,labelFormatter:f,tooltipFormatter:m})=>{const y=O.useRef(null),[p,d]=O.useState(!1);O.useEffect(()=>{const C=window.matchMedia("print"),v=$=>d($.matches);return d(C.matches),C.addEventListener("change",v),()=>C.removeEventListener("change",v)},[]);const h=e.reduce((C,v)=>C+(v[r]||0),0),x=Xe.normal,w=(C,v)=>{a(C)},b=C=>{l(C)},g=(C,v,$)=>m?m(C,v,$):`₹${C.toLocaleString()}`;return S.jsxs("div",{className:"w-full",children:[u&&S.jsx("div",{className:"flex justify-end items-center mb-4 no-print",children:S.jsx(Zt,{containerRef:y,data:e.map(C=>({...C,percentage:h>0?(C[r]||0)/h*100:0})),title:t,filename:t.toLowerCase().replace(/\s+/g,"-"),variant:"compact"})}),S.jsx("div",{ref:y,children:S.jsx(st,{data:e,dataKey:r,nameKey:n,colors:x,innerRadius:s,outerRadius:c,paddingAngle:1,showLabel:!0,showTooltip:!0,tooltipFormatter:g,labelFormatter:f,onClick:w,onHover:b,selectedItems:o,theme:i})})]})};export{ca as A,ua as G,ma as I,fa as a,da as b,ia as c,Xe as i,pe as l,sa as t};
